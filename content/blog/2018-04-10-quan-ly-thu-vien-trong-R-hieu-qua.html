---
title: Quản lý thư viện trong R hiệu quả
author: 'Hoàng Đức Anh'
date: '2017-08-10'
slug: quan-ly-thu-vien-trong-r-hieu-qua
categories:
  - R
tags: ["R"]
summary: "Hướng dẫn cách thức quản lý thư viện trong R hiệu quả"
banner: "img/banners/banner-1.png"
---



<p>Khi mới bắt đầu sử dụng R, cài đặt và quản lý R có vẻ như chẳng có gì phức tạp cả. Tuy nhiên, mỗi khi cài đặt phiên bản update mới của R, các vấn đề bắt đầu xuất hiện. Trong phần lớn trường hợp, chúng ta phải cài đặt lại các library, việc này đặc biệt tốn thời gian.</p>
<p>Có một cách truyền thông để xử lý vấn đề trên, đó là copy toàn bộ các library cũ vào folder chứa library mới. Ví dụ, toàn bộ library của <code>R 3.3</code> nằm ở thư mục <code>D:\My Documents\R\win-library\3.3</code>. Sau khi update lên <code>R 3.4</code>, ta không muốn cài đặt lại tất cả các library, cách nhanh nhất là copy toàn bộ library cũ vào folder chứa library mới nằm ở <code>D:\My Documents\R\win-library\3.4</code>.</p>
<p>Tuy nhiên, cách xử lý này cũng có nhiều nhược điểm. Thứ nhất, cách xử lý này tốn thời gian để copy các folder, nhiều khi lên tới 40-50 phút nếu ta có rất nhiều library. Thứ hai, nếu ta có nhiều version của R, cách này sẽ tiêu tốn dung lượng lưu trữ đến vài Gb. Cuối cùng, ta không thể chỉ cài đặt R library một lần và sử dụng cho nhiều lần sau, với mỗi phiên bản của R (VD: R từ Cran và RServices của Microsoft) ta phải cài đặt hoặc copy nhiều lần.</p>
<p>Tuy nhiên, có một cách rất hiệu quả để đơn giản hóa toàn bộ các vấn đề trên bằng một vài bước đơn giản như sau.</p>
<ul>
<li><strong>Bước 1</strong>: Tạo một folder cố đinh để lưu trữ library trong máy tính. VD <code>D:/Rlibrary</code></li>
<li><strong>Bước 2</strong>: Copy toàn bộ library vào folder vừa tạo (VD: Copy library từ <code>D:\My Documents\R\win-library\3.3</code>) <code>D:/Rlibrary</code></li>
<li><strong>Bước 3</strong>: Thay đổi chế độ mặc định của R để R hiểu thư mục <code>D:/Rlibrary</code> (folder mới) là thư mục làm việc mặc định, tất cả các library mới sẽ được cài đặt tại đây.
<ul>
<li>Mở Rstudio và tìm thư mục hiện đang chứa library trong R</li>
</ul></li>
</ul>
<pre class="r"><code>.libPaths()</code></pre>
<pre><code>## [1] &quot;D:/Rlibrary&quot;                       
## [2] &quot;C:/Program Files/R/R-3.4.1/library&quot;</code></pre>
<p>Như các bạn thấy, ta có 2 kết quả, thứ nhất là thư mục <code>D:/Rlibrary</code> - bỏ qua thư mục này &amp; thư mục số 2 <code>C:/Program Files/R/R-3.3.0/library</code>. Ta có thể thay đổi thư mục cài đặt như sau</p>
<ul>
<li>Truy cập <code>C:/Program Files/R/R-3.3.0/library</code></li>
<li>Truy cập <code>base\R</code></li>
<li>Copy file <code>Rprofile</code> ra desktop</li>
<li>Mở <code>Rprofile</code> với notepad</li>
<li>Thêm đoạn code sau vào dòng cuối cùng</li>
<li>Copy <code>Rprofile</code> ngược lại vào <code>C:/Program Files/R/R-3.3.0/library/base/R</code></li>
</ul>
<p>Khởi động lại Rstudio và gõ câu lệnh <code>.libPaths()</code>, ta sẽ nhìn thấy thư mục mặc định chưa library chuyển sang <code>D:/Rlibrary</code>.</p>
<p>Sau khi thực hiện xong, nếu update R, việc các bạn phải làm chỉ là điều chỉnh lại thư viện mặc định của phiên bản R mới sang <code>D:/Rlibrary</code> như hướng dẫn ở trên, không cần copy hoặc cài đặt lại các library mới.</p>

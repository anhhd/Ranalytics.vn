<!DOCTYPE html>
<html>
  <head>
    <title>Phong cách viết code</title>
    <meta charset="utf-8">
    <meta name="author" content="Hoàng Đức Anh" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/fa-svg-with-js.css" rel="stylesheet" />
    <script src="libs/font-awesome/js/fontawesome-all.min.js"></script>
    <script src="libs/font-awesome/js/fa-v4-shims.min.js"></script>
    <link rel="stylesheet" href="ranalytics.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Phong cách viết code
### Hoàng Đức Anh

---






layout: true
.footer[Ranalytics.vn]
.rectangle[]

---

## Giới thiệu

&gt;"Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread."
&gt;
&gt;Hadley Wickham


---

## Tên file

- Không sử dụng dấu cách khi đặt tên file, dùng `-` hoặc `_` để phân tách các từ
- Sử dụng chữ viết thường


```r
# Good
ucb-admit.csv

# Bad
UCB Admit.csv
```

---

## Tên object

- Sử dụng dâu gạch dưới `_` để phân tách các từ
- Đặt tên *có ý nghĩa* nhưng ngắn gọn
- Không sử dụng tên đã bị lặp lại


```r
# Good
acs_employed

# Bad
acs.employed
*acs2
*acs3
acs_subset
acs_subsetted_for_males
```

---

## Dấu cách

- Đặt dấu cách trước và sau các toán tử (=, +, -, &lt;-, %&gt;%, ...)
- Đặt dấu cách sau dấu phẩy (không đặt dấu cách trước dấu phẩy `,`) - như viết chính tả thông thường
- Không đặt khoảng trắng sau tên hàm



```r
# Good
average &lt;- mean(feet / 12 + inches, na.rm = TRUE)
# Bad
average&lt;-mean(feet/12+inches,na.rm=TRUE)

#Good
summary(mtcars)
#Bad
summary (mtcars)
```

---

## ggplot2

- Luôn kết thúc một dòng với dấu  `+`
- Dòng tiếp theo cần phải thụt đầu dòng


```r
# Good
ggplot(diamonds, mapping = aes(x = price)) +
  geom_histogram()

# Bad
ggplot(diamonds,mapping=aes(x=price))+geom_histogram()
```

---

## ggplot2 (cont)

- Trong trường hợp biểu đồ quá phức tạp, ta có thể để mỗi thuộc tính mapping trong ggplot thành một dòng


```r
#Good
ggplot(diamonds %&gt;% head(100), 
       mapping = aes(x = price, 
                     y = z,
                     shape = carat)) +
  geom_point(aes(col = carat))

#Not very bad
ggplot(diamonds %&gt;% head(100), 
       mapping = aes(x = price, y = z, shape = carat)) +
  geom_point(aes(col = carat))
```


---

## Viết code quá dài

- Mỗi dòng chỉ nên chứa tối 80 ký tự để có thể in ra/hiển thị trên markdown dễ dàng 

- Sử dụng chức năng format tự động trong RStudio (`Ctrl + Shift + A`)


```r
#Good
iris %&gt;%
  group_by(Species) %&gt;%
  summarise(
    Sepal.Length = mean(Sepal.Length),
    Sepal.Width = mean(Sepal.Width),
    Species = n_distinct(Species)
  )

#Not very bad
iris %&gt;% group_by(Species) %&gt;%
  summarise(Sepal.Length = mean(Sepal.Length),
            Sepal.Width = mean(Sepal.Width),
            Species = n_distinct(Species))
```

---

## Dấu gán

- Sử dụng `&lt;-` thay vì `=`


```r
# Good
x &lt;- 2

# Bad
x = 2
```

---

## Quotes

Dùng dấu ngoặc kép `"`, không dùng dâu ngoặc đơn `'`. Chỉ dùng dấu `'` trong trường hợp có hai phần lồng nhau (tương tự như string &amp; quote trong SQL)


```r
ggplot(diamonds, mapping = aes(x = price)) +
  geom_histogram() +
  # Good
  labs(title = "`Shine bright like a diamond`",
  # Good
       x = "Diamond prices",
  # Bad
       y = 'Frequency')
```

---

## Tài liệu tham khảo

- Xem thêm hướng dẫn chi tiết tại [http://style.tidyverse.org/
](http://style.tidyverse.org/
)

---
class: inverse, middle, center

# Liên hệ

&lt;a href="mailto:hoangducanh89@gmail.com"&gt;&lt;i class="fa fa-paper-plane fa-fw"&gt;&lt;/i&gt;&amp;nbsp; hoangducanh89@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href="http://ranalytics.vn"&gt;&lt;i class="fa fa-link fa-fw"&gt;&lt;/i&gt;&amp;nbsp; http://ranalytics.vn&lt;/a&gt;&lt;br&gt;
&lt;a href="http://facebook.com/hoangducanh89"&gt;&lt;i class="fa fa-facebook fa-fw"&gt;&lt;/i&gt;&amp;nbsp; hoangducanh89&lt;/a&gt;&lt;br&gt;
&lt;a href="http://cslu.ohsu.edu"&gt;&lt;i class="fa fa-map-marker fa-fw"&gt;&lt;/i&gt;&amp;nbsp; 50, Nguyễn Phúc Lai, Hà Nội&lt;/a&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "xcode",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:10"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Bài 2: Import dữ liệu vào R &amp; một số chỉ số thống kê cơ bản</title>
    <meta charset="utf-8">
    <meta name="author" content="Hoàng Đức Anh" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/fa-svg-with-js.css" rel="stylesheet" />
    <script src="libs/font-awesome/js/fontawesome-all.min.js"></script>
    <script src="libs/font-awesome/js/fa-v4-shims.min.js"></script>
    <link rel="stylesheet" href="ranalytics.css" type="text/css" />
    <link rel="stylesheet" href="ranalytics-font.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Bài 2: Import dữ liệu vào R &amp; một số chỉ số thống kê cơ bản
### Hoàng Đức Anh
### July, 2018

---




layout: true
.footer[Ranalytics.vn]
.rectangle[]

---

## Nội dung

1. Giới thiệu mô hình phân tích dữ liệu hiện đại
2. Import dữ liệu với R
3. Một số chỉ số thống kê cơ bản
4. Biểu đồ cơ bản trong R
5. Q&amp;A

---

class: inverse, center, middle

# 1. Giới thiệu mô hình phân tích dữ liệu hiện đại

---

## Mô hình phân tích dữ liệu cơ bản (1)

--

![](img/modern-data-science.png)

---

## Mô hình phân tích dữ liệu cơ bản (2)

- Tính tự động hóa - các scipt được tự động và thực hiện theo trình tự

--

- Tính tái sử dụng - bất kỳ ai cũng có thể tái hiện hóa toàn bộ quá trình phân tích dữ liệu theo dạng project

--

- Khả năng trình bày - Output/insights/comments được lồng ghép


---

class: inverse, center, middle

# 2. Import dữ liệu với R

---

## Import file .txt

- Sử dụng hàm `read.table`

--


```r
data &lt;- read.table("data/example-mtcars.txt",
                   header = T,
                   sep = "\t")

head(data)
```

```
##               model  mpg cyl disp  hp drat    wt  qsec vs am gear carb
## 1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## 2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## 3        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## 4    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## 5 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## 6           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---

## Import file .csv

- Sử dụng hàm `read.csv`

--


```r
data &lt;- read.csv("data/example-mtcars.csv",
                   header = T)
head(data)
```

```
##               model  mpg cyl disp  hp drat    wt  qsec vs am gear carb
## 1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## 2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## 3        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## 4    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## 5 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## 6           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---

## Import file .xlsx

- Sử dụng hàm `read_excel` từ library `readxl`

--


```r
library(readxl)
data &lt;- read_excel("data/example-mtcars.xlsx")
head(data)
```

```
## # A tibble: 6 x 12
##   model    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mazda~  21.0    6.  160.  110.  3.90  2.62  16.5    0.    1.    4.    4.
## 2 Mazda~  21.0    6.  160.  110.  3.90  2.88  17.0    0.    1.    4.    4.
## 3 Datsu~  22.8    4.  108.   93.  3.85  2.32  18.6    1.    1.    4.    1.
## 4 Horne~  21.4    6.  258.  110.  3.08  3.22  19.4    1.    0.    3.    1.
## 5 Horne~  18.7    8.  360.  175.  3.15  3.44  17.0    0.    0.    3.    2.
## 6 Valia~  18.1    6.  225.  105.  2.76  3.46  20.2    1.    0.    3.    1.
```

---

## Làm việc với các cấu trúc dữ liệu khác

- Kết nối với SPSS file
- Kết nối với SAS file
- Kết nối với dữ liệu từ web
- Kết nối với database (SQLServer/Oracle/MySQL): Xem hướng dẫn tại [Ranalytics.vn](http://ranalytics.vn/blog/2018/06/19/2018-06-19-ket-noi-r-voi-sqlserver/)

---

## Lưu file định dạng .RDA

- Lưu file data thành định dạng `rda` của R


```r
#Lưu data mtcars thành mtcars.rda
save(mtcars, file = "data/mtcars.rda")
```

--


```r
# Load lại file
load("data/mtcars.rda")
head(mtcars)
```

```
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---

class: inverse, center, middle

# 3. Một số chỉ số thống kê cơ bản

---

## Các toán tử cơ bản

&amp;nbsp;

Dấu | Ký hiệu | Ví dụ
---|-----|-----
Bằng | `==` | `7==8`
Khác | `!=` | `7!=8`
Lớn hơn | `&gt;` | `a &gt; b`
Lớn hơn hoặc bằng | `&gt;=` | `a &gt;= b`
Nhỏ hơn | `&lt;` | `a &lt; b`
Nhỏ hơn hoặc bằng | `&lt;=` | `a &lt;= b`
Phép nhân | `*` | `7 * 8`

---

## Các chỉ số thống kê cơ bản (1)

- Các chỉ số thống kê với dữ liệu mtcars


```r
head(mtcars)
```

```
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---

## Các chỉ số thống kê cơ bản (2)

.pull-up[
- Giá trị trung bình:

`$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$`



```r
mean(mtcars$mpg)
```

```
## [1] 20.09062
```
]

--

.pull-down[
- Trung vị


```r
median(mtcars$mpg)
```

```
## [1] 19.2
```
]

--

**Lưu ý**: Giá trị trung bình != trung vị

---

## Các chỉ số thống kê cơ bản (3)

.pull-left[
- Giá trị nhỏ nhất

```r
min(mtcars$mpg)
```

```
## [1] 10.4
```
]

--

.pull-right[
- Giá trị lớn nhất

```r
max(mtcars$mpg)
```

```
## [1] 33.9
```
]

---

## Các chỉ số thống kê cơ bản (4)


.pull-left[
- Phần tư thứ nhất: 25% các quan sát có giá trị `mpg &lt;= 15.425` 


```r
quantile(mtcars$mpg, 0.25)
```

```
##    25% 
## 15.425
```
]

--

.pull-right[
- Phần tư thứ 3: 75% các quan sát có giá trị `mpg &lt;= 22.8` 


```r
quantile(mtcars$mpg, 0.75)
```

```
##  75% 
## 22.8
```
]

---

## Các chỉ số thống kê cơ bản (5)

- Với 1 biến


```r
summary(mtcars$mpg)
```

```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   10.40   15.43   19.20   20.09   22.80   33.90
```

---

## Các chỉ số thống kê cơ bản (6)

- Với nhiều biến

- Với cả data frame


```r
summary(mtcars[, 1:4])
```

```
##       mpg             cyl             disp             hp       
##  Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
##  1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
##  Median :19.20   Median :6.000   Median :196.3   Median :123.0  
##  Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
##  3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
##  Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0
```

---

## Các chỉ số thống kê cơ bản (7)

- Sử dụng hàm `::` để thay cho việc gọi library


```r
Hmisc::describe(mtcars$mpg)
```

```
## mtcars$mpg 
##       n missing  unique    Info    Mean     .05     .10     .25     .50 
##      32       0      25       1   20.09   12.00   14.34   15.43   19.20 
##     .75     .90     .95 
##   22.80   30.09   31.30 
## 
## lowest : 10.4 13.3 14.3 14.7 15.0, highest: 26.0 27.3 30.4 32.4 33.9
```

--


```r
library(Hmisc)
describe(as.factor(mtcars$gear))
```

```
## as.factor(mtcars$gear) 
##       n missing  unique 
##      32       0       3 
## 
## 3 (15, 47%), 4 (12, 38%), 5 (5, 16%)
```

---

## Bài tập

- Giải thích ý nghĩa kinh doanh của chỉ số dưới đây


```r
df &lt;- data.frame(income = seq(1000, 5000, by = 0.5))
quantile(df$income, c(0.1, 0.25, 0.5, 0.7, 0.9, 0.95))
```

```
##  10%  25%  50%  70%  90%  95% 
## 1400 2000 3000 3800 4600 4800
```

---

class: inverse, center, middle

# 4. Biểu đồ cơ bản trong R

---

## Histogram



```r
x &lt;- rnorm(1000,1,1)
hist(x, 
     col = "violet",
     main = "Histogram x")
```

![](lecture_2_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

---

## Density



```r
x &lt;- rnorm(1000,1,1)
plot(density(x),
     col = "violet",
     main = "Density x")
```

![](lecture_2_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;

---


## Boxplot


```r
x &lt;- rnorm(1000,1,1)
boxplot(x, 
     col = "violet")
```

![](lecture_2_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

---

class: inverse, center, middle

# 5. Q&amp;A

---

class: inverse, middle, center

# Liên hệ

&lt;a href="mailto:hoangducanh89@gmail.com"&gt;&lt;i class="fa fa-paper-plane fa-fw"&gt;&lt;/i&gt;&amp;nbsp; hoangducanh89@gmail.com&lt;/a&gt;&lt;br&gt;
&lt;a href="http://ranalytics.vn"&gt;&lt;i class="fa fa-link fa-fw"&gt;&lt;/i&gt;&amp;nbsp; http://ranalytics.vn&lt;/a&gt;&lt;br&gt;
&lt;a href="http://facebook.com/hoangducanh89"&gt;&lt;i class="fa fa-facebook fa-fw"&gt;&lt;/i&gt;&amp;nbsp; hoangducanh89&lt;/a&gt;&lt;br&gt;
&lt;a href="http://cslu.ohsu.edu"&gt;&lt;i class="fa fa-map-marker fa-fw"&gt;&lt;/i&gt;&amp;nbsp; 50, Nguyễn Phúc Lai, Hà Nội&lt;/a&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "xcode",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:10"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>

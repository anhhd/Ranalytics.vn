<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Phân tích dữ liệu thực tế với R</title>
  <meta name="description" content="A book example for a Chapman &amp; Hall book.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Phân tích dữ liệu thực tế với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book example for a Chapman &amp; Hall book." />
  <meta name="github-repo" content="yihui/bookdown-crc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Phân tích dữ liệu thực tế với R" />
  
  <meta name="twitter:description" content="A book example for a Chapman &amp; Hall book." />
  

<meta name="author" content="Hoàng Đức Anh">


<meta name="date" content="2018-09-24">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="khai-quat-v-hoc-may.html">
<link rel="next" href="feature-engineering.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phân tích dữ liệu thực tế với R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Lời mở đầu</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tai-sao-nen-oc-cun-sach-nay"><i class="fa fa-check"></i>Tại sao nên đọc cuốn sách này</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cu-truc-cua-sach"><i class="fa fa-check"></i>Cấu trúc của sách</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cac-phn-mm-uc-s-dung"><i class="fa fa-check"></i>Các phần mềm được sử dụng</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#li-cam-on"><i class="fa fa-check"></i>Lời cảm ơn</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="v-tac-gia.html"><a href="v-tac-gia.html"><i class="fa fa-check"></i>Về tác giả</a></li>
<li class="part"><span><b>I Các kiến thức cơ bản</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Khoa học dữ liệu và nghề phân tích dữ liệu</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#khoa-hoc-d-liu"><i class="fa fa-check"></i><b>1.1</b> Khoa học dữ liệu</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#tai-sao-phan-tich-d-liu-la-ngh-kho"><i class="fa fa-check"></i><b>1.2</b> Tại sao phân tích dữ liệu là nghề khó?</a></li>
</ul></li>
<li class="part"><span><b>II Ứng dụng thực tế</b></span></li>
<li class="chapter" data-level="2" data-path="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html"><a href="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html"><i class="fa fa-check"></i><b>2</b> Các phương pháp phân tích dữ liệu thực tế ứng dụng với R</a><ul>
<li class="chapter" data-level="2.1" data-path="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html"><a href="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html#phn-1"><i class="fa fa-check"></i><b>2.1</b> Phần 1</a></li>
<li class="chapter" data-level="2.2" data-path="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html"><a href="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html#phn-2"><i class="fa fa-check"></i><b>2.2</b> Phần 2</a></li>
<li class="chapter" data-level="2.3" data-path="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html"><a href="cac-phuong-phap-phan-tich-d-liu-thc-t-ng-dung-vi-r.html#phn-3"><i class="fa fa-check"></i><b>2.3</b> Phần 3</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><i class="fa fa-check"></i><b>3</b> Ngữ pháp của biến đổi dữ liệu với DPLYR</a><ul>
<li class="chapter" data-level="3.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#gii-thiu-v-pipe-operator"><i class="fa fa-check"></i><b>3.1</b> Giới thiệu về pipe operator</a></li>
<li class="chapter" data-level="3.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-co-ban-trong-dplyr"><i class="fa fa-check"></i><b>3.2</b> Các hàm cơ bản trong dplyr</a><ul>
<li class="chapter" data-level="3.2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-truy-vn-d-liu"><i class="fa fa-check"></i><b>3.2.1</b> Nhóm câu lệnh truy vấn dữ liệu</a></li>
<li class="chapter" data-level="3.2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-bin-i-d-liu"><i class="fa fa-check"></i><b>3.2.2</b> Nhóm câu lệnh biến đổi dữ liệu</a></li>
<li class="chapter" data-level="3.2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-ham-tng-hp-d-liu-vi-summarise"><i class="fa fa-check"></i><b>3.2.3</b> Nhóm hàm tổng hợp dữ liệu với <code>summarise</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-nang-cao-trong-dplyr"><i class="fa fa-check"></i><b>3.3</b> Các hàm nâng cao trong dplyr</a><ul>
<li class="chapter" data-level="3.3.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#iu-kin-phan-nhom-vi-case_when"><i class="fa fa-check"></i><b>3.3.1</b> Điều kiện phân nhóm với <code>case_when</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tao-them-bin-mi-theo-iu-kin-vi-mutate_if-mutate_at"><i class="fa fa-check"></i><b>3.3.2</b> Tạo thêm biến mới theo điều kiện với <code>mutate_if</code> &amp; <code>mutate_at</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tng-hp-d-liu-theo-iu-kin-vi-summarise_at-va-summarise_if"><i class="fa fa-check"></i><b>3.3.3</b> Tổng hợp dữ liệu theo điều kiện với <code>summarise_at</code> và <code>summarise_if</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html"><i class="fa fa-check"></i><b>4</b> Phân rã và xoay chiều dữ liệu</a><ul>
<li class="chapter" data-level="4.1" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#phan-ra-d-liu-thanh-dang-doc-vi-gather"><i class="fa fa-check"></i><b>4.1</b> Phân rã dữ liệu thành dạng dọc với <code>gather</code></a></li>
<li class="chapter" data-level="4.2" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#xoay-chiu-d-liu-vi-spread"><i class="fa fa-check"></i><b>4.2</b> Xoay chiều dữ liệu với <code>spread</code></a></li>
<li class="chapter" data-level="4.3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#tach-mt-bin-thanh-nhiu-bin-vi-separate"><i class="fa fa-check"></i><b>4.3</b> Tách một biến thành nhiều biến với <code>separate</code></a></li>
<li class="chapter" data-level="4.4" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#gp-nhiu-bin-thanh-mt-bin-vi-unite"><i class="fa fa-check"></i><b>4.4</b> Gộp nhiều biến thành một biến với <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html"><i class="fa fa-check"></i><b>5</b> Lập trình chức năng hàm với purrr</a><ul>
<li class="chapter" data-level="5.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#nhom-ham-map"><i class="fa fa-check"></i><b>5.1</b> Nhóm hàm map</a></li>
<li class="chapter" data-level="5.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#sa-i-gia-tri-vi-modify"><i class="fa fa-check"></i><b>5.2</b> Sửa đổi giá trị với <code>modify</code></a></li>
<li class="chapter" data-level="5.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#ng-dung"><i class="fa fa-check"></i><b>5.3</b> Ứng dụng</a><ul>
<li class="chapter" data-level="5.3.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#bin-i-d-liu-vi-modify-va-map_df"><i class="fa fa-check"></i><b>5.3.1</b> Biến đổi dữ liệu với <code>modify</code> và <code>map_df</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-nhom-khac-nhau-cung-luc"><i class="fa fa-check"></i><b>5.3.2</b> Phân tích nhiều nhóm khác nhau cùng lúc</a></li>
<li class="chapter" data-level="5.3.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-bin-trong-dataframe-cung-luc"><i class="fa fa-check"></i><b>5.3.3</b> Phân tích nhiều biến trong dataframe cùng lúc</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Machine Learning</b></span></li>
<li class="chapter" data-level="6" data-path="khai-quat-v-hoc-may.html"><a href="khai-quat-v-hoc-may.html"><i class="fa fa-check"></i><b>6</b> Khái quát về học máy</a><ul>
<li class="chapter" data-level="6.1" data-path="khai-quat-v-hoc-may.html"><a href="khai-quat-v-hoc-may.html#gii-thiu"><i class="fa fa-check"></i><b>6.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="6.2" data-path="khai-quat-v-hoc-may.html"><a href="khai-quat-v-hoc-may.html#quy-trinh-xay-dng-mo-hinh-d-bao"><i class="fa fa-check"></i><b>6.2</b> Quy trình xây dựng mô hình dự báo</a></li>
<li class="chapter" data-level="6.3" data-path="khai-quat-v-hoc-may.html"><a href="khai-quat-v-hoc-may.html#cac-nhom-thut-ng-cn-nh"><i class="fa fa-check"></i><b>6.3</b> Các nhóm thuật ngữ cần nhớ</a></li>
<li class="chapter" data-level="6.4" data-path="khai-quat-v-hoc-may.html"><a href="khai-quat-v-hoc-may.html#luu-y"><i class="fa fa-check"></i><b>6.4</b> Lưu ý</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html"><i class="fa fa-check"></i><b>7</b> Phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="7.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-khai-nim-co-ban"><i class="fa fa-check"></i><b>7.1</b> Các khái niệm cơ bản</a></li>
<li class="chapter" data-level="7.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cach-thc-hin-mo-hinh"><i class="fa fa-check"></i><b>7.2</b> Cách thực hiện mô hình</a></li>
<li class="chapter" data-level="7.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#ba-cau-hoi-khi-phan-tich-gio-hang"><i class="fa fa-check"></i><b>7.3</b> Ba câu hỏi khi phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="7.3.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-san-phm-nao-hay-uc-mua-cung-nhau"><i class="fa fa-check"></i><b>7.3.1</b> Các sản phẩm nào hay được mua cùng nhau</a></li>
<li class="chapter" data-level="7.3.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-a-thi-se-mua-san-phm-nao-tip-theo"><i class="fa fa-check"></i><b>7.3.2</b> Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</a></li>
<li class="chapter" data-level="7.3.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-gi-thi-se-mua-tip-san-phm-a"><i class="fa fa-check"></i><b>7.3.3</b> Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#uu-nhuc-im"><i class="fa fa-check"></i><b>7.4</b> Ưu nhược điểm</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>8</b> Feature Engineering</a><ul>
<li class="chapter" data-level="8.1" data-path="feature-engineering.html"><a href="feature-engineering.html#feature-engineering-cho-cac-bin-nhom"><i class="fa fa-check"></i><b>8.1</b> Feature engineering cho các biến nhóm</a><ul>
<li class="chapter" data-level="8.1.1" data-path="feature-engineering.html"><a href="feature-engineering.html#tao-d-liu-gia-dummy-data-cho-bin-khong-phan-bit-th-t"><i class="fa fa-check"></i><b>8.1.1</b> Tạo dữ liệu giả (dummy data) cho biến không phân biệt thứ tự</a></li>
<li class="chapter" data-level="8.1.2" data-path="feature-engineering.html"><a href="feature-engineering.html#d-liu-co-rt-nhiu-nhom"><i class="fa fa-check"></i><b>8.1.2</b> Dữ liệu có rất nhiều nhóm</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="feature-engineering.html"><a href="feature-engineering.html#cac-bin-lien-tuc"><i class="fa fa-check"></i><b>8.2</b> Các biến liên tục</a><ul>
<li class="chapter" data-level="8.2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#bin-i-11"><i class="fa fa-check"></i><b>8.2.1</b> Biến đổi 1:1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Chuỗi thời gian</b></span></li>
<li class="chapter" data-level="9" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html"><i class="fa fa-check"></i><b>9</b> Giới thiệu về chuỗi thời gian</a><ul>
<li class="chapter" data-level="9.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#thanh-phn-cua-chui-thi-gian"><i class="fa fa-check"></i><b>9.1</b> Thành phần của chuỗi thời gian</a></li>
</ul></li>
<li class="part"><span><b>V Case study</b></span></li>
<li class="chapter" data-level="10" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html"><i class="fa fa-check"></i><b>10</b> Trực quan hóa dữ liệu</a><ul>
<li class="chapter" data-level="10.1" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-phu-ban-hang-theo-tng-nhom"><i class="fa fa-check"></i><b>10.1</b> Xây dựng phễu bán hàng theo từng nhóm</a></li>
<li class="chapter" data-level="10.2" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#ve-biu--warterfall-cho-aciveinactive-users"><i class="fa fa-check"></i><b>10.2</b> Vẽ biểu đồ warterfall cho acive/inactive users</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="tai-liu-tham-khao.html"><a href="tai-liu-tham-khao.html"><i class="fa fa-check"></i>Tài liệu tham khảo</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phân tích dữ liệu thực tế với R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="phan-tich-gio-hang" class="section level1">
<h1><span class="header-section-number">Chương 7</span> Phân tích giỏ hàng</h1>
<p>Phân tích giỏ hàng là 1 phương pháp phân tích với mục đích là để tìm ra được tổ hợp các sản phẩm hay được khách hàng mua cùng nhau. Phân tích giỏ hàng là một nhánh của Frequent Pattern Mining (FPM) là kỹ thuật được dùng trong việc phân tích các hành vi lặp đi lặp lại giữa các yêu tố có liên hệ với nhau. FPM được sử dụng đặc biệt rộng rãi trong các ngành như ecommerce, banking, retail… giúp người bán có thể phân tích hành vi mua sắm của khách hàng. Phương pháp phân tích thương được dùng nhất là sử dụng thuật toán<code>apriori</code></p>
<div id="cac-khai-nim-co-ban" class="section level2">
<h2><span class="header-section-number">7.1</span> Các khái niệm cơ bản</h2>
<p>Trong phân tích giỏ hàng, chỉ có 5 thuật ngữ đơn giản ta cần phải nhớ là <code>transaction</code>, <code>rule</code>, <code>support</code>, <code>confidence</code> và <code>lift</code></p>
<ul>
<li><strong>Item</strong>: Sản phẩm chứa trong giỏ hàng</li>
<li><strong>Transaction</strong>: Giao dịch là một hoặc một nhóm các sản phẩm được mua khi khách hàng thực hiện <em>trong cùng</em> một giao dịch</li>
<li><strong>Rule</strong>: Rule là một quy tắc thể hiện mối quan hệ giữa các sản phẩm có trong cùng một giỏ hàng, có dạng <code>nếu A, thì B</code>.</li>
</ul>
<p><span class="math display">\[\left \{{i_{1},i_{2},...}\right \} =&gt; {i_{k}}\]</span></p>
<p>Ví dụ:</p>
<blockquote>
<p>{Bánh mỳ} =&gt; {Sữa}: Nếu khách hàng mua bánh mỳ thì khách hàng sẽ mua thêm sữa</p>
</blockquote>
<ul>
<li><strong>Support</strong>：Tần suất (dưới dạng phần trăm) xuất hiện của các quy tắc trong tổng số các giao dịch.</li>
</ul>
<blockquote>
<p>Ví dụ: Một cửa hàng trong tháng 1 có 100 khách hàng, mỗi khách hàng thực hiện một giao dịch. Trong đó 50 khách hàng mua sản phẩm A, 75 khách hàng mua sản phẩm B, và 25 khách hàng mua cả sản phẩm A và B
- Support(sản phẩm A) = 50%
- Support(Sản phẩm A, sản phẩm B) = 25%</p>
</blockquote>
<ul>
<li><strong>Confidence</strong>: Cơ hội mua sản phẩm tiếp theo trong hành vi giao dịch của khác hàng.</li>
</ul>
<p><span class="math display">\[Confidence (i_{m} =&gt; i_{n}) = \frac{support(i_{m}\frown i_{n})}{support (i_{m})}\]</span>
&gt; Ví dụ: Confidence (sản phẩm A , sản phẩm B) = 25/50 = 50%
- Tức là nếu 1 người mua sản phẩm A, thì xác suất họ cũng mua sản phẩm B là 50%</p>
<ul>
<li>Lift: Nếu khách hàng mua sản phẩm A thì khả năng họ mua sản phẩm B sẽ tăng lên bao nhiêu %
<span class="math display">\[Lift(i_{m} =&gt; i_{n}) = \frac{support(i_{m}\frown i_{n})}{support(i_{m}) * support (i_{n})} = \frac{Confidence (i_{m} =&gt; i_{n})}{support (i_{n})}\]</span>
<ul>
<li>Lift có thể cho 3 loại giá trị
<ul>
<li>Lift &gt; 1: tức là những sản phẩm ở vế trái của rule sẽ làm tăng khả năng xảy ra của những sản phẩm ở vế phải của rule (2 sản phẩm bổ trợ). Ví dụ, mua bia sẽ mua thêm lạc.</li>
<li>Lift &lt; 1: tức là những sản phẩm ở vế trái của rule sẽ làm giảm khả năng xảy ra của những sản phẩm ở vế phải của rule ( 2 sản phẩm thay thế được cho nhau). Ví dụ, mua bia sẽ không mua thêm cafe.</li>
<li>Lift = 1: Các sản phẩm ở vế trái và vế phải xuất hiện độc lập với nhau về mặt thống kê, ta không thể đưa ra kết luận về tương quan giữa các sản phẩm.</li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="cach-thc-hin-mo-hinh" class="section level2">
<h2><span class="header-section-number">7.2</span> Cách thực hiện mô hình</h2>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb162-2" data-line-number="2"><span class="kw">library</span>(arules)</a>
<a class="sourceLine" id="cb162-3" data-line-number="3"><span class="kw">library</span>(arulesViz)</a>
<a class="sourceLine" id="cb162-4" data-line-number="4"><span class="kw">data</span>(<span class="st">&quot;Groceries&quot;</span>)</a></code></pre></div>
<p>Dữ liệu <code>Groceries</code> chứa gần 10,000 giao dịch với hơn 160 sản phẩm khác nhau. Ta có thể xem chi tiết dưới đây.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="co"># Thống kê giao dịch</span></a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="kw">summary</span>(Groceries)</a></code></pre></div>
<pre><code>## transactions as itemMatrix in sparse format with
##  9835 rows (elements/itemsets/transactions) and
##  169 columns (items) and a density of 0.02609 
## 
## most frequent items:
##       whole milk other vegetables       rolls/buns 
##             2513             1903             1809 
##             soda           yogurt          (Other) 
##             1715             1372            34055 
## 
## element (itemset/transaction) length distribution:
## sizes
##    1    2    3    4    5    6    7    8    9   10   11 
## 2159 1643 1299 1005  855  645  545  438  350  246  182 
##   12   13   14   15   16   17   18   19   20   21   22 
##  117   78   77   55   46   29   14   14    9   11    4 
##   23   24   26   27   28   29   32 
##    6    1    1    1    1    3    1 
## 
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    2.00    3.00    4.41    6.00   32.00 
## 
## includes extended item information - examples:
##        labels  level2           level1
## 1 frankfurter sausage meat and sausage
## 2     sausage sausage meat and sausage
## 3  liver loaf sausage meat and sausage</code></pre>
<p><strong>Lưu ý</strong>: Dữ liệu phục vụ phân tích giỏ hàng không phải là dữ liệu dạng dataframe thông thường mà được cấu trúc định dạng <code>transaction</code>.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="co"># Sử dụng dữ liệu groceries</span></a>
<a class="sourceLine" id="cb165-2" data-line-number="2"><span class="kw">class</span>(Groceries)</a></code></pre></div>
<pre><code>## [1] &quot;transactions&quot;
## attr(,&quot;package&quot;)
## [1] &quot;arules&quot;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1"><span class="kw">str</span>(Groceries)</a></code></pre></div>
<pre><code>## Formal class &#39;transactions&#39; [package &quot;arules&quot;] with 3 slots
##   ..@ data       :Formal class &#39;ngCMatrix&#39; [package &quot;Matrix&quot;] with 5 slots
##   .. .. ..@ i       : int [1:43367] 13 60 69 78 14 29 98 24 15 29 ...
##   .. .. ..@ p       : int [1:9836] 0 4 7 8 12 16 21 22 27 28 ...
##   .. .. ..@ Dim     : int [1:2] 169 9835
##   .. .. ..@ Dimnames:List of 2
##   .. .. .. ..$ : NULL
##   .. .. .. ..$ : NULL
##   .. .. ..@ factors : list()
##   ..@ itemInfo   :&#39;data.frame&#39;:  169 obs. of  3 variables:
##   .. ..$ labels: chr [1:169] &quot;frankfurter&quot; &quot;sausage&quot; &quot;liver loaf&quot; &quot;ham&quot; ...
##   .. ..$ level2: Factor w/ 55 levels &quot;baby food&quot;,&quot;bags&quot;,..: 44 44 44 44 44 44 44 42 42 41 ...
##   .. ..$ level1: Factor w/ 10 levels &quot;canned food&quot;,..: 6 6 6 6 6 6 6 6 6 6 ...
##   ..@ itemsetInfo:&#39;data.frame&#39;:  0 obs. of  0 variables</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="co"># Xem 5 giao dịch đầu tiên</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2">Groceries[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>] <span class="op">%&gt;%</span><span class="st"> </span>inspect</a></code></pre></div>
<pre><code>##   items                     
## 1 {citrus fruit,            
##    semi-finished bread,     
##    margarine,               
##    ready soups}             
## 2 {tropical fruit,          
##    yogurt,                  
##    coffee}                  
## 3 {whole milk}              
## 4 {pip fruit,               
##    yogurt,                  
##    cream cheese ,           
##    meat spreads}            
## 5 {other vegetables,        
##    whole milk,              
##    condensed milk,          
##    long life bakery product}</code></pre>
<p>Trong thực tế, khi triển khai phân tích, việc đầu tiên ta cần làm là biến đổi từ định dạng dataframe sang định dạng <code>transactions</code>. Ta có thể biến đổi định dạng của dataframe về <code>transactions</code> với hàm <code>as</code>.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb171-2" data-line-number="2">  <span class="dt">prod_1 =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>as.factor,</a>
<a class="sourceLine" id="cb171-3" data-line-number="3">  <span class="dt">prod_2 =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>as.factor,</a>
<a class="sourceLine" id="cb171-4" data-line-number="4">  <span class="dt">prod_3 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span>as.factor</a>
<a class="sourceLine" id="cb171-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb171-6" data-line-number="6">df</a></code></pre></div>
<pre><code>##   prod_1 prod_2 prod_3
## 1      1      0      1
## 2      0      0      0
## 3      1      1      0</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1"><span class="kw">as</span>(df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="dv">1</span>), <span class="st">&quot;transactions&quot;</span>)</a></code></pre></div>
<pre><code>## transactions in sparse format with
##  3 transactions (rows) and
##  4 items (columns)</code></pre>
<p>Phân tích khám phá nhanh các sản phẩm được mua nhiều nhất.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="co"># Vẽ barchart đơn giản về các item phổ biến nhất</span></a>
<a class="sourceLine" id="cb175-2" data-line-number="2"><span class="kw">itemFrequencyPlot</span>(Groceries, </a>
<a class="sourceLine" id="cb175-3" data-line-number="3">                  <span class="dt">type =</span> <span class="st">&quot;absolute&quot;</span>, </a>
<a class="sourceLine" id="cb175-4" data-line-number="4">                  <span class="dt">topN =</span> <span class="dv">20</span>, <span class="dt">decreasing =</span> T)</a></code></pre></div>
<p><img src="bookdown_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
</div>
<div id="ba-cau-hoi-khi-phan-tich-gio-hang" class="section level2">
<h2><span class="header-section-number">7.3</span> Ba câu hỏi khi phân tích giỏ hàng</h2>
<p>Khi sử dụng kỹ thuật phân tích giỏ hàng, có 3 câu hỏi thường gặp về mặt kinh doanh cần phải trả lời là:</p>
<ul>
<li>Các sản phẩm nào hay được mua cùng nhau?</li>
<li>Nếu khách hàng mua sản phẩm A rồi thì sẽ hay mua tiếp sản phẩm nào?</li>
<li>Khách hàng nếu mua sản phẩm B thì trước đấy hay mua sản phẩm nào?</li>
</ul>
<div id="cac-san-phm-nao-hay-uc-mua-cung-nhau" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Các sản phẩm nào hay được mua cùng nhau</h3>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1">rules &lt;-<span class="st"> </span><span class="kw">apriori</span>(Groceries, </a>
<a class="sourceLine" id="cb176-2" data-line-number="2">                 <span class="dt">parameter =</span> <span class="kw">list</span>(<span class="dt">supp =</span> <span class="fl">0.001</span>, </a>
<a class="sourceLine" id="cb176-3" data-line-number="3">                            <span class="co"># support &gt;= 0.1% </span></a>
<a class="sourceLine" id="cb176-4" data-line-number="4">                                  <span class="dt">conf =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<pre><code>## Apriori
## 
## Parameter specification:
##  confidence minval smax arem  aval originalSupport
##         0.5    0.1    1 none FALSE            TRUE
##  support minlen maxlen target   ext
##    0.001      1     10  rules FALSE
## 
## Algorithmic control:
##  filter tree heap memopt load sort verbose
##     0.1 TRUE TRUE  FALSE TRUE    2    TRUE
## 
## Absolute minimum support count: 9 
## 
## set item appearances ...[0 item(s)] done [0.00s].
## set transactions ...[169 item(s), 9835 transaction(s)] done [0.00s].
## sorting and recoding items ... [157 item(s)] done [0.00s].
## creating transaction tree ... done [0.00s].
## checking subsets of size 1 2 3 4 5 6 done [0.01s].
## writing ... [5668 rule(s)] done [0.00s].
## creating S4 object  ... done [0.00s].</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1">                            <span class="co"># confidence &gt;= 50%</span></a>
<a class="sourceLine" id="cb178-2" data-line-number="2"><span class="co"># Tổng hợp các rules</span></a>
<a class="sourceLine" id="cb178-3" data-line-number="3">rules <span class="op">%&gt;%</span><span class="st"> </span>summary</a></code></pre></div>
<pre><code>## set of 5668 rules
## 
## rule length distribution (lhs + rhs):sizes
##    2    3    4    5    6 
##   11 1461 3211  939   46 
## 
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.00    3.00    4.00    3.92    4.00    6.00 
## 
## summary of quality measures:
##     support          confidence         lift      
##  Min.   :0.00102   Min.   :0.500   Min.   : 1.96  
##  1st Qu.:0.00112   1st Qu.:0.545   1st Qu.: 2.46  
##  Median :0.00132   Median :0.600   Median : 2.90  
##  Mean   :0.00167   Mean   :0.625   Mean   : 3.26  
##  3rd Qu.:0.00173   3rd Qu.:0.684   3rd Qu.: 3.69  
##  Max.   :0.02227   Max.   :1.000   Max.   :19.00  
## 
## mining info:
##       data ntransactions support confidence
##  Groceries          9835   0.001        0.5</code></pre>
<p>Như vậy, khi khai phá dữ liệu của tập <code>Groceries</code>, ta có <code>5668</code> rules thỏa mãn hai điều kiện:</p>
<ul>
<li>Tần suất xuất hiện đạt ít nhất 1%</li>
<li>Confidence của rule đạt ít nhất 50%</li>
</ul>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1"><span class="co"># Top 5 rules có lift cao nhất</span></a>
<a class="sourceLine" id="cb180-2" data-line-number="2">rules <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-3" data-line-number="3"><span class="st">  </span><span class="kw">sort</span>(<span class="dt">by =</span> <span class="st">&quot;lift&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-4" data-line-number="4"><span class="st">  </span><span class="kw">head</span>(<span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-5" data-line-number="5"><span class="st">  </span><span class="kw">as</span>(<span class="st">&quot;data.frame&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-6" data-line-number="6"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="dt">booktabs =</span> T)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">rules</th>
<th align="right">support</th>
<th align="right">confidence</th>
<th align="right">lift</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>53</td>
<td align="left">{Instant food products,soda} =&gt; {hamburger meat}</td>
<td align="right">0.0012</td>
<td align="right">0.6316</td>
<td align="right">19.00</td>
</tr>
<tr class="even">
<td>37</td>
<td align="left">{soda,popcorn} =&gt; {salty snack}</td>
<td align="right">0.0012</td>
<td align="right">0.6316</td>
<td align="right">16.70</td>
</tr>
<tr class="odd">
<td>444</td>
<td align="left">{flour,baking powder} =&gt; {sugar}</td>
<td align="right">0.0010</td>
<td align="right">0.5556</td>
<td align="right">16.41</td>
</tr>
<tr class="even">
<td>327</td>
<td align="left">{ham,processed cheese} =&gt; {white bread}</td>
<td align="right">0.0019</td>
<td align="right">0.6333</td>
<td align="right">15.05</td>
</tr>
<tr class="odd">
<td>55</td>
<td align="left">{whole milk,Instant food products} =&gt; {hamburger meat}</td>
<td align="right">0.0015</td>
<td align="right">0.5000</td>
<td align="right">15.04</td>
</tr>
</tbody>
</table>
<p><strong>Giải thích</strong>: Với rule đầu tiên là {Instant food products, soda}, ta có thể diễn giải như sau:</p>
<ul>
<li><code>support = 0.00122</code> - Tần xuất xuất hiện rules trong tổng số các transaction là 1.22%</li>
<li><code>confidence = 0.63157</code> - Nếu khách hàng mua đồ ăn nhanh (instant food products), 63.16% khách hàng sẽ mua thêm soda</li>
<li><code>lift = 18.99</code> - Mối quan hệ giữa hai sản phẩm đồ ăn nhanh và soda cao gần 19 lần so với thông thường (khi hai sản phẩm hoàn toàn độc lập với nhau)</li>
</ul>
<p><strong>Lưu ý</strong>: Khi phân tích, ta cần loại bỏ các rule thừa (redundant) khi phân tích dữ liệu. Một rule A được gọi là một rule thừa nếu tồn tại một rule con có confidence lớn hơn hoặc bằng rule A này. Rule B được gọi là rule con của rule A nếu có cùng RHS nhưng các sản phẩm trong rule B ít hơn rule A</p>
<p>Ví dụ: Với 2 rule</p>
<ul>
<li>Rule A với {a,b,c} → {d}</li>
<li>Rule B với {a,b} → {d}
Rule B với {a,b} → {d} được gọi là rule thừa nếu <span class="math inline">\(conf(A) &gt;= conf(B)\)</span></li>
</ul>
<p>Cách loại bỏ rule thừa trong R</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">subset.matrix &lt;-<span class="st"> </span><span class="kw">is.subset</span>(rules, rules)</a>
<a class="sourceLine" id="cb181-2" data-line-number="2">subset.matrix[<span class="kw">lower.tri</span>(subset.matrix, <span class="dt">diag =</span> T)] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb181-3" data-line-number="3">redundant &lt;-<span class="st"> </span><span class="kw">colSums</span>(subset.matrix, <span class="dt">na.rm =</span> T) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb181-4" data-line-number="4">rules.pruned &lt;-<span class="st"> </span>rules[<span class="op">!</span>redundant]</a>
<a class="sourceLine" id="cb181-5" data-line-number="5">rules &lt;-<span class="st"> </span>rules.pruned</a>
<a class="sourceLine" id="cb181-6" data-line-number="6">rules <span class="op">%&gt;%</span><span class="st"> </span>summary</a></code></pre></div>
<pre><code>## set of 1904 rules
## 
## rule length distribution (lhs + rhs):sizes
##    2    3    4    5 
##   11 1381  509    3 
## 
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.00    3.00    3.00    3.27    4.00    5.00 
## 
## summary of quality measures:
##     support          confidence         lift      
##  Min.   :0.00102   Min.   :0.500   Min.   : 1.96  
##  1st Qu.:0.00112   1st Qu.:0.524   1st Qu.: 2.21  
##  Median :0.00153   Median :0.556   Median : 2.68  
##  Mean   :0.00207   Mean   :0.578   Mean   : 2.91  
##  3rd Qu.:0.00224   3rd Qu.:0.613   3rd Qu.: 3.18  
##  Max.   :0.02227   Max.   :1.000   Max.   :19.00  
## 
## mining info:
##       data ntransactions support confidence
##  Groceries          9835   0.001        0.5</code></pre>
<p>Như vậy, sau khi lọc bỏ các rule thừa, số lượng rule trong dữ liệu giảm đi gần 3 lần xuống còn 1904 rules khác nhau. Ta có thể vẽ biểu đồ cho nhóm 10 rules có lift cao nhất như sau.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1">rules <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb183-2" data-line-number="2"><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb183-3" data-line-number="3"><span class="st">  </span><span class="kw">plot</span>(<span class="dt">method =</span> <span class="st">&quot;graph&quot;</span>) </a></code></pre></div>
<p><img src="bookdown_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
</div>
<div id="khach-hang-mua-san-phm-a-thi-se-mua-san-phm-nao-tip-theo" class="section level3">
<h3><span class="header-section-number">7.3.2</span> Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</h3>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">rules &lt;-<span class="st"> </span><span class="kw">apriori</span>(<span class="dt">data =</span> Groceries, </a>
<a class="sourceLine" id="cb184-2" data-line-number="2">                  <span class="dt">parameter =</span> <span class="kw">list</span>(<span class="dt">supp =</span> <span class="fl">0.001</span>, </a>
<a class="sourceLine" id="cb184-3" data-line-number="3">                                   <span class="dt">conf =</span> <span class="fl">0.15</span>,</a>
<a class="sourceLine" id="cb184-4" data-line-number="4">                                   <span class="dt">minlen =</span> <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb184-5" data-line-number="5">                  <span class="dt">appearance =</span> <span class="kw">list</span>(<span class="dt">default =</span> <span class="st">&quot;rhs&quot;</span>,</a>
<a class="sourceLine" id="cb184-6" data-line-number="6">                                    <span class="dt">lhs =</span> <span class="st">&quot;whole milk&quot;</span>), </a>
<a class="sourceLine" id="cb184-7" data-line-number="7">                  <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">verbose =</span> F)) </a>
<a class="sourceLine" id="cb184-8" data-line-number="8">rules <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb184-9" data-line-number="9"><span class="st">  </span><span class="kw">sort</span>(<span class="dt">by =</span> <span class="st">&quot;lift&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb184-10" data-line-number="10"><span class="st">  </span>head <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb184-11" data-line-number="11"><span class="st">  </span><span class="kw">as</span>(<span class="st">&quot;data.frame&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb184-12" data-line-number="12"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="dt">booktabs =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">rules</th>
<th align="right">support</th>
<th align="right">confidence</th>
<th align="right">lift</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2</td>
<td align="left">{whole milk} =&gt; {root vegetables}</td>
<td align="right">0.0489</td>
<td align="right">0.1914</td>
<td align="right">1.7560</td>
</tr>
<tr class="even">
<td>1</td>
<td align="left">{whole milk} =&gt; {tropical fruit}</td>
<td align="right">0.0423</td>
<td align="right">0.1655</td>
<td align="right">1.5776</td>
</tr>
<tr class="odd">
<td>4</td>
<td align="left">{whole milk} =&gt; {yogurt}</td>
<td align="right">0.0560</td>
<td align="right">0.2193</td>
<td align="right">1.5717</td>
</tr>
<tr class="even">
<td>6</td>
<td align="left">{whole milk} =&gt; {other vegetables}</td>
<td align="right">0.0748</td>
<td align="right">0.2929</td>
<td align="right">1.5136</td>
</tr>
<tr class="odd">
<td>5</td>
<td align="left">{whole milk} =&gt; {rolls/buns}</td>
<td align="right">0.0566</td>
<td align="right">0.2216</td>
<td align="right">1.2050</td>
</tr>
<tr class="even">
<td>3</td>
<td align="left">{whole milk} =&gt; {soda}</td>
<td align="right">0.0401</td>
<td align="right">0.1568</td>
<td align="right">0.8991</td>
</tr>
</tbody>
</table>
<p>Tham số <code>lhs</code> cho phép chúng ta lựa chọn điều kiện về sản phẩm được mua đầu tiên. Trong trường hợp này, ta thấy khách hàng mua sữa sẽ có xu hương mua thêm rau củ quả (root vegetables)</p>
</div>
<div id="khach-hang-mua-san-phm-gi-thi-se-mua-tip-san-phm-a" class="section level3">
<h3><span class="header-section-number">7.3.3</span> Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</h3>
<p>Tương tự với <code>lhs</code>, ta có thể sử dụng tham số <code>rhs</code> để tìm kiếm các khách hàng tiềm năng cho một sản phẩm đã xác định trước.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1">rules &lt;-<span class="st"> </span><span class="kw">apriori</span>(<span class="dt">data =</span> Groceries,</a>
<a class="sourceLine" id="cb185-2" data-line-number="2">                 <span class="dt">parameter =</span> <span class="kw">list</span>(<span class="dt">supp =</span> <span class="fl">0.001</span>, </a>
<a class="sourceLine" id="cb185-3" data-line-number="3">                                  <span class="dt">conf =</span> <span class="fl">0.08</span>), </a>
<a class="sourceLine" id="cb185-4" data-line-number="4">                 <span class="dt">appearance =</span> <span class="kw">list</span>(<span class="dt">default =</span> <span class="st">&quot;lhs&quot;</span>,</a>
<a class="sourceLine" id="cb185-5" data-line-number="5">                                   <span class="dt">rhs =</span> <span class="st">&quot;whole milk&quot;</span>), </a>
<a class="sourceLine" id="cb185-6" data-line-number="6">                 <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">verbose =</span> F))</a>
<a class="sourceLine" id="cb185-7" data-line-number="7">rules <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb185-8" data-line-number="8"><span class="st">  </span><span class="kw">sort</span>(<span class="dt">by =</span> <span class="st">&quot;lift&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb185-9" data-line-number="9"><span class="st">  </span>head <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb185-10" data-line-number="10"><span class="st">  </span><span class="kw">as</span>(<span class="st">&quot;data.frame&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb185-11" data-line-number="11"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="dt">booktabs =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">rules</th>
<th align="right">support</th>
<th align="right">confidence</th>
<th align="right">lift</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>196</td>
<td align="left">{rice,sugar} =&gt; {whole milk}</td>
<td align="right">0.0012</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
<tr class="even">
<td>323</td>
<td align="left">{canned fish,hygiene articles} =&gt; {whole milk}</td>
<td align="right">0.0011</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
<tr class="odd">
<td>1643</td>
<td align="left">{root vegetables,butter,rice} =&gt; {whole milk}</td>
<td align="right">0.0010</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
<tr class="even">
<td>1705</td>
<td align="left">{root vegetables,whipped/sour cream,flour} =&gt; {whole milk}</td>
<td align="right">0.0017</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
<tr class="odd">
<td>1716</td>
<td align="left">{butter,soft cheese,domestic eggs} =&gt; {whole milk}</td>
<td align="right">0.0010</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
<tr class="even">
<td>1985</td>
<td align="left">{pip fruit,butter,hygiene articles} =&gt; {whole milk}</td>
<td align="right">0.0010</td>
<td align="right">1</td>
<td align="right">3.914</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="uu-nhuc-im" class="section level2">
<h2><span class="header-section-number">7.4</span> Ưu nhược điểm</h2>
<p>Như vậy, ta vừa thực hiện xong việc ứng dụng phân tích giỏ hàng. Đây là phương pháp cực kỳ hữu hiệu trong việc tìm kiếm các mối quan hệ ẩn, chưa được khám phá giữa các biến. Phương pháp này cũng có các ưu và nhược điểm như sau.</p>
<p><strong>Ưu điểm</strong>:</p>
<ul>
<li>Thực hiện nhanh</li>
<li>Tính giải thích cao, trưc quan hóa</li>
<li>Có thể nhanh chóng tìm ra tập khách hàng tiềm năng theo điều kiện và không cần phải chia ra thành các tập train/test như các thuật toán machine learning khác.</li>
</ul>
<p><strong>Nhược điểm</strong>:</p>
<ul>
<li>Chỉ dùng cho các biến factor, không dùng được cho các biến dạng số như thu nhập, độ tuổi,… Nếu muốn đưa các biến này vào cần phải biến đổi thành dạng factor</li>
<li>Khi có quá nhiều nhóm, tốc độ tính toán có thể rất chậm và tràn bộ nhớ</li>
</ul>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="khai-quat-v-hoc-may.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="feature-engineering.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/54-basket-analysis.Rmd",
"text": "Edit"
},
"download": ["bookdown.pdf", "bookdown.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

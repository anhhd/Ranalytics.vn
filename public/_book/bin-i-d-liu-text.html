<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R</title>
  <meta name="description" content="Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R" />
  <meta name="generator" content="bookdown 0.11.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R" />
  <meta name="github-repo" content="yihui/bookdown-crc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R" />
  
  <meta name="twitter:description" content="Chương 7 Biến đổi dữ liệu text | Phân tích dữ liệu thực tế với R" />
  

<meta name="author" content="Hoàng Đức Anh" />


<meta name="date" content="2019-07-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lp-trinh-chc-nang-ham-vi-purrr.html">
<link rel="next" href="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phân tích dữ liệu thực tế với R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="li-m-u.html"><a href="li-m-u.html"><i class="fa fa-check"></i>Lời mở đầu</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Khoa học dữ liệu và nghề phân tích dữ liệu</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#khoa-hoc-d-liu-la-gi"><i class="fa fa-check"></i><b>1.1</b> Khoa học dữ liệu là gì</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#tai-sao-phan-tich-d-liu-la-ngh-kho"><i class="fa fa-check"></i><b>1.2</b> Tại sao phân tích dữ liệu là nghề khó?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#phan-loai-hoat-ng-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.3</b> Phân loại hoạt động phân tích dữ liệu</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#da-theo-cach-thc-tac-ng-n-khach-hang"><i class="fa fa-check"></i><b>1.3.1</b> Dựa theo cách thức tác động đến khách hàng</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#da-theo-c-tinh-cua-ngh-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.3.2</b> Dựa theo đặc tính của nghề phân tích dữ liệu</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#da-theo-chu-ky-cua-khach-hang-i-vi-san-phm"><i class="fa fa-check"></i><b>1.3.3</b> Dựa theo chu kỳ của khách hàng đối với sản phẩm</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#cach-xay-dng-nhom-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.4</b> Cách xây dựng nhóm phân tích dữ liệu</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#luu-y-khi-oc-tai-liu"><i class="fa fa-check"></i><b>1.5</b> Lưu ý khi đọc tài liệu</a></li>
</ul></li>
<li class="part"><span><b>I Kỹ thuật phân tích dữ liệu thực tế</b></span></li>
<li class="chapter" data-level="2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><i class="fa fa-check"></i><b>2</b> Ngữ pháp của biến đổi dữ liệu với DPLYR</a><ul>
<li class="chapter" data-level="2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#gii-thiu-v-pipe-operator"><i class="fa fa-check"></i><b>2.1</b> Giới thiệu về pipe operator</a></li>
<li class="chapter" data-level="2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-co-ban-trong-dplyr"><i class="fa fa-check"></i><b>2.2</b> Các hàm cơ bản trong dplyr</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-truy-vn-d-liu"><i class="fa fa-check"></i><b>2.2.1</b> Nhóm câu lệnh truy vấn dữ liệu</a></li>
<li class="chapter" data-level="2.2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-bin-i-d-liu"><i class="fa fa-check"></i><b>2.2.2</b> Nhóm câu lệnh biến đổi dữ liệu</a></li>
<li class="chapter" data-level="2.2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-ham-tng-hp-d-liu-vi-summarise"><i class="fa fa-check"></i><b>2.2.3</b> Nhóm hàm tổng hợp dữ liệu với <code>summarise</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-nang-cao-trong-dplyr"><i class="fa fa-check"></i><b>2.3</b> Các hàm nâng cao trong dplyr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#iu-kin-phan-nhom-vi-case_when"><i class="fa fa-check"></i><b>2.3.1</b> Điều kiện phân nhóm với <code>case_when</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tao-them-bin-mi-theo-iu-kin-vi-mutate_if-mutate_at"><i class="fa fa-check"></i><b>2.3.2</b> Tạo thêm biến mới theo điều kiện với <code>mutate_if</code> &amp; <code>mutate_at</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tng-hp-d-liu-theo-iu-kin-vi-summarise_at-va-summarise_if"><i class="fa fa-check"></i><b>2.3.3</b> Tổng hợp dữ liệu theo điều kiện với <code>summarise_at</code> và <code>summarise_if</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html"><i class="fa fa-check"></i><b>3</b> Phân rã và xoay chiều dữ liệu</a><ul>
<li class="chapter" data-level="3.1" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#phan-ra-d-liu-thanh-dang-doc-vi-gather"><i class="fa fa-check"></i><b>3.1</b> Phân rã dữ liệu thành dạng dọc với <code>gather</code></a></li>
<li class="chapter" data-level="3.2" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#xoay-chiu-d-liu-vi-spread"><i class="fa fa-check"></i><b>3.2</b> Xoay chiều dữ liệu với <code>spread</code></a></li>
<li class="chapter" data-level="3.3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#tach-mt-bin-thanh-nhiu-bin-vi-separate"><i class="fa fa-check"></i><b>3.3</b> Tách một biến thành nhiều biến với <code>separate</code></a></li>
<li class="chapter" data-level="3.4" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#gp-nhiu-bin-thanh-mt-bin-vi-unite"><i class="fa fa-check"></i><b>3.4</b> Gộp nhiều biến thành một biến với <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html"><i class="fa fa-check"></i><b>4</b> Các chỉ số thống kê mô tả cơ bản</a><ul>
<li class="chapter" data-level="4.1" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#correlation"><i class="fa fa-check"></i><b>4.1</b> Correlation</a></li>
<li class="chapter" data-level="4.2" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#anova"><i class="fa fa-check"></i><b>4.2</b> ANOVA</a></li>
<li class="chapter" data-level="4.3" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#kim-inh-quan-h-chi-binh-phuong"><i class="fa fa-check"></i><b>4.3</b> Kiểm định quan hệ Chi-bình phương</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html"><i class="fa fa-check"></i><b>5</b> Lập trình hàm</a><ul>
<li class="chapter" data-level="5.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#quotes-vs.-unquotes"><i class="fa fa-check"></i><b>5.1</b> <strong>Quotes</strong> vs. <strong>Unquotes</strong></a></li>
<li class="chapter" data-level="5.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hp-dung-quo_name"><i class="fa fa-check"></i><b>5.2</b> Trường hợp dùng <code>quo_name</code></a></li>
<li class="chapter" data-level="5.3" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hop-nhiu-bin"><i class="fa fa-check"></i><b>5.3</b> Trường họp nhiều biến</a></li>
<li class="chapter" data-level="5.4" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ng-dung"><i class="fa fa-check"></i><b>5.4</b> Ứng dụng</a><ul>
<li class="chapter" data-level="5.4.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ham-tinh-toan-tng-hp-nhiu-bin"><i class="fa fa-check"></i><b>5.4.1</b> Hàm tính toán tổng hợp nhiều biến</a></li>
<li class="chapter" data-level="5.4.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ve--thi-vi-ggplot2"><i class="fa fa-check"></i><b>5.4.2</b> Vẽ đồ thị với ggplot2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html"><i class="fa fa-check"></i><b>6</b> Lập trình chức năng hàm với purrr</a><ul>
<li class="chapter" data-level="6.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#nhom-ham-map"><i class="fa fa-check"></i><b>6.1</b> Nhóm hàm map</a></li>
<li class="chapter" data-level="6.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#sa-i-gia-tri-vi-modify"><i class="fa fa-check"></i><b>6.2</b> Sửa đổi giá trị với <code>modify</code></a></li>
<li class="chapter" data-level="6.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#tao-ham-nhanh-vi-as_mapper"><i class="fa fa-check"></i><b>6.3</b> Tạo hàm nhanh với <code>as_mapper</code></a></li>
<li class="chapter" data-level="6.4" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#xay-dng-chui-cac-ham-lien-tip-vi-compose"><i class="fa fa-check"></i><b>6.4</b> Xây dựng chuỗi các hàm liên tiếp với <code>compose</code></a></li>
<li class="chapter" data-level="6.5" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#ng-dung-1"><i class="fa fa-check"></i><b>6.5</b> Ứng dụng</a><ul>
<li class="chapter" data-level="6.5.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#bin-i-d-liu-vi-modify-va-map_df"><i class="fa fa-check"></i><b>6.5.1</b> Biến đổi dữ liệu với <code>modify</code> và <code>map_df</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-nhom-khac-nhau-cung-luc"><i class="fa fa-check"></i><b>6.5.2</b> Phân tích nhiều nhóm khác nhau cùng lúc</a></li>
<li class="chapter" data-level="6.5.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-bin-trong-dataframe-cung-luc"><i class="fa fa-check"></i><b>6.5.3</b> Phân tích nhiều biến trong dataframe cùng lúc</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html"><i class="fa fa-check"></i><b>7</b> Biến đổi dữ liệu text</a><ul>
<li class="chapter" data-level="7.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#gii-thiu"><i class="fa fa-check"></i><b>7.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="7.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#regular-expression"><i class="fa fa-check"></i><b>7.2</b> Regular expression</a><ul>
<li class="chapter" data-level="7.2.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#metadata"><i class="fa fa-check"></i><b>7.2.1</b> Metadata</a></li>
<li class="chapter" data-level="7.2.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#sequences"><i class="fa fa-check"></i><b>7.2.2</b> Sequences</a></li>
<li class="chapter" data-level="7.2.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#character-class"><i class="fa fa-check"></i><b>7.2.3</b> Character class</a></li>
<li class="chapter" data-level="7.2.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#posix-class"><i class="fa fa-check"></i><b>7.2.4</b> POSIX class</a></li>
<li class="chapter" data-level="7.2.5" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#quantifiers"><i class="fa fa-check"></i><b>7.2.5</b> Quantifiers</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#cac-vi-du-tng-hp"><i class="fa fa-check"></i><b>7.3</b> Các ví dụ tổng hợp</a><ul>
<li class="chapter" data-level="7.3.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-1"><i class="fa fa-check"></i><b>7.3.1</b> Ví dụ 1</a></li>
<li class="chapter" data-level="7.3.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-2"><i class="fa fa-check"></i><b>7.3.2</b> Ví dụ 2</a></li>
<li class="chapter" data-level="7.3.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-3"><i class="fa fa-check"></i><b>7.3.3</b> Ví dụ 3</a></li>
<li class="chapter" data-level="7.3.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-4"><i class="fa fa-check"></i><b>7.3.4</b> Ví dụ 4</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#tai-liu-tham-khao"><i class="fa fa-check"></i><b>7.4</b> Tài liệu tham khảo</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><a href="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><i class="fa fa-check"></i><b>8</b> Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="chapter" data-level="9" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html"><i class="fa fa-check"></i><b>9</b> Các nguyên lý dự báo</a><ul>
<li class="chapter" data-level="9.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#gii-thiu-1"><i class="fa fa-check"></i><b>9.1</b> Giới thiệu</a><ul>
<li class="chapter" data-level="9.1.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nhanh-trong-hoc-may-machine-learning"><i class="fa fa-check"></i><b>9.1.1</b> Các nhánh trong học máy (machine learning)</a></li>
<li class="chapter" data-level="9.1.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cach-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>9.1.2</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="9.1.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#s-dung-mo-hinh"><i class="fa fa-check"></i><b>9.1.3</b> Sử dụng mô hình</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nguyen-ly-trong-d-bao"><i class="fa fa-check"></i><b>9.2</b> Các nguyên lý trong dự báo</a><ul>
<li class="chapter" data-level="9.2.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#reducible-vs.-irreducible-error"><i class="fa fa-check"></i><b>9.2.1</b> Reducible vs. irreducible error</a></li>
<li class="chapter" data-level="9.2.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#kha-nang-giai-thich-va-kha-nang-d-bao"><i class="fa fa-check"></i><b>9.2.2</b> Khả năng giải thích và khả năng dự báo</a></li>
<li class="chapter" data-level="9.2.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#mo-hinh-co-tham-s-cho-truc-hoc-khong-co-tham-s-cho-truc-parametric-vs.-nonparametric"><i class="fa fa-check"></i><b>9.2.3</b> Mô hình có tham số cho trước hoặc không có tham số cho trước (Parametric vs. Nonparametric)</a></li>
<li class="chapter" data-level="9.2.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#nguyen-ly-ch-u"><i class="fa fa-check"></i><b>9.2.4</b> Nguyên lý chữ U</a></li>
<li class="chapter" data-level="9.2.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#bias-variance-trade-off"><i class="fa fa-check"></i><b>9.2.5</b> Bias Variance Trade-Off</a></li>
<li class="chapter" data-level="9.2.6" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#overfitting-regularization"><i class="fa fa-check"></i><b>9.2.6</b> Overfitting &amp; regularization</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#quy-trinh-xay-dng-mo-hinh-d-bao"><i class="fa fa-check"></i><b>9.3</b> Quy trình xây dựng mô hình dự báo</a></li>
<li class="chapter" data-level="9.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#ensemble-methods"><i class="fa fa-check"></i><b>9.4</b> Ensemble methods</a></li>
<li class="chapter" data-level="9.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#luu-y"><i class="fa fa-check"></i><b>9.5</b> Lưu ý</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html"><i class="fa fa-check"></i><b>10</b> Mô hình OLS</a><ul>
<li class="chapter" data-level="10.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#gii-thiu-2"><i class="fa fa-check"></i><b>10.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="10.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#xay-dng-mo-hinh-co-ban"><i class="fa fa-check"></i><b>10.2</b> Xây dựng mô hình cơ bản</a><ul>
<li class="chapter" data-level="10.2.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#mo-hinh-hi-quy-on-bin"><i class="fa fa-check"></i><b>10.2.1</b> Mô hình hồi quy đơn biến</a></li>
<li class="chapter" data-level="10.2.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#din-giai-mo-hinh"><i class="fa fa-check"></i><b>10.2.2</b> Diễn giải mô hình</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#anh-gia-cht-lung-mo-hinh"><i class="fa fa-check"></i><b>10.3</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="10.3.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#sai-s-cua-mo-hinh"><i class="fa fa-check"></i><b>10.3.1</b> Sai số của mô hình</a></li>
<li class="chapter" data-level="10.3.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#r-binh-phuong-r2"><i class="fa fa-check"></i><b>10.3.2</b> R bình phương <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="10.3.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#f-statistic"><i class="fa fa-check"></i><b>10.3.3</b> F statistic</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#d-bao"><i class="fa fa-check"></i><b>10.4</b> Dự báo</a></li>
<li class="chapter" data-level="10.5" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#thut-toan-ti-uu-vi-gradient-decent"><i class="fa fa-check"></i><b>10.5</b> Thuật toán tối ưu với gradient decent</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html"><i class="fa fa-check"></i><b>11</b> Mô hình hồi quy logistic</a><ul>
<li class="chapter" data-level="11.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cach-xay-dng-mo-hinh-1"><i class="fa fa-check"></i><b>11.1</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="11.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#vi-du-xay-dng-mo-hinh-on-gian"><i class="fa fa-check"></i><b>11.2</b> Ví dụ xây dựng mô hình đơn giản</a></li>
<li class="chapter" data-level="11.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cac-chi-s-cn-quan-tam-khac"><i class="fa fa-check"></i><b>11.3</b> Các chỉ số cần quan tâm khác</a></li>
<li class="chapter" data-level="11.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#anh-gia-cht-lung-mo-hinh-1"><i class="fa fa-check"></i><b>11.4</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="11.4.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#confusion-matrix"><i class="fa fa-check"></i><b>11.4.1</b> Confusion Matrix</a></li>
<li class="chapter" data-level="11.4.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#roc"><i class="fa fa-check"></i><b>11.4.2</b> ROC</a></li>
<li class="chapter" data-level="11.4.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#gain-va-lift"><i class="fa fa-check"></i><b>11.4.3</b> Gain và Lift</a></li>
<li class="chapter" data-level="11.4.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#kolmogorovsmirnov-statistics"><i class="fa fa-check"></i><b>11.4.4</b> Kolmogorov–Smirnov statistics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#thc-hanh"><i class="fa fa-check"></i><b>11.5</b> Thực hành</a><ul>
<li class="chapter" data-level="11.5.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#d-liu"><i class="fa fa-check"></i><b>11.5.1</b> Dữ liệu</a></li>
<li class="chapter" data-level="11.5.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-tp-d-liu-gc"><i class="fa fa-check"></i><b>11.5.2</b> Xây dựng mô hình trên tập dữ liệu gốc</a></li>
<li class="chapter" data-level="11.5.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-hai-tp-train-va-test"><i class="fa fa-check"></i><b>11.5.3</b> Xây dựng mô hình trên hai tập train và test</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-logistics-theo-machine-learning"><i class="fa fa-check"></i><b>11.6</b> Xây dựng mô hình Logistics theo Machine Learning</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html"><i class="fa fa-check"></i><b>12</b> Cây quyết định</a><ul>
<li class="chapter" data-level="12.1" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#gii-thiu-3"><i class="fa fa-check"></i><b>12.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="12.2" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#regression-trees"><i class="fa fa-check"></i><b>12.2</b> Regression Trees</a></li>
<li class="chapter" data-level="12.3" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#classification-trees"><i class="fa fa-check"></i><b>12.3</b> Classification Trees</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html"><i class="fa fa-check"></i><b>13</b> Bagging - Boosting và Random Forest</a><ul>
<li class="chapter" data-level="13.1" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#bagging"><i class="fa fa-check"></i><b>13.1</b> Bagging</a></li>
<li class="chapter" data-level="13.2" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#random-forests"><i class="fa fa-check"></i><b>13.2</b> Random Forests</a></li>
<li class="chapter" data-level="13.3" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#boosting"><i class="fa fa-check"></i><b>13.3</b> Boosting</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>14</b> Unsupervised learning</a></li>
<li class="chapter" data-level="15" data-path="k-means.html"><a href="k-means.html"><i class="fa fa-check"></i><b>15</b> k-means</a><ul>
<li class="chapter" data-level="15.1" data-path="k-means.html"><a href="k-means.html#gii-thiu-4"><i class="fa fa-check"></i><b>15.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="15.2" data-path="k-means.html"><a href="k-means.html#thut-toan"><i class="fa fa-check"></i><b>15.2</b> Thuật toán</a></li>
<li class="chapter" data-level="15.3" data-path="k-means.html"><a href="k-means.html#uu-nhuc-im-cua-k-means"><i class="fa fa-check"></i><b>15.3</b> Ưu nhược điểm của K-means</a></li>
<li class="chapter" data-level="15.4" data-path="k-means.html"><a href="k-means.html#thc-hanh-tren-r"><i class="fa fa-check"></i><b>15.4</b> Thực hành trên R</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html"><i class="fa fa-check"></i><b>16</b> Phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="16.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-khai-nim-co-ban"><i class="fa fa-check"></i><b>16.1</b> Các khái niệm cơ bản</a></li>
<li class="chapter" data-level="16.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cach-thc-hin-mo-hinh"><i class="fa fa-check"></i><b>16.2</b> Cách thực hiện mô hình</a></li>
<li class="chapter" data-level="16.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#ba-cau-hoi-khi-phan-tich-gio-hang"><i class="fa fa-check"></i><b>16.3</b> Ba câu hỏi khi phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="16.3.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-san-phm-nao-hay-uc-mua-cung-nhau"><i class="fa fa-check"></i><b>16.3.1</b> Các sản phẩm nào hay được mua cùng nhau</a></li>
<li class="chapter" data-level="16.3.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-a-thi-se-mua-san-phm-nao-tip-theo"><i class="fa fa-check"></i><b>16.3.2</b> Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</a></li>
<li class="chapter" data-level="16.3.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-gi-thi-se-mua-tip-san-phm-a"><i class="fa fa-check"></i><b>16.3.3</b> Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#uu-nhuc-im"><i class="fa fa-check"></i><b>16.4</b> Ưu nhược điểm</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>17</b> Feature Engineering</a><ul>
<li class="chapter" data-level="17.1" data-path="feature-engineering.html"><a href="feature-engineering.html#feature-engineering-cho-cac-bin-nhom"><i class="fa fa-check"></i><b>17.1</b> Feature engineering cho các biến nhóm</a><ul>
<li class="chapter" data-level="17.1.1" data-path="feature-engineering.html"><a href="feature-engineering.html#tao-d-liu-gia-dummy-data-cho-bin-khong-phan-bit-th-t"><i class="fa fa-check"></i><b>17.1.1</b> Tạo dữ liệu giả (dummy data) cho biến không phân biệt thứ tự</a></li>
<li class="chapter" data-level="17.1.2" data-path="feature-engineering.html"><a href="feature-engineering.html#d-liu-co-rt-nhiu-nhom"><i class="fa fa-check"></i><b>17.1.2</b> Dữ liệu có rất nhiều nhóm</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="feature-engineering.html"><a href="feature-engineering.html#cac-bin-lien-tuc"><i class="fa fa-check"></i><b>17.2</b> Các biến liên tục</a><ul>
<li class="chapter" data-level="17.2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#bin-i-11"><i class="fa fa-check"></i><b>17.2.1</b> Biến đổi 1:1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Chuỗi thời gian</b></span></li>
<li class="chapter" data-level="18" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html"><i class="fa fa-check"></i><b>18</b> Giới thiệu về chuỗi thời gian</a><ul>
<li class="chapter" data-level="18.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#thanh-phn-cua-chui-thi-gian"><i class="fa fa-check"></i><b>18.1</b> Thành phần của chuỗi thời gian</a></li>
<li class="chapter" data-level="18.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#d-liu-chui-thi-gian"><i class="fa fa-check"></i><b>18.2</b> Dữ liệu chuỗi thời gian</a></li>
<li class="chapter" data-level="18.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#smoothing"><i class="fa fa-check"></i><b>18.3</b> Smoothing</a></li>
<li class="chapter" data-level="18.4" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#seasonal-decomposition"><i class="fa fa-check"></i><b>18.4</b> Seasonal decomposition</a></li>
<li class="chapter" data-level="18.5" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#exponential-forecasting-model"><i class="fa fa-check"></i><b>18.5</b> Exponential Forecasting Model</a><ul>
<li class="chapter" data-level="18.5.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#single-exponential-model"><i class="fa fa-check"></i><b>18.5.1</b> Single Exponential Model</a></li>
<li class="chapter" data-level="18.5.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#hold-holt-winters-exponential-smoothing"><i class="fa fa-check"></i><b>18.5.2</b> Hold &amp; Holt-Winters exponential smoothing</a></li>
<li class="chapter" data-level="18.5.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#t-ng-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>18.5.3</b> Tự động xây dựng mô hình</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html"><i class="fa fa-check"></i><b>19</b> Mô hình ARIMA</a><ul>
<li class="chapter" data-level="19.1" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#chui-thi-gian-dng"><i class="fa fa-check"></i><b>19.1</b> Chuỗi thời gian dừng</a></li>
<li class="chapter" data-level="19.2" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#mo-hinh-arima-1"><i class="fa fa-check"></i><b>19.2</b> Mô hình ARIMA</a></li>
<li class="chapter" data-level="19.3" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#vi-du-vi-r"><i class="fa fa-check"></i><b>19.3</b> Ví dụ với R</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><i class="fa fa-check"></i><b>20</b> Phân tích chuỗi thời gian với tidyquant và timetk</a><ul>
<li class="chapter" data-level="20.1" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#ly-d-liu-vi-package-tidyquant"><i class="fa fa-check"></i><b>20.1</b> Lấy dữ liệu với package tidyquant</a></li>
<li class="chapter" data-level="20.2" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#trc-quan-hoa-vi-geom_ma"><i class="fa fa-check"></i><b>20.2</b> Trực quan hóa với <code>geom_ma</code></a></li>
<li class="chapter" data-level="20.3" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#chuyn-t-dataframe-thanh-xts"><i class="fa fa-check"></i><b>20.3</b> Chuyển từ dataframe thành xts</a></li>
</ul></li>
<li class="part"><span><b>III Case study</b></span></li>
<li class="chapter" data-level="21" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html"><i class="fa fa-check"></i><b>21</b> Trực quan hóa dữ liệu</a><ul>
<li class="chapter" data-level="21.1" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-phu-ban-hang-theo-tng-nhom"><i class="fa fa-check"></i><b>21.1</b> Xây dựng phễu bán hàng theo từng nhóm</a></li>
<li class="chapter" data-level="21.2" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#ve-biu--warterfall-cho-aciveinactive-users"><i class="fa fa-check"></i><b>21.2</b> Vẽ biểu đồ warterfall cho acive/inactive users</a></li>
<li class="chapter" data-level="21.3" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-biu--lollipop-chart"><i class="fa fa-check"></i><b>21.3</b> Xây dựng biểu đồ lollipop chart</a></li>
<li class="chapter" data-level="21.4" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#trc-quan-hoa-cac-phn-trung-lp-nhau"><i class="fa fa-check"></i><b>21.4</b> Trực quan hóa các phần trùng lặp nhau</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html"><i class="fa fa-check"></i><b>22</b> Các mẹo trong R</a><ul>
<li class="chapter" data-level="22.1" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#hin-thi-s-binh-thung"><i class="fa fa-check"></i><b>22.1</b> Hiển thị số bình thường</a></li>
<li class="chapter" data-level="22.2" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#export-d-liu-ra-excel"><i class="fa fa-check"></i><b>22.2</b> Export dữ liệu ra excel</a></li>
<li class="chapter" data-level="22.3" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#lam-vic-khi-proxy-bi-chn"><i class="fa fa-check"></i><b>22.3</b> Làm việc khi proxy bị chặn</a></li>
<li class="chapter" data-level="22.4" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#t-ng-render-ra-kt-qua-phan-tich"><i class="fa fa-check"></i><b>22.4</b> Tự động render ra kết quả phân tích</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Anh Hoang Duc</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phân tích dữ liệu thực tế với R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bin-i-d-liu-text" class="section level1">
<h1><span class="header-section-number">Chương 7</span> Biến đổi dữ liệu text</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="bin-i-d-liu-text.html#cb277-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb277-2"><a href="bin-i-d-liu-text.html#cb277-2"></a><span class="kw">library</span>(stringr)</span></code></pre>
<div id="gii-thiu" class="section level2">
<h2><span class="header-section-number">7.1</span> Giới thiệu</h2>
<p>Bên cạnh dữ liệu định dạng số, dữ liệu chứa rất nhiều định dạng character. Do đó, việc nắm vững các nguyên lý và biến đổi dữ liệu định dạng character trong R sẽ giúp rất nhiều trong việc xử lý dữ liệu.</p>
<p>Để tạo chuỗi string, trong R có 3 cách cơ bản:</p>
<ul>
<li>Dùng dấu ngoặc kép</li>
<li>Dùng dấu ngoặc đơn</li>
<li>Dùng hàm <strong>character</strong></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="bin-i-d-liu-text.html#cb278-1"></a>x &lt;-<span class="st"> &quot;Chú mèo nằm trên lan can&quot;</span></span>
<span id="cb278-2"><a href="bin-i-d-liu-text.html#cb278-2"></a>y &lt;-<span class="st"> &#39;Chú mèo nằm trên lan can&#39;</span></span></code></pre>
<p><strong>Lưu ý</strong>: Ta có thể để dấu ngoặc đơn hoặc ngoặc kép trong character như sau:</p>
<ul>
<li>Ngoặc đơn trong ngoặc kép <em>hoặc</em></li>
<li>Ngoặc kép trong ngoặc đơn</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="bin-i-d-liu-text.html#cb279-1"></a>(x &lt;-<span class="st"> &quot;This is &#39;MY&#39; apple&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;This is &#39;MY&#39; apple&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="bin-i-d-liu-text.html#cb281-1"></a>(y &lt;-<span class="st">  &#39;This is &quot;HIS&quot; orange&#39;</span>)</span></code></pre>
<pre><code>## [1] &quot;This is \&quot;HIS\&quot; orange&quot;</code></pre>
<p><strong>Lưu ý</strong>: <strong>Empty string</strong> là chuỗi không có ký tự, được viết <strong>""</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="bin-i-d-liu-text.html#cb283-1"></a>a &lt;-<span class="st"> &quot;&quot;</span></span>
<span id="cb283-2"><a href="bin-i-d-liu-text.html#cb283-2"></a>a</span></code></pre>
<pre><code>## [1] &quot;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="bin-i-d-liu-text.html#cb285-1"></a>a <span class="op">%&gt;%</span><span class="st"> </span>class</span></code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<ul>
<li><code>paste</code> và <code>paste0</code>: Đây là hai hàm cơ bản cho phép ghép các chuỗi lại với nhau</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="bin-i-d-liu-text.html#cb287-1"></a><span class="co">#Hàm paste mặc định có khoảng cách giữa các object</span></span>
<span id="cb287-2"><a href="bin-i-d-liu-text.html#cb287-2"></a><span class="kw">paste</span>(<span class="st">&quot;I love&quot;</span>, pi)</span></code></pre>
<pre><code>## [1] &quot;I love 3.14159265358979&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="bin-i-d-liu-text.html#cb289-1"></a><span class="co">#Hàm paste0 không có khoảng cách</span></span>
<span id="cb289-2"><a href="bin-i-d-liu-text.html#cb289-2"></a><span class="kw">paste0</span>(<span class="st">&quot;I love&quot;</span>, pi)</span></code></pre>
<pre><code>## [1] &quot;I love3.14159265358979&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="bin-i-d-liu-text.html#cb291-1"></a><span class="co">#Paste có sep</span></span>
<span id="cb291-2"><a href="bin-i-d-liu-text.html#cb291-2"></a><span class="kw">paste</span>(<span class="st">&quot;I love&quot;</span>, pi, <span class="dt">sep =</span> <span class="st">&quot;___&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;I love___3.14159265358979&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="bin-i-d-liu-text.html#cb293-1"></a><span class="co">#Paste khi có length khác nhau</span></span>
<span id="cb293-2"><a href="bin-i-d-liu-text.html#cb293-2"></a><span class="kw">paste</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;1a&quot; &quot;2a&quot; &quot;3a&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="bin-i-d-liu-text.html#cb295-1"></a><span class="co">#Paste không có collapse</span></span>
<span id="cb295-2"><a href="bin-i-d-liu-text.html#cb295-2"></a><span class="kw">paste</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;1a2a3a&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="bin-i-d-liu-text.html#cb297-1"></a><span class="co">#Khi paste giá trị NA, R biến NA thành string</span></span>
<span id="cb297-2"><a href="bin-i-d-liu-text.html#cb297-2"></a><span class="kw">paste</span>(<span class="st">&quot;abc &quot;</span>, <span class="ot">NA</span>)</span></code></pre>
<pre><code>## [1] &quot;abc  NA&quot;</code></pre>
<ul>
<li><code>toString</code> cho phép biến đổi thành một vector thành chuối</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="bin-i-d-liu-text.html#cb299-1"></a>a &lt;-<span class="st"> </span><span class="kw">c</span>(pi, <span class="dv">19</span>)</span>
<span id="cb299-2"><a href="bin-i-d-liu-text.html#cb299-2"></a>a</span></code></pre>
<pre><code>## [1]  3.141593 19.000000</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="bin-i-d-liu-text.html#cb301-1"></a>a <span class="op">%&gt;%</span><span class="st"> </span>toString</span></code></pre>
<pre><code>## [1] &quot;3.14159265358979, 19&quot;</code></pre>
<ul>
<li>Các hàm <code>toupper</code>, <code>tolower</code>, <code>casefold</code> cho phép biến đổi chuỗi thành các dạng in hoa và in thường</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="bin-i-d-liu-text.html#cb303-1"></a><span class="co">#Chuyển sang lower</span></span>
<span id="cb303-2"><a href="bin-i-d-liu-text.html#cb303-2"></a><span class="kw">tolower</span>(<span class="kw">c</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>, <span class="st">&quot;ABCDE&quot;</span>))</span></code></pre>
<pre><code>## [1] &quot;all characters in lower case&quot; &quot;abcde&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="bin-i-d-liu-text.html#cb305-1"></a><span class="co">#Chuyển sang upper</span></span>
<span id="cb305-2"><a href="bin-i-d-liu-text.html#cb305-2"></a><span class="kw">toupper</span>(<span class="kw">c</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>, <span class="st">&quot;ABCDE&quot;</span>))</span></code></pre>
<pre><code>## [1] &quot;ALL CHARACTERS IN LOWER CASE&quot; &quot;ABCDE&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="bin-i-d-liu-text.html#cb307-1"></a><span class="co">#Sử dụng với case fold</span></span>
<span id="cb307-2"><a href="bin-i-d-liu-text.html#cb307-2"></a><span class="kw">casefold</span>(<span class="kw">c</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>, <span class="st">&quot;ABCDE&quot;</span>))</span></code></pre>
<pre><code>## [1] &quot;all characters in lower case&quot; &quot;abcde&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="bin-i-d-liu-text.html#cb309-1"></a><span class="kw">casefold</span>(<span class="kw">c</span>(<span class="st">&quot;aLL ChaRacterS in LoweR caSe&quot;</span>, <span class="st">&quot;ABCDE&quot;</span>), <span class="dt">upper =</span> T)</span></code></pre>
<pre><code>## [1] &quot;ALL CHARACTERS IN LOWER CASE&quot; &quot;ABCDE&quot;</code></pre>
<ul>
<li><strong>str_c</strong>: Tương tự như paste, sử dụng <code>""</code> là ký tự phân tách chuỗi mặc định</li>
<li><strong>str_length</strong>: Kiểm tra độ dài của ký tự</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="bin-i-d-liu-text.html#cb311-1"></a><span class="kw">library</span>(stringr)</span>
<span id="cb311-2"><a href="bin-i-d-liu-text.html#cb311-2"></a><span class="kw">str_c</span>(<span class="st">&quot;Ola&quot;</span>, <span class="st">&quot;ede&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Olaede&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="bin-i-d-liu-text.html#cb313-1"></a><span class="kw">str_c</span>(<span class="st">&quot;Ola&quot;</span>, <span class="st">&quot;ede&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Ola_ede&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="bin-i-d-liu-text.html#cb315-1"></a><span class="kw">c</span>(<span class="st">&quot;olala&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_length</span>()</span></code></pre>
<pre><code>## [1] 5</code></pre>
<ul>
<li><strong>str_sub</strong>: Lấy chuỗi con trong 1 chuỗi</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="bin-i-d-liu-text.html#cb317-1"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;English&quot;</span>, <span class="st">&quot;Polish&quot;</span>, <span class="st">&quot;Other language&quot;</span>)</span>
<span id="cb317-2"><a href="bin-i-d-liu-text.html#cb317-2"></a><span class="co">#Lấy 2 ký tự đầu tiên</span></span>
<span id="cb317-3"><a href="bin-i-d-liu-text.html#cb317-3"></a><span class="kw">str_sub</span>(x, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="dv">2</span>)</span></code></pre>
<pre><code>## [1] &quot;En&quot; &quot;Po&quot; &quot;Ot&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="bin-i-d-liu-text.html#cb319-1"></a><span class="co">#Lấy 2 ký tự cuối cùng</span></span>
<span id="cb319-2"><a href="bin-i-d-liu-text.html#cb319-2"></a><span class="kw">str_sub</span>(x, <span class="dt">start =</span> <span class="dv">-2</span>, <span class="dt">end =</span> <span class="dv">-1</span>)</span></code></pre>
<pre><code>## [1] &quot;sh&quot; &quot;sh&quot; &quot;ge&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="bin-i-d-liu-text.html#cb321-1"></a><span class="co">#Sử dụng str_sub để thay thế</span></span>
<span id="cb321-2"><a href="bin-i-d-liu-text.html#cb321-2"></a><span class="kw">str_sub</span>(x, <span class="dt">start =</span> <span class="dv">-2</span>, <span class="dt">end =</span> <span class="dv">-1</span>) &lt;-<span class="st"> </span><span class="kw">str_sub</span>(x, <span class="dt">start =</span> <span class="dv">-2</span>, <span class="dt">end =</span> <span class="dv">-1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">toupper</span>()</span>
<span id="cb321-3"><a href="bin-i-d-liu-text.html#cb321-3"></a>x</span></code></pre>
<pre><code>## [1] &quot;EngliSH&quot;        &quot;PoliSH&quot;         &quot;Other languaGE&quot;</code></pre>
<ul>
<li><strong>str_wrap</strong>: Wrap ký tự - hàm này rất hữu dụng khi sử dụng tên trong biểu đồ</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="bin-i-d-liu-text.html#cb323-1"></a>some_quote =<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb323-2"><a href="bin-i-d-liu-text.html#cb323-2"></a>  <span class="st">&quot;I may not have gone&quot;</span>,</span>
<span id="cb323-3"><a href="bin-i-d-liu-text.html#cb323-3"></a>  <span class="st">&quot;where I intended to go,&quot;</span>,</span>
<span id="cb323-4"><a href="bin-i-d-liu-text.html#cb323-4"></a>  <span class="st">&quot;but I think I have ended up&quot;</span>,</span>
<span id="cb323-5"><a href="bin-i-d-liu-text.html#cb323-5"></a>  <span class="st">&quot;where I needed to be&quot;</span></span>
<span id="cb323-6"><a href="bin-i-d-liu-text.html#cb323-6"></a>  )</span>
<span id="cb323-7"><a href="bin-i-d-liu-text.html#cb323-7"></a></span>
<span id="cb323-8"><a href="bin-i-d-liu-text.html#cb323-8"></a>some_quote &lt;-<span class="st"> </span><span class="kw">str_c</span>(some_quote)</span>
<span id="cb323-9"><a href="bin-i-d-liu-text.html#cb323-9"></a>some_quote  </span></code></pre>
<pre><code>## [1] &quot;I may not have gone&quot;         &quot;where I intended to go,&quot;    
## [3] &quot;but I think I have ended up&quot; &quot;where I needed to be&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="bin-i-d-liu-text.html#cb325-1"></a><span class="kw">str_wrap</span>(some_quote, <span class="dt">width =</span> <span class="dv">30</span>, <span class="dt">indent =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span>cat</span></code></pre>
<pre><code>##   I may not have gone   where I intended to go,   but I think I have ended up   where I needed to be</code></pre>
<p><strong>Lưu ý</strong>: Khi làm việc với chuỗi, hàm <code>cat</code> cho phép thể hiện được các ký tự đặc biệt trên R console</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="bin-i-d-liu-text.html#cb327-1"></a><span class="co"># Không dùng cat</span></span>
<span id="cb327-2"><a href="bin-i-d-liu-text.html#cb327-2"></a>x &lt;-<span class="st"> &quot;Dòng 1 </span><span class="ch">\n</span><span class="st">Dòng 2&quot;</span></span>
<span id="cb327-3"><a href="bin-i-d-liu-text.html#cb327-3"></a>x</span></code></pre>
<pre><code>## [1] &quot;Dòng 1 \nDòng 2&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="bin-i-d-liu-text.html#cb329-1"></a><span class="co"># Sử dụng cat</span></span>
<span id="cb329-2"><a href="bin-i-d-liu-text.html#cb329-2"></a>x <span class="op">%&gt;%</span><span class="st"> </span>cat</span></code></pre>
<pre><code>## Dòng 1 
## Dòng 2</code></pre>
<ul>
<li><strong>str_trim</strong>: Sử dụng để cắt các đoạn text có ký tự trắng</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="bin-i-d-liu-text.html#cb331-1"></a>bad_text =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;This&quot;</span>, <span class="st">&quot; example &quot;</span>, <span class="st">&quot;has several &quot;</span>, <span class="st">&quot; whitespaces &quot;</span>)</span>
<span id="cb331-2"><a href="bin-i-d-liu-text.html#cb331-2"></a>bad_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_trim</span>(<span class="dt">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;This&quot;         &quot;example &quot;     &quot;has several &quot; &quot;whitespaces &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="bin-i-d-liu-text.html#cb333-1"></a>bad_text <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_trim</span>(<span class="dt">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;This&quot;        &quot;example&quot;     &quot;has several&quot; &quot;whitespaces&quot;</code></pre>
<ul>
<li><strong>str_extract</strong>: Chiết xuất giá trị khỏi chuỗi</li>
<li><strong>str_extract_all</strong>: Chiết xuất giá trị khỏi chuỗi, trả ra list</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="bin-i-d-liu-text.html#cb335-1"></a>strings &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb335-2"><a href="bin-i-d-liu-text.html#cb335-2"></a>  <span class="st">&quot;apple&quot;</span>, </span>
<span id="cb335-3"><a href="bin-i-d-liu-text.html#cb335-3"></a>  <span class="st">&quot;219 733 8965&quot;</span>, </span>
<span id="cb335-4"><a href="bin-i-d-liu-text.html#cb335-4"></a>  <span class="st">&quot;329-293-8753&quot;</span>, </span>
<span id="cb335-5"><a href="bin-i-d-liu-text.html#cb335-5"></a>  <span class="st">&quot;Work: 579-499-7527; Home: 543.355.3679&quot;</span></span>
<span id="cb335-6"><a href="bin-i-d-liu-text.html#cb335-6"></a>)</span>
<span id="cb335-7"><a href="bin-i-d-liu-text.html#cb335-7"></a><span class="co"># Chiết xuất giá trị 5 ra khỏi chuỗi</span></span>
<span id="cb335-8"><a href="bin-i-d-liu-text.html#cb335-8"></a>strings <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_extract</span>(<span class="st">&quot;5&quot;</span>)</span></code></pre>
<pre><code>## [1] NA  &quot;5&quot; &quot;5&quot; &quot;5&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="bin-i-d-liu-text.html#cb337-1"></a>strings <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_extract_all</span>(<span class="st">&quot;5&quot;</span>)</span></code></pre>
<pre><code>## [[1]]
## character(0)
## 
## [[2]]
## [1] &quot;5&quot;
## 
## [[3]]
## [1] &quot;5&quot;
## 
## [[4]]
## [1] &quot;5&quot; &quot;5&quot; &quot;5&quot; &quot;5&quot; &quot;5&quot;</code></pre>
<ul>
<li><strong>str_count</strong>: Kiểm tra số lần xuất hiện của chuỗi con trong chuỗi</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="bin-i-d-liu-text.html#cb339-1"></a>states &lt;-<span class="st"> </span><span class="kw">rownames</span>(USArrests)</span>
<span id="cb339-2"><a href="bin-i-d-liu-text.html#cb339-2"></a>states</span></code></pre>
<pre><code>##  [1] &quot;Alabama&quot;        &quot;Alaska&quot;         &quot;Arizona&quot;        &quot;Arkansas&quot;      
##  [5] &quot;California&quot;     &quot;Colorado&quot;       &quot;Connecticut&quot;    &quot;Delaware&quot;      
##  [9] &quot;Florida&quot;        &quot;Georgia&quot;        &quot;Hawaii&quot;         &quot;Idaho&quot;         
## [13] &quot;Illinois&quot;       &quot;Indiana&quot;        &quot;Iowa&quot;           &quot;Kansas&quot;        
## [17] &quot;Kentucky&quot;       &quot;Louisiana&quot;      &quot;Maine&quot;          &quot;Maryland&quot;      
## [21] &quot;Massachusetts&quot;  &quot;Michigan&quot;       &quot;Minnesota&quot;      &quot;Mississippi&quot;   
## [25] &quot;Missouri&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [29] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
## [33] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Ohio&quot;           &quot;Oklahoma&quot;      
## [37] &quot;Oregon&quot;         &quot;Pennsylvania&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot;
## [41] &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Texas&quot;          &quot;Utah&quot;          
## [45] &quot;Vermont&quot;        &quot;Virginia&quot;       &quot;Washington&quot;     &quot;West Virginia&quot; 
## [49] &quot;Wisconsin&quot;      &quot;Wyoming&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="bin-i-d-liu-text.html#cb341-1"></a><span class="co">#Kiểm tra độ dài ký tự trong vector</span></span>
<span id="cb341-2"><a href="bin-i-d-liu-text.html#cb341-2"></a>states <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_length</span>()</span></code></pre>
<pre><code>##  [1]  7  6  7  8 10  8 11  8  7  7  6  5  8  7  4  6  8  9  5  8 13  8  9
## [24] 11  8  7  8  6 13 10 10  8 14 12  4  8  6 12 12 14 12  9  5  4  7  8
## [47] 10 13  9  7</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="bin-i-d-liu-text.html#cb343-1"></a><span class="co">#Đếm số lần xuất hiện ký tự trong vector</span></span>
<span id="cb343-2"><a href="bin-i-d-liu-text.html#cb343-2"></a><span class="kw">str_count</span>(states <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">toupper</span>(), <span class="st">&quot;A&quot;</span>)</span></code></pre>
<pre><code>##  [1] 4 3 2 3 2 1 0 2 1 1 2 1 0 2 1 2 0 2 1 2 2 1 1 0 0 2 2 2 1 0 0 0 2 2 0
## [36] 2 0 2 1 2 2 0 1 1 0 1 1 1 0 0</code></pre>
<ul>
<li><code>str_detect</code>: Kiểm tra tồn tại của ký tự trong chuỗi</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="bin-i-d-liu-text.html#cb345-1"></a>string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;Vietnam&quot;</span>, <span class="st">&quot;Apple&quot;</span>)</span>
<span id="cb345-2"><a href="bin-i-d-liu-text.html#cb345-2"></a><span class="kw">str_detect</span>(string, <span class="st">&quot;l&quot;</span>)</span></code></pre>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<ul>
<li><code>str_replace</code>: Thay thế ký tự đầu tiên trong chuỗi, <code>str_replace_all</code> - thay thế tất cả ký tự trong chuỗi</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="bin-i-d-liu-text.html#cb347-1"></a>string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;Vietnam&quot;</span>, <span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="ot">NA</span>)</span>
<span id="cb347-2"><a href="bin-i-d-liu-text.html#cb347-2"></a><span class="co"># Thay thế ký tự đầu tiên</span></span>
<span id="cb347-3"><a href="bin-i-d-liu-text.html#cb347-3"></a>string <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace</span>(<span class="st">&quot;l&quot;</span>, <span class="st">&quot;99&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;He99lo&quot;  &quot;Vietnam&quot; &quot;App99e&quot;  &quot;&quot;        NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="bin-i-d-liu-text.html#cb349-1"></a><span class="co"># Thay thế tất cả ký tự</span></span>
<span id="cb349-2"><a href="bin-i-d-liu-text.html#cb349-2"></a>string <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_all</span>(<span class="st">&quot;l&quot;</span>, <span class="st">&quot;99&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;He9999o&quot; &quot;Vietnam&quot; &quot;App99e&quot;  &quot;&quot;        NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="bin-i-d-liu-text.html#cb351-1"></a><span class="co"># Thay thế NA</span></span>
<span id="cb351-2"><a href="bin-i-d-liu-text.html#cb351-2"></a>string <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_na</span>(<span class="st">&quot;9999&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Hello&quot;   &quot;Vietnam&quot; &quot;Apple&quot;   &quot;&quot;        &quot;9999&quot;</code></pre>
<p><strong>Lưu ý</strong>: <code>""</code> được coi là một ký tự vẫn có độ dài bằng 0</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="bin-i-d-liu-text.html#cb353-1"></a><span class="st">&quot;&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_length</span>()</span></code></pre>
<pre><code>## [1] 0</code></pre>
<ul>
<li><code>str_locate</code>: Kiểm tra vị trí đầu tiên xuất hiện ký tự, <code>str_locate_all</code> - kiểm tra tất cả các vị trí xuất hiện ký tự</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="bin-i-d-liu-text.html#cb355-1"></a><span class="st">&quot;abbbbcab&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_locate</span>(<span class="st">&quot;a&quot;</span>)</span></code></pre>
<pre><code>##      start end
## [1,]     1   1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="bin-i-d-liu-text.html#cb357-1"></a><span class="st">&quot;abbbbcaab&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_locate_all</span>(<span class="st">&quot;a&quot;</span>)</span></code></pre>
<pre><code>## [[1]]
##      start end
## [1,]     1   1
## [2,]     7   7
## [3,]     8   8</code></pre>
</div>
<div id="regular-expression" class="section level2">
<h2><span class="header-section-number">7.2</span> Regular expression</h2>
<p><strong>Regular expression</strong> (regex) là việc chỉ dẫn một hàm cách thức tìm, thay thế và xử lý dữ liệu dạng string. Cơ bản có 4 dạng:</p>
<ul>
<li><strong>Concetenation (chuỗi ký tự)</strong>: Tìm chuỗi ký tự: “abcd”</li>
<li><strong>Logical (phép logic)</strong>: Tìm chuỗi chứa ab hoặc cd: “ab|cd”</li>
<li><strong>Repetition (lặp lại ký tự)</strong>: Tìm chuỗi lặp lại một hoặc nhiều lần ký tự a: “a+”</li>
<li><strong>Grouping (Nhóm ký tự)</strong>: Nhóm các ký tự muốn tìm, sử dụng dấu ngoặc đơn ()</li>
</ul>
<p>Khi phân tích <strong>regex</strong>, có hai khía cạnh cần quan tâm:</p>
<ul>
<li>Hàm sử dụng trên R</li>
<li>Cách thức tương tác</li>
</ul>
<p>Đối với cách thức tương tác trong R, có các nhóm vấn đề sau:</p>
<ul>
<li>Metadata</li>
<li>Sequennces</li>
<li>Character class</li>
</ul>
<div id="metadata" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Metadata</h3>
<p>Metadata là các ký hiệu đặc biệt được thể hiện trong R nhằm biểu đạt toán tử nhất định. Để làm việc với các ký tự có định dạng giống meta data, cần thêm dâu <code>\\</code>. Xem ví dụ dưới đây</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="bin-i-d-liu-text.html#cb359-1"></a>x &lt;-<span class="st"> &quot;Vietnam|HaNoi&quot;</span></span>
<span id="cb359-2"><a href="bin-i-d-liu-text.html#cb359-2"></a><span class="co"># Không đúng định dang</span></span>
<span id="cb359-3"><a href="bin-i-d-liu-text.html#cb359-3"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_all</span>(<span class="st">&quot;|&quot;</span>, <span class="st">&quot;_&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;_V_i_e_t_n_a_m_|_H_a_N_o_i_&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="bin-i-d-liu-text.html#cb361-1"></a><span class="co"># Sử dụng đúng metadata</span></span>
<span id="cb361-2"><a href="bin-i-d-liu-text.html#cb361-2"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_all</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">|&quot;</span>, <span class="st">&quot;_&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Vietnam_HaNoi&quot;</code></pre>
<p>Trong trường hợp trên, gsub xử lý ký tự <strong>$</strong> như <em>regular expression</em> cho các ký tự đặc biệt.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="bin-i-d-liu-text.html#cb363-1"></a><span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">$&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;.&quot;</span>, <span class="st">&quot;Vietnam$Ha$Noi&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Vietnam.Ha.Noi&quot;</code></pre>
<p>Metadata trong regular expressions bao gồm các ký tự sau:</p>
<blockquote>
<p>$ * + . ? [ ] ^ { } | ( )<br />
</p>
</blockquote>
<table style="width:99%;">
<colgroup>
<col width="12%" />
<col width="86%" />
</colgroup>
<thead>
<tr class="header">
<th>Ký tự</th>
<th>Ý nghĩa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.</code></td>
<td>matches everything except for the empty sting ``.</td>
</tr>
<tr class="even">
<td><code>+</code></td>
<td>the preceding item will be matched one or more times.</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>the preceding item will be matched zero or more times.</td>
</tr>
<tr class="even">
<td><code>^</code></td>
<td>matches the empty string at the at the beginning of a line</td>
</tr>
<tr class="odd">
<td><code>$</code></td>
<td>matches empty string at the end of a line.</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>infix operator: OR</td>
</tr>
<tr class="odd">
<td><code>()</code></td>
<td>brackets for grouping.</td>
</tr>
<tr class="even">
<td><code>[]</code></td>
<td>character class brackets</td>
</tr>
</tbody>
</table>
<p><strong>Lưu ý</strong>: Khi sử dụng dấu gạch ngoặc kép (\\) là ký tự bình thưởng, sử dụng 4 gạch chéo. Xem các ví dụ dưới đây</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="bin-i-d-liu-text.html#cb365-1"></a>meta_char &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;$&quot;</span>,<span class="st">&quot;*&quot;</span>,<span class="st">&quot;+&quot;</span>,<span class="st">&quot;.&quot;</span>,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;[&quot;</span>,<span class="st">&quot;^&quot;</span>,<span class="st">&quot;{&quot;</span>,<span class="st">&quot;|&quot;</span>,<span class="st">&quot;(&quot;</span>,<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span>)</span>
<span id="cb365-2"><a href="bin-i-d-liu-text.html#cb365-2"></a>meta_char</span></code></pre>
<pre><code>##  [1] &quot;$&quot;  &quot;*&quot;  &quot;+&quot;  &quot;.&quot;  &quot;?&quot;  &quot;[&quot;  &quot;^&quot;  &quot;{&quot;  &quot;|&quot;  &quot;(&quot;  &quot;\\&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="bin-i-d-liu-text.html#cb367-1"></a><span class="co">#Không sử dụng chính xác</span></span>
<span id="cb367-2"><a href="bin-i-d-liu-text.html#cb367-2"></a><span class="kw">str_locate</span>(meta_char, <span class="st">&quot;^&quot;</span>)</span></code></pre>
<pre><code>##       start end
##  [1,]     1   0
##  [2,]     1   0
##  [3,]     1   0
##  [4,]     1   0
##  [5,]     1   0
##  [6,]     1   0
##  [7,]     1   0
##  [8,]     1   0
##  [9,]     1   0
## [10,]     1   0
## [11,]     1   0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="bin-i-d-liu-text.html#cb369-1"></a><span class="co">#Sử dụng chính xác</span></span>
<span id="cb369-2"><a href="bin-i-d-liu-text.html#cb369-2"></a>meta_char <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_locate</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">^&quot;</span>)</span></code></pre>
<pre><code>##       start end
##  [1,]    NA  NA
##  [2,]    NA  NA
##  [3,]    NA  NA
##  [4,]    NA  NA
##  [5,]    NA  NA
##  [6,]    NA  NA
##  [7,]     1   1
##  [8,]    NA  NA
##  [9,]    NA  NA
## [10,]    NA  NA
## [11,]    NA  NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="bin-i-d-liu-text.html#cb371-1"></a><span class="co">#Hai dâu gạch chéo</span></span>
<span id="cb371-2"><a href="bin-i-d-liu-text.html#cb371-2"></a>meta_char <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_locate</span>(<span class="st">&quot;</span><span class="ch">\\\\</span><span class="st">&quot;</span>)</span></code></pre>
<pre><code>##       start end
##  [1,]    NA  NA
##  [2,]    NA  NA
##  [3,]    NA  NA
##  [4,]    NA  NA
##  [5,]    NA  NA
##  [6,]    NA  NA
##  [7,]    NA  NA
##  [8,]    NA  NA
##  [9,]    NA  NA
## [10,]    NA  NA
## [11,]     1   1</code></pre>
</div>
<div id="sequences" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Sequences</h3>
<p>Sequence trong R có các nhóm sau:</p>
<p><img src="Images/08-plot3.png" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="bin-i-d-liu-text.html#cb373-1"></a><span class="co">#sub thay thế giá trị phù hợp đầu tiên</span></span>
<span id="cb373-2"><a href="bin-i-d-liu-text.html#cb373-2"></a><span class="kw">sub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">d&quot;</span>,<span class="st">&quot;*&quot;</span>, <span class="st">&quot;Y2K was in 2000&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Y*K was in 2000&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="bin-i-d-liu-text.html#cb375-1"></a><span class="co">#gsub thay thế tất cả các giá trị phù hợp</span></span>
<span id="cb375-2"><a href="bin-i-d-liu-text.html#cb375-2"></a><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">d&quot;</span>,<span class="st">&quot;*&quot;</span>, <span class="st">&quot;Y2K was in 2000&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Y*K was in ****&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="bin-i-d-liu-text.html#cb377-1"></a><span class="co">#Thay thế những ký tự không phải là số</span></span>
<span id="cb377-2"><a href="bin-i-d-liu-text.html#cb377-2"></a><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">D&quot;</span>,<span class="st">&quot;*&quot;</span>, <span class="st">&quot;Y2K was in 2000&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;*2*********2000&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="bin-i-d-liu-text.html#cb379-1"></a><span class="co">#Thay thế space</span></span>
<span id="cb379-2"><a href="bin-i-d-liu-text.html#cb379-2"></a><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">s&quot;</span>,<span class="st">&quot;*&quot;</span>, <span class="st">&quot;Y2K was in 2000&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Y2K*was*in*2000&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="bin-i-d-liu-text.html#cb381-1"></a><span class="co">#Non space</span></span>
<span id="cb381-2"><a href="bin-i-d-liu-text.html#cb381-2"></a><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">S&quot;</span>,<span class="st">&quot;*&quot;</span>, <span class="st">&quot;Y2K was in 2000&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;*** *** ** ****&quot;</code></pre>
</div>
<div id="character-class" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Character class</h3>
<p>Character class sẽ tìm <strong>MỘT</strong> ký tự phù hợp trong bracket []</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="bin-i-d-liu-text.html#cb383-1"></a><span class="co">#Tìm ký tự từ a-z</span></span>
<span id="cb383-2"><a href="bin-i-d-liu-text.html#cb383-2"></a><span class="kw">gsub</span>(<span class="st">&quot;[a-z]&quot;</span>, <span class="st">&quot;*&quot;</span>, <span class="st">&quot;Vietnam in 2016&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;V****** ** 2016&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="bin-i-d-liu-text.html#cb385-1"></a><span class="co">#Tìm số từ 0-9</span></span>
<span id="cb385-2"><a href="bin-i-d-liu-text.html#cb385-2"></a><span class="kw">gsub</span>(<span class="st">&quot;[0-9]&quot;</span>, <span class="st">&quot;*&quot;</span>, <span class="st">&quot;Vietnam in 2016&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Vietnam in ****&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="bin-i-d-liu-text.html#cb387-1"></a><span class="co">#Tìm các ký tự trừ số</span></span>
<span id="cb387-2"><a href="bin-i-d-liu-text.html#cb387-2"></a><span class="kw">grep</span>(<span class="st">&quot;[^0-9]&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;Vietnam in&quot;</span>, <span class="st">&quot; $%^$&quot;</span>, <span class="st">&quot;2016&quot;</span>), <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;Vietnam in&quot; &quot; $%^$&quot;</code></pre>
</div>
<div id="posix-class" class="section level3">
<h3><span class="header-section-number">7.2.4</span> POSIX class</h3>
<p>Posix class được thể hiện trong 2 dấu ngoặc kép định dạng <code>[[:class:]]</code> như sau.</p>
<p><img src="Images/08-plot4.png" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="bin-i-d-liu-text.html#cb389-1"></a>example &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Alo ala #^ 12,6.7&quot;</span>)</span>
<span id="cb389-2"><a href="bin-i-d-liu-text.html#cb389-2"></a><span class="co">#Loại blank</span></span>
<span id="cb389-3"><a href="bin-i-d-liu-text.html#cb389-3"></a><span class="kw">gsub</span>(<span class="st">&quot;[[:blank:]]&quot;</span>, <span class="st">&quot;&quot;</span>, example)</span></code></pre>
<pre><code>## [1] &quot;Aloala#^12,6.7&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="bin-i-d-liu-text.html#cb391-1"></a><span class="co">#Loại dấu</span></span>
<span id="cb391-2"><a href="bin-i-d-liu-text.html#cb391-2"></a><span class="kw">gsub</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>, example)</span></code></pre>
<pre><code>## [1] &quot;Alo ala  1267&quot;</code></pre>
</div>
<div id="quantifiers" class="section level3">
<h3><span class="header-section-number">7.2.5</span> Quantifiers</h3>
<p>Quantifier là nhóm điều kiện đếm số lần lặp lại của 1 nhóm ký tự</p>
<p><img src="Images/08-plot5.png" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="bin-i-d-liu-text.html#cb393-1"></a><span class="co"># people names</span></span>
<span id="cb393-2"><a href="bin-i-d-liu-text.html#cb393-2"></a>people =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;rori&quot;</span>, <span class="st">&quot;emilia&quot;</span>, <span class="st">&quot;matteo&quot;</span>, <span class="st">&quot;mehmet&quot;</span>, <span class="st">&quot;filipe&quot;</span>, <span class="st">&quot;anna&quot;</span>, <span class="st">&quot;tyler&quot;</span>,</span>
<span id="cb393-3"><a href="bin-i-d-liu-text.html#cb393-3"></a><span class="st">&quot;rasmus&quot;</span>, <span class="st">&quot;jacob&quot;</span>, <span class="st">&quot;youna&quot;</span>, <span class="st">&quot;flora&quot;</span>, <span class="st">&quot;adi&quot;</span>)</span>
<span id="cb393-4"><a href="bin-i-d-liu-text.html#cb393-4"></a><span class="co"># Tìm tên có xuất hiện m nhiều nhất 1 lần</span></span>
<span id="cb393-5"><a href="bin-i-d-liu-text.html#cb393-5"></a><span class="kw">grep</span>(<span class="dt">pattern =</span> <span class="st">&quot;m?&quot;</span>, people, <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre>
<pre><code>##  [1] &quot;rori&quot;   &quot;emilia&quot; &quot;matteo&quot; &quot;mehmet&quot; &quot;filipe&quot; &quot;anna&quot;   &quot;tyler&quot; 
##  [8] &quot;rasmus&quot; &quot;jacob&quot;  &quot;youna&quot;  &quot;flora&quot;  &quot;adi&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="bin-i-d-liu-text.html#cb395-1"></a><span class="co"># Tên xuất hiện m chính xác 1 lần</span></span>
<span id="cb395-2"><a href="bin-i-d-liu-text.html#cb395-2"></a><span class="kw">grep</span>(<span class="dt">pattern =</span> <span class="st">&quot;m{1}&quot;</span>, people, <span class="dt">value =</span> <span class="ot">TRUE</span>, <span class="dt">perl =</span> <span class="ot">FALSE</span>)</span></code></pre>
<pre><code>## [1] &quot;emilia&quot; &quot;matteo&quot; &quot;mehmet&quot; &quot;rasmus&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="bin-i-d-liu-text.html#cb397-1"></a><span class="co"># Tên có xuất hiện hoặc không có xuất hiện m rồi xuất hiện t</span></span>
<span id="cb397-2"><a href="bin-i-d-liu-text.html#cb397-2"></a><span class="kw">grep</span>(<span class="st">&quot;m*t&quot;</span>, people, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;matteo&quot; &quot;mehmet&quot; &quot;tyler&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="bin-i-d-liu-text.html#cb399-1"></a><span class="co">#Tên có m một hoặc nhiều lần</span></span>
<span id="cb399-2"><a href="bin-i-d-liu-text.html#cb399-2"></a><span class="kw">grep</span>(<span class="st">&quot;m+t&quot;</span>, people, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## character(0)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="bin-i-d-liu-text.html#cb401-1"></a><span class="co">#Tên có m một hoặc nhiều lần rồi đến t</span></span>
<span id="cb401-2"><a href="bin-i-d-liu-text.html#cb401-2"></a><span class="kw">grep</span>(<span class="st">&quot;m+.t&quot;</span>, people, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;matteo&quot; &quot;mehmet&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="bin-i-d-liu-text.html#cb403-1"></a>paris_tweets =<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb403-2"><a href="bin-i-d-liu-text.html#cb403-2"></a><span class="st">&quot;#Paris is chock-full of cultural and culinary attractions&quot;</span>,</span>
<span id="cb403-3"><a href="bin-i-d-liu-text.html#cb403-3"></a><span class="st">&quot;Some time in #Paris along Canal St.-Martin famous by #Amelie&quot;</span>,</span>
<span id="cb403-4"><a href="bin-i-d-liu-text.html#cb403-4"></a><span class="st">&quot;While you&#39;re in #Paris, stop at cafe: http://goo.gl/yaCbW&quot;</span>,</span>
<span id="cb403-5"><a href="bin-i-d-liu-text.html#cb403-5"></a><span class="st">&quot;Paris, the city of light&quot;</span>)</span>
<span id="cb403-6"><a href="bin-i-d-liu-text.html#cb403-6"></a><span class="co"># match (all) hashtags in &#39;paris_tweets&#39;</span></span>
<span id="cb403-7"><a href="bin-i-d-liu-text.html#cb403-7"></a><span class="kw">str_match_all</span>(paris_tweets, <span class="st">&quot;#[a-zA-Z]{1,}&quot;</span>)</span></code></pre>
<pre><code>## [[1]]
##      [,1]    
## [1,] &quot;#Paris&quot;
## 
## [[2]]
##      [,1]     
## [1,] &quot;#Paris&quot; 
## [2,] &quot;#Amelie&quot;
## 
## [[3]]
##      [,1]    
## [1,] &quot;#Paris&quot;
## 
## [[4]]
##      [,1]</code></pre>
</div>
</div>
<div id="cac-vi-du-tng-hp" class="section level2">
<h2><span class="header-section-number">7.3</span> Các ví dụ tổng hợp</h2>
<div id="vi-du-1" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Ví dụ 1</h3>
<ul>
<li><strong>Vấn đề</strong>: Thay thế các ký tự đặc biệt lặp đi lặp lại</li>
<li><strong>Giải pháp</strong>: Sử dụng dấu <strong>+</strong></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="bin-i-d-liu-text.html#cb405-1"></a>d1 =<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb405-2"><a href="bin-i-d-liu-text.html#cb405-2"></a>  <span class="dt">id...of....patient =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb405-3"><a href="bin-i-d-liu-text.html#cb405-3"></a>  <span class="dt">patient....age =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="op">+</span><span class="st"> </span><span class="dv">2</span>))</span>
<span id="cb405-4"><a href="bin-i-d-liu-text.html#cb405-4"></a><span class="kw">names</span>(d1) &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.+&quot;</span>, </span>
<span id="cb405-5"><a href="bin-i-d-liu-text.html#cb405-5"></a>                  <span class="dt">replacement =</span> <span class="st">&quot;_&quot;</span>, <span class="dt">x =</span> <span class="kw">names</span>(d1))</span>
<span id="cb405-6"><a href="bin-i-d-liu-text.html#cb405-6"></a><span class="kw">names</span>(d1)</span></code></pre>
<pre><code>## [1] &quot;id_of_patient&quot; &quot;patient_age&quot;</code></pre>
</div>
<div id="vi-du-2" class="section level3">
<h3><span class="header-section-number">7.3.2</span> Ví dụ 2</h3>
<ul>
<li><strong>Vấn đề</strong>: Lọc các ký tự trong 1 nhóm</li>
<li><strong>Giải pháp</strong>:
<ul>
<li>Sử dụng ký tự []</li>
<li>Có thể sử dụng dấu - để tìm trong khoảng</li>
</ul></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="bin-i-d-liu-text.html#cb407-1"></a><span class="co">#Tìm vị trí các ký tự</span></span>
<span id="cb407-2"><a href="bin-i-d-liu-text.html#cb407-2"></a><span class="kw">grep</span>(<span class="st">&quot;[abcAB]&quot;</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;Con ca&quot;</span>, <span class="st">&quot;Boong&quot;</span>, <span class="st">&quot;Xoong&quot;</span>))</span></code></pre>
<pre><code>## [1] 1 2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="bin-i-d-liu-text.html#cb409-1"></a><span class="kw">grep</span>(<span class="st">&quot;[0-3]&quot;</span>, </span>
<span id="cb409-2"><a href="bin-i-d-liu-text.html#cb409-2"></a>     <span class="kw">c</span>(<span class="st">&quot;nose&quot;</span>, <span class="st">&quot;letter38&quot;</span>, <span class="st">&quot;window9&quot;</span>, <span class="st">&quot;apple0&quot;</span>), <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre>
<pre><code>## [1] &quot;letter38&quot; &quot;apple0&quot;</code></pre>
<p><strong>Chi tiết xem trong bảng dưới đây</strong></p>
<p><img src="Images/08-plot2.png" /></p>
</div>
<div id="vi-du-3" class="section level3">
<h3><span class="header-section-number">7.3.3</span> Ví dụ 3</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="bin-i-d-liu-text.html#cb411-1"></a>d &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb411-2"><a href="bin-i-d-liu-text.html#cb411-2"></a>  <span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">22</span>, <span class="dv">33</span>, <span class="dv">44</span>, <span class="dv">55</span>, <span class="dv">66</span>, <span class="dv">77</span>, <span class="dv">88</span>), </span>
<span id="cb411-3"><a href="bin-i-d-liu-text.html#cb411-3"></a>  <span class="dt">drug =</span> <span class="kw">c</span>(<span class="st">&quot;vitamin E&quot;</span>, <span class="st">&quot;vitamin ESTER-C&quot;</span>, </span>
<span id="cb411-4"><a href="bin-i-d-liu-text.html#cb411-4"></a>           <span class="st">&quot; vitamin Eabc &quot;</span>, <span class="st">&quot;vitamin E(ointment)&quot;</span>, <span class="st">&quot;&quot;</span>, </span>
<span id="cb411-5"><a href="bin-i-d-liu-text.html#cb411-5"></a>           <span class="st">&quot;vitamin E &quot;</span>, <span class="st">&quot;provitamin E</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot;vit E&quot;</span>), </span>
<span id="cb411-6"><a href="bin-i-d-liu-text.html#cb411-6"></a>  <span class="dt">text =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>,<span class="st">&quot; &quot;</span>, <span class="st">&quot; 3 times a day after meal&quot;</span>, </span>
<span id="cb411-7"><a href="bin-i-d-liu-text.html#cb411-7"></a>           <span class="st">&quot;once a day&quot;</span>, <span class="st">&quot; &quot;</span>,</span>
<span id="cb411-8"><a href="bin-i-d-liu-text.html#cb411-8"></a>           <span class="st">&quot; one per day &quot;</span>, <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st"> &quot;</span>), </span>
<span id="cb411-9"><a href="bin-i-d-liu-text.html#cb411-9"></a>  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb411-10"><a href="bin-i-d-liu-text.html#cb411-10"></a>(s &lt;-<span class="st">  </span>d<span class="op">$</span>text)</span></code></pre>
<pre><code>## [1] &quot;&quot;                          &quot; &quot;                        
## [3] &quot; 3 times a day after meal&quot; &quot;once a day&quot;               
## [5] &quot; &quot;                         &quot; one per day &quot;            
## [7] &quot;\t&quot;                         &quot;\n &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="bin-i-d-liu-text.html#cb413-1"></a><span class="co">#Các giá trị riêng của s</span></span>
<span id="cb413-2"><a href="bin-i-d-liu-text.html#cb413-2"></a><span class="kw">unique</span>(s)</span></code></pre>
<pre><code>## [1] &quot;&quot;                          &quot; &quot;                        
## [3] &quot; 3 times a day after meal&quot; &quot;once a day&quot;               
## [5] &quot; one per day &quot;             &quot;\t&quot;                        
## [7] &quot;\n &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="bin-i-d-liu-text.html#cb415-1"></a><span class="co">#Xử lý ký tự</span></span>
<span id="cb415-2"><a href="bin-i-d-liu-text.html#cb415-2"></a><span class="co">#Các ký tự trong ngoặc vuông chuyển thành NA</span></span>
<span id="cb415-3"><a href="bin-i-d-liu-text.html#cb415-3"></a><span class="kw">gsub</span>(<span class="st">&quot;[</span><span class="ch">\t\n\r\f\v</span><span class="st">]+&quot;</span>, <span class="ot">NA</span>, s)</span></code></pre>
<pre><code>## [1] &quot;&quot;                          &quot; &quot;                        
## [3] &quot; 3 times a day after meal&quot; &quot;once a day&quot;               
## [5] &quot; &quot;                         &quot; one per day &quot;            
## [7] NA                          NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="bin-i-d-liu-text.html#cb417-1"></a><span class="co">#Chuyển tất cả các ký tự</span></span>
<span id="cb417-2"><a href="bin-i-d-liu-text.html#cb417-2"></a><span class="kw">gsub</span>(<span class="st">&quot;^$|^( +)$|[</span><span class="ch">\t\n\r\f\v</span><span class="st">]+&quot;</span>, <span class="ot">NA</span>, s)</span></code></pre>
<pre><code>## [1] NA                          NA                         
## [3] &quot; 3 times a day after meal&quot; &quot;once a day&quot;               
## [5] NA                          &quot; one per day &quot;            
## [7] NA                          NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="bin-i-d-liu-text.html#cb419-1"></a><span class="co">#Chuyển tất cả các khoảng trắng sang NULL</span></span>
<span id="cb419-2"><a href="bin-i-d-liu-text.html#cb419-2"></a><span class="kw">gsub</span>(<span class="st">&quot;^([ </span><span class="ch">\t\n\r\f\v</span><span class="st">]+)|([ </span><span class="ch">\t\n\r\f\v</span><span class="st">]+)$&quot;</span>, <span class="st">&quot;&quot;</span>, s)</span></code></pre>
<pre><code>## [1] &quot;&quot;                         &quot;&quot;                        
## [3] &quot;3 times a day after meal&quot; &quot;once a day&quot;              
## [5] &quot;&quot;                         &quot;one per day&quot;             
## [7] &quot;&quot;                         &quot;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="bin-i-d-liu-text.html#cb421-1"></a><span class="co">######</span></span>
<span id="cb421-2"><a href="bin-i-d-liu-text.html#cb421-2"></a><span class="co">#Tìm vitamin e</span></span>
<span id="cb421-3"><a href="bin-i-d-liu-text.html#cb421-3"></a>t &lt;-<span class="st"> </span>d<span class="op">$</span>drug</span>
<span id="cb421-4"><a href="bin-i-d-liu-text.html#cb421-4"></a><span class="kw">grep</span>(<span class="st">&quot;vitamin e&quot;</span>, t, <span class="dt">ignore.case =</span> T, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;vitamin E&quot;           &quot;vitamin ESTER-C&quot;     &quot; vitamin Eabc &quot;     
## [4] &quot;vitamin E(ointment)&quot; &quot;vitamin E &quot;          &quot;provitamin E\n&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="bin-i-d-liu-text.html#cb423-1"></a><span class="co">#Tìm vitamin e mà đi sau đi kèm ký tự alphabet</span></span>
<span id="cb423-2"><a href="bin-i-d-liu-text.html#cb423-2"></a><span class="kw">grep</span>(<span class="st">&quot;vitamin e([a-zA-Z])&quot;</span>, t, <span class="dt">ignore.case =</span> T, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;vitamin ESTER-C&quot; &quot; vitamin Eabc &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="bin-i-d-liu-text.html#cb425-1"></a><span class="co">#Tìm vitamin e mà đi sau không đi kèm gì</span></span>
<span id="cb425-2"><a href="bin-i-d-liu-text.html#cb425-2"></a><span class="kw">grep</span>(<span class="st">&quot;vitamin e($)&quot;</span>, t, <span class="dt">ignore.case =</span> T, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot;vitamin E&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="bin-i-d-liu-text.html#cb427-1"></a><span class="co">#Tìm vitamin e mà đi sau không phải là ký tự alphabet</span></span>
<span id="cb427-2"><a href="bin-i-d-liu-text.html#cb427-2"></a><span class="kw">grep</span>(<span class="st">&quot;vitamin e($|[^a-zA-Z])&quot;</span>, s, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>, <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre>
<pre><code>## character(0)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="bin-i-d-liu-text.html#cb429-1"></a><span class="co">#Tìm thêm vit e</span></span>
<span id="cb429-2"><a href="bin-i-d-liu-text.html#cb429-2"></a><span class="kw">grep</span>(<span class="st">&quot;vitamin e($|[^a-zA-Z])|vit e($|[^a-zA-Z])&quot;</span>, t, </span>
<span id="cb429-3"><a href="bin-i-d-liu-text.html#cb429-3"></a>     <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>, <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre>
<pre><code>## [1] &quot;vitamin E&quot;           &quot;vitamin E(ointment)&quot; &quot;vitamin E &quot;         
## [4] &quot;provitamin E\n&quot;      &quot;vit E&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="bin-i-d-liu-text.html#cb431-1"></a><span class="co">#Tìm ký tự bắt đầu với _vit</span></span>
<span id="cb431-2"><a href="bin-i-d-liu-text.html#cb431-2"></a><span class="kw">grep</span>(<span class="st">&quot; vit&quot;</span>, t, <span class="dt">ignore.case =</span> T, <span class="dt">value =</span> T)</span></code></pre>
<pre><code>## [1] &quot; vitamin Eabc &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="bin-i-d-liu-text.html#cb433-1"></a><span class="co">#Loại prodvitamin</span></span>
<span id="cb433-2"><a href="bin-i-d-liu-text.html#cb433-2"></a><span class="kw">grep</span>(<span class="st">&quot;([^a-z]+|^)vitamin e($|[^a-zA-Z])|([^a-z]+|^)vit e($|[^a-zA-Z])&quot;</span>,</span>
<span id="cb433-3"><a href="bin-i-d-liu-text.html#cb433-3"></a>     t, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>, <span class="dt">value =</span> <span class="ot">TRUE</span>)</span></code></pre>
<pre><code>## [1] &quot;vitamin E&quot;           &quot;vitamin E(ointment)&quot; &quot;vitamin E &quot;         
## [4] &quot;vit E&quot;</code></pre>
</div>
<div id="vi-du-4" class="section level3">
<h3><span class="header-section-number">7.3.4</span> Ví dụ 4</h3>
<ul>
<li>Vấn đề: Thay thế ký tự rỗng</li>
<li>Giải pháp: Sử dụng <code>"^$"</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="bin-i-d-liu-text.html#cb435-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;viet&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb435-2"><a href="bin-i-d-liu-text.html#cb435-2"></a><span class="co">#Không chạy</span></span>
<span id="cb435-3"><a href="bin-i-d-liu-text.html#cb435-3"></a>df<span class="op">$</span>x <span class="op">%&gt;%</span><span class="st"> </span>as.character <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_na</span>(<span class="st">&quot;Missing&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;1&quot;    &quot;viet&quot; &quot;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="bin-i-d-liu-text.html#cb437-1"></a><span class="co">#Chạy</span></span>
<span id="cb437-2"><a href="bin-i-d-liu-text.html#cb437-2"></a>df<span class="op">$</span>x <span class="op">%&gt;%</span><span class="st"> </span>as.character <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_replace_all</span>(<span class="st">&quot;^$&quot;</span>, <span class="st">&quot;Missing&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;1&quot;       &quot;viet&quot;    &quot;Missing&quot;</code></pre>
</div>
</div>
<div id="tai-liu-tham-khao" class="section level2">
<h2><span class="header-section-number">7.4</span> Tài liệu tham khảo</h2>
<ul>
<li><a href="http://www.endmemo.com/program/R/gsub.php">gsub</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lp-trinh-chc-nang-ham-vi-purrr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"split_by": "rmd"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R</title>
  <meta name="description" content="Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R" />
  <meta name="generator" content="bookdown 0.11.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R" />
  <meta name="github-repo" content="yihui/bookdown-crc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R" />
  
  <meta name="twitter:description" content="Chương 5 Lập trình hàm | Phân tích dữ liệu thực tế với R" />
  

<meta name="author" content="Hoàng Đức Anh" />


<meta name="date" content="2019-07-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cac-chi-s-thng-ke-mo-ta-co-ban.html">
<link rel="next" href="lp-trinh-chc-nang-ham-vi-purrr.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phân tích dữ liệu thực tế với R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="li-m-u.html"><a href="li-m-u.html"><i class="fa fa-check"></i>Lời mở đầu</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Khoa học dữ liệu và nghề phân tích dữ liệu</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#khoa-hoc-d-liu-la-gi"><i class="fa fa-check"></i><b>1.1</b> Khoa học dữ liệu là gì</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#tai-sao-phan-tich-d-liu-la-ngh-kho"><i class="fa fa-check"></i><b>1.2</b> Tại sao phân tích dữ liệu là nghề khó?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#phan-loai-hoat-ng-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.3</b> Phân loại hoạt động phân tích dữ liệu</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#da-theo-cach-thc-tac-ng-n-khach-hang"><i class="fa fa-check"></i><b>1.3.1</b> Dựa theo cách thức tác động đến khách hàng</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#da-theo-c-tinh-cua-ngh-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.3.2</b> Dựa theo đặc tính của nghề phân tích dữ liệu</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#da-theo-chu-ky-cua-khach-hang-i-vi-san-phm"><i class="fa fa-check"></i><b>1.3.3</b> Dựa theo chu kỳ của khách hàng đối với sản phẩm</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#cach-xay-dng-nhom-phan-tich-d-liu"><i class="fa fa-check"></i><b>1.4</b> Cách xây dựng nhóm phân tích dữ liệu</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#luu-y-khi-oc-tai-liu"><i class="fa fa-check"></i><b>1.5</b> Lưu ý khi đọc tài liệu</a></li>
</ul></li>
<li class="part"><span><b>I Kỹ thuật phân tích dữ liệu thực tế</b></span></li>
<li class="chapter" data-level="2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><i class="fa fa-check"></i><b>2</b> Ngữ pháp của biến đổi dữ liệu với DPLYR</a><ul>
<li class="chapter" data-level="2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#gii-thiu-v-pipe-operator"><i class="fa fa-check"></i><b>2.1</b> Giới thiệu về pipe operator</a></li>
<li class="chapter" data-level="2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-co-ban-trong-dplyr"><i class="fa fa-check"></i><b>2.2</b> Các hàm cơ bản trong dplyr</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-truy-vn-d-liu"><i class="fa fa-check"></i><b>2.2.1</b> Nhóm câu lệnh truy vấn dữ liệu</a></li>
<li class="chapter" data-level="2.2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-bin-i-d-liu"><i class="fa fa-check"></i><b>2.2.2</b> Nhóm câu lệnh biến đổi dữ liệu</a></li>
<li class="chapter" data-level="2.2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-ham-tng-hp-d-liu-vi-summarise"><i class="fa fa-check"></i><b>2.2.3</b> Nhóm hàm tổng hợp dữ liệu với <code>summarise</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-nang-cao-trong-dplyr"><i class="fa fa-check"></i><b>2.3</b> Các hàm nâng cao trong dplyr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#iu-kin-phan-nhom-vi-case_when"><i class="fa fa-check"></i><b>2.3.1</b> Điều kiện phân nhóm với <code>case_when</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tao-them-bin-mi-theo-iu-kin-vi-mutate_if-mutate_at"><i class="fa fa-check"></i><b>2.3.2</b> Tạo thêm biến mới theo điều kiện với <code>mutate_if</code> &amp; <code>mutate_at</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tng-hp-d-liu-theo-iu-kin-vi-summarise_at-va-summarise_if"><i class="fa fa-check"></i><b>2.3.3</b> Tổng hợp dữ liệu theo điều kiện với <code>summarise_at</code> và <code>summarise_if</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html"><i class="fa fa-check"></i><b>3</b> Phân rã và xoay chiều dữ liệu</a><ul>
<li class="chapter" data-level="3.1" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#phan-ra-d-liu-thanh-dang-doc-vi-gather"><i class="fa fa-check"></i><b>3.1</b> Phân rã dữ liệu thành dạng dọc với <code>gather</code></a></li>
<li class="chapter" data-level="3.2" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#xoay-chiu-d-liu-vi-spread"><i class="fa fa-check"></i><b>3.2</b> Xoay chiều dữ liệu với <code>spread</code></a></li>
<li class="chapter" data-level="3.3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#tach-mt-bin-thanh-nhiu-bin-vi-separate"><i class="fa fa-check"></i><b>3.3</b> Tách một biến thành nhiều biến với <code>separate</code></a></li>
<li class="chapter" data-level="3.4" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#gp-nhiu-bin-thanh-mt-bin-vi-unite"><i class="fa fa-check"></i><b>3.4</b> Gộp nhiều biến thành một biến với <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html"><i class="fa fa-check"></i><b>4</b> Các chỉ số thống kê mô tả cơ bản</a><ul>
<li class="chapter" data-level="4.1" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#correlation"><i class="fa fa-check"></i><b>4.1</b> Correlation</a></li>
<li class="chapter" data-level="4.2" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#anova"><i class="fa fa-check"></i><b>4.2</b> ANOVA</a></li>
<li class="chapter" data-level="4.3" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#kim-inh-quan-h-chi-binh-phuong"><i class="fa fa-check"></i><b>4.3</b> Kiểm định quan hệ Chi-bình phương</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html"><i class="fa fa-check"></i><b>5</b> Lập trình hàm</a><ul>
<li class="chapter" data-level="5.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#quotes-vs.-unquotes"><i class="fa fa-check"></i><b>5.1</b> <strong>Quotes</strong> vs. <strong>Unquotes</strong></a></li>
<li class="chapter" data-level="5.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hp-dung-quo_name"><i class="fa fa-check"></i><b>5.2</b> Trường hợp dùng <code>quo_name</code></a></li>
<li class="chapter" data-level="5.3" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hop-nhiu-bin"><i class="fa fa-check"></i><b>5.3</b> Trường họp nhiều biến</a></li>
<li class="chapter" data-level="5.4" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ng-dung"><i class="fa fa-check"></i><b>5.4</b> Ứng dụng</a><ul>
<li class="chapter" data-level="5.4.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ham-tinh-toan-tng-hp-nhiu-bin"><i class="fa fa-check"></i><b>5.4.1</b> Hàm tính toán tổng hợp nhiều biến</a></li>
<li class="chapter" data-level="5.4.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ve--thi-vi-ggplot2"><i class="fa fa-check"></i><b>5.4.2</b> Vẽ đồ thị với ggplot2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html"><i class="fa fa-check"></i><b>6</b> Lập trình chức năng hàm với purrr</a><ul>
<li class="chapter" data-level="6.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#nhom-ham-map"><i class="fa fa-check"></i><b>6.1</b> Nhóm hàm map</a></li>
<li class="chapter" data-level="6.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#sa-i-gia-tri-vi-modify"><i class="fa fa-check"></i><b>6.2</b> Sửa đổi giá trị với <code>modify</code></a></li>
<li class="chapter" data-level="6.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#tao-ham-nhanh-vi-as_mapper"><i class="fa fa-check"></i><b>6.3</b> Tạo hàm nhanh với <code>as_mapper</code></a></li>
<li class="chapter" data-level="6.4" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#xay-dng-chui-cac-ham-lien-tip-vi-compose"><i class="fa fa-check"></i><b>6.4</b> Xây dựng chuỗi các hàm liên tiếp với <code>compose</code></a></li>
<li class="chapter" data-level="6.5" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#ng-dung-1"><i class="fa fa-check"></i><b>6.5</b> Ứng dụng</a><ul>
<li class="chapter" data-level="6.5.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#bin-i-d-liu-vi-modify-va-map_df"><i class="fa fa-check"></i><b>6.5.1</b> Biến đổi dữ liệu với <code>modify</code> và <code>map_df</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-nhom-khac-nhau-cung-luc"><i class="fa fa-check"></i><b>6.5.2</b> Phân tích nhiều nhóm khác nhau cùng lúc</a></li>
<li class="chapter" data-level="6.5.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-bin-trong-dataframe-cung-luc"><i class="fa fa-check"></i><b>6.5.3</b> Phân tích nhiều biến trong dataframe cùng lúc</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html"><i class="fa fa-check"></i><b>7</b> Biến đổi dữ liệu text</a><ul>
<li class="chapter" data-level="7.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#gii-thiu"><i class="fa fa-check"></i><b>7.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="7.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#regular-expression"><i class="fa fa-check"></i><b>7.2</b> Regular expression</a><ul>
<li class="chapter" data-level="7.2.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#metadata"><i class="fa fa-check"></i><b>7.2.1</b> Metadata</a></li>
<li class="chapter" data-level="7.2.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#sequences"><i class="fa fa-check"></i><b>7.2.2</b> Sequences</a></li>
<li class="chapter" data-level="7.2.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#character-class"><i class="fa fa-check"></i><b>7.2.3</b> Character class</a></li>
<li class="chapter" data-level="7.2.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#posix-class"><i class="fa fa-check"></i><b>7.2.4</b> POSIX class</a></li>
<li class="chapter" data-level="7.2.5" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#quantifiers"><i class="fa fa-check"></i><b>7.2.5</b> Quantifiers</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#cac-vi-du-tng-hp"><i class="fa fa-check"></i><b>7.3</b> Các ví dụ tổng hợp</a><ul>
<li class="chapter" data-level="7.3.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-1"><i class="fa fa-check"></i><b>7.3.1</b> Ví dụ 1</a></li>
<li class="chapter" data-level="7.3.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-2"><i class="fa fa-check"></i><b>7.3.2</b> Ví dụ 2</a></li>
<li class="chapter" data-level="7.3.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-3"><i class="fa fa-check"></i><b>7.3.3</b> Ví dụ 3</a></li>
<li class="chapter" data-level="7.3.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-4"><i class="fa fa-check"></i><b>7.3.4</b> Ví dụ 4</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#tai-liu-tham-khao"><i class="fa fa-check"></i><b>7.4</b> Tài liệu tham khảo</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><a href="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><i class="fa fa-check"></i><b>8</b> Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="chapter" data-level="9" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html"><i class="fa fa-check"></i><b>9</b> Các nguyên lý dự báo</a><ul>
<li class="chapter" data-level="9.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#gii-thiu-1"><i class="fa fa-check"></i><b>9.1</b> Giới thiệu</a><ul>
<li class="chapter" data-level="9.1.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nhanh-trong-hoc-may-machine-learning"><i class="fa fa-check"></i><b>9.1.1</b> Các nhánh trong học máy (machine learning)</a></li>
<li class="chapter" data-level="9.1.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cach-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>9.1.2</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="9.1.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#s-dung-mo-hinh"><i class="fa fa-check"></i><b>9.1.3</b> Sử dụng mô hình</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nguyen-ly-trong-d-bao"><i class="fa fa-check"></i><b>9.2</b> Các nguyên lý trong dự báo</a><ul>
<li class="chapter" data-level="9.2.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#reducible-vs.-irreducible-error"><i class="fa fa-check"></i><b>9.2.1</b> Reducible vs. irreducible error</a></li>
<li class="chapter" data-level="9.2.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#kha-nang-giai-thich-va-kha-nang-d-bao"><i class="fa fa-check"></i><b>9.2.2</b> Khả năng giải thích và khả năng dự báo</a></li>
<li class="chapter" data-level="9.2.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#mo-hinh-co-tham-s-cho-truc-hoc-khong-co-tham-s-cho-truc-parametric-vs.-nonparametric"><i class="fa fa-check"></i><b>9.2.3</b> Mô hình có tham số cho trước hoặc không có tham số cho trước (Parametric vs. Nonparametric)</a></li>
<li class="chapter" data-level="9.2.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#nguyen-ly-ch-u"><i class="fa fa-check"></i><b>9.2.4</b> Nguyên lý chữ U</a></li>
<li class="chapter" data-level="9.2.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#bias-variance-trade-off"><i class="fa fa-check"></i><b>9.2.5</b> Bias Variance Trade-Off</a></li>
<li class="chapter" data-level="9.2.6" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#overfitting-regularization"><i class="fa fa-check"></i><b>9.2.6</b> Overfitting &amp; regularization</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#quy-trinh-xay-dng-mo-hinh-d-bao"><i class="fa fa-check"></i><b>9.3</b> Quy trình xây dựng mô hình dự báo</a></li>
<li class="chapter" data-level="9.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#ensemble-methods"><i class="fa fa-check"></i><b>9.4</b> Ensemble methods</a></li>
<li class="chapter" data-level="9.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#luu-y"><i class="fa fa-check"></i><b>9.5</b> Lưu ý</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html"><i class="fa fa-check"></i><b>10</b> Mô hình OLS</a><ul>
<li class="chapter" data-level="10.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#gii-thiu-2"><i class="fa fa-check"></i><b>10.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="10.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#xay-dng-mo-hinh-co-ban"><i class="fa fa-check"></i><b>10.2</b> Xây dựng mô hình cơ bản</a><ul>
<li class="chapter" data-level="10.2.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#mo-hinh-hi-quy-on-bin"><i class="fa fa-check"></i><b>10.2.1</b> Mô hình hồi quy đơn biến</a></li>
<li class="chapter" data-level="10.2.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#din-giai-mo-hinh"><i class="fa fa-check"></i><b>10.2.2</b> Diễn giải mô hình</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#anh-gia-cht-lung-mo-hinh"><i class="fa fa-check"></i><b>10.3</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="10.3.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#sai-s-cua-mo-hinh"><i class="fa fa-check"></i><b>10.3.1</b> Sai số của mô hình</a></li>
<li class="chapter" data-level="10.3.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#r-binh-phuong-r2"><i class="fa fa-check"></i><b>10.3.2</b> R bình phương <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="10.3.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#f-statistic"><i class="fa fa-check"></i><b>10.3.3</b> F statistic</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#d-bao"><i class="fa fa-check"></i><b>10.4</b> Dự báo</a></li>
<li class="chapter" data-level="10.5" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#thut-toan-ti-uu-vi-gradient-decent"><i class="fa fa-check"></i><b>10.5</b> Thuật toán tối ưu với gradient decent</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html"><i class="fa fa-check"></i><b>11</b> Mô hình hồi quy logistic</a><ul>
<li class="chapter" data-level="11.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cach-xay-dng-mo-hinh-1"><i class="fa fa-check"></i><b>11.1</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="11.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#vi-du-xay-dng-mo-hinh-on-gian"><i class="fa fa-check"></i><b>11.2</b> Ví dụ xây dựng mô hình đơn giản</a></li>
<li class="chapter" data-level="11.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cac-chi-s-cn-quan-tam-khac"><i class="fa fa-check"></i><b>11.3</b> Các chỉ số cần quan tâm khác</a></li>
<li class="chapter" data-level="11.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#anh-gia-cht-lung-mo-hinh-1"><i class="fa fa-check"></i><b>11.4</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="11.4.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#confusion-matrix"><i class="fa fa-check"></i><b>11.4.1</b> Confusion Matrix</a></li>
<li class="chapter" data-level="11.4.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#roc"><i class="fa fa-check"></i><b>11.4.2</b> ROC</a></li>
<li class="chapter" data-level="11.4.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#gain-va-lift"><i class="fa fa-check"></i><b>11.4.3</b> Gain và Lift</a></li>
<li class="chapter" data-level="11.4.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#kolmogorovsmirnov-statistics"><i class="fa fa-check"></i><b>11.4.4</b> Kolmogorov–Smirnov statistics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#thc-hanh"><i class="fa fa-check"></i><b>11.5</b> Thực hành</a><ul>
<li class="chapter" data-level="11.5.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#d-liu"><i class="fa fa-check"></i><b>11.5.1</b> Dữ liệu</a></li>
<li class="chapter" data-level="11.5.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-tp-d-liu-gc"><i class="fa fa-check"></i><b>11.5.2</b> Xây dựng mô hình trên tập dữ liệu gốc</a></li>
<li class="chapter" data-level="11.5.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-hai-tp-train-va-test"><i class="fa fa-check"></i><b>11.5.3</b> Xây dựng mô hình trên hai tập train và test</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-logistics-theo-machine-learning"><i class="fa fa-check"></i><b>11.6</b> Xây dựng mô hình Logistics theo Machine Learning</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html"><i class="fa fa-check"></i><b>12</b> Cây quyết định</a><ul>
<li class="chapter" data-level="12.1" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#gii-thiu-3"><i class="fa fa-check"></i><b>12.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="12.2" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#regression-trees"><i class="fa fa-check"></i><b>12.2</b> Regression Trees</a></li>
<li class="chapter" data-level="12.3" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#classification-trees"><i class="fa fa-check"></i><b>12.3</b> Classification Trees</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html"><i class="fa fa-check"></i><b>13</b> Bagging - Boosting và Random Forest</a><ul>
<li class="chapter" data-level="13.1" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#bagging"><i class="fa fa-check"></i><b>13.1</b> Bagging</a></li>
<li class="chapter" data-level="13.2" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#random-forests"><i class="fa fa-check"></i><b>13.2</b> Random Forests</a></li>
<li class="chapter" data-level="13.3" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#boosting"><i class="fa fa-check"></i><b>13.3</b> Boosting</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>14</b> Unsupervised learning</a></li>
<li class="chapter" data-level="15" data-path="k-means.html"><a href="k-means.html"><i class="fa fa-check"></i><b>15</b> k-means</a><ul>
<li class="chapter" data-level="15.1" data-path="k-means.html"><a href="k-means.html#gii-thiu-4"><i class="fa fa-check"></i><b>15.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="15.2" data-path="k-means.html"><a href="k-means.html#thut-toan"><i class="fa fa-check"></i><b>15.2</b> Thuật toán</a></li>
<li class="chapter" data-level="15.3" data-path="k-means.html"><a href="k-means.html#uu-nhuc-im-cua-k-means"><i class="fa fa-check"></i><b>15.3</b> Ưu nhược điểm của K-means</a></li>
<li class="chapter" data-level="15.4" data-path="k-means.html"><a href="k-means.html#thc-hanh-tren-r"><i class="fa fa-check"></i><b>15.4</b> Thực hành trên R</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html"><i class="fa fa-check"></i><b>16</b> Phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="16.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-khai-nim-co-ban"><i class="fa fa-check"></i><b>16.1</b> Các khái niệm cơ bản</a></li>
<li class="chapter" data-level="16.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cach-thc-hin-mo-hinh"><i class="fa fa-check"></i><b>16.2</b> Cách thực hiện mô hình</a></li>
<li class="chapter" data-level="16.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#ba-cau-hoi-khi-phan-tich-gio-hang"><i class="fa fa-check"></i><b>16.3</b> Ba câu hỏi khi phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="16.3.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-san-phm-nao-hay-uc-mua-cung-nhau"><i class="fa fa-check"></i><b>16.3.1</b> Các sản phẩm nào hay được mua cùng nhau</a></li>
<li class="chapter" data-level="16.3.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-a-thi-se-mua-san-phm-nao-tip-theo"><i class="fa fa-check"></i><b>16.3.2</b> Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</a></li>
<li class="chapter" data-level="16.3.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-gi-thi-se-mua-tip-san-phm-a"><i class="fa fa-check"></i><b>16.3.3</b> Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#uu-nhuc-im"><i class="fa fa-check"></i><b>16.4</b> Ưu nhược điểm</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>17</b> Feature Engineering</a><ul>
<li class="chapter" data-level="17.1" data-path="feature-engineering.html"><a href="feature-engineering.html#feature-engineering-cho-cac-bin-nhom"><i class="fa fa-check"></i><b>17.1</b> Feature engineering cho các biến nhóm</a><ul>
<li class="chapter" data-level="17.1.1" data-path="feature-engineering.html"><a href="feature-engineering.html#tao-d-liu-gia-dummy-data-cho-bin-khong-phan-bit-th-t"><i class="fa fa-check"></i><b>17.1.1</b> Tạo dữ liệu giả (dummy data) cho biến không phân biệt thứ tự</a></li>
<li class="chapter" data-level="17.1.2" data-path="feature-engineering.html"><a href="feature-engineering.html#d-liu-co-rt-nhiu-nhom"><i class="fa fa-check"></i><b>17.1.2</b> Dữ liệu có rất nhiều nhóm</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="feature-engineering.html"><a href="feature-engineering.html#cac-bin-lien-tuc"><i class="fa fa-check"></i><b>17.2</b> Các biến liên tục</a><ul>
<li class="chapter" data-level="17.2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#bin-i-11"><i class="fa fa-check"></i><b>17.2.1</b> Biến đổi 1:1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Chuỗi thời gian</b></span></li>
<li class="chapter" data-level="18" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html"><i class="fa fa-check"></i><b>18</b> Giới thiệu về chuỗi thời gian</a><ul>
<li class="chapter" data-level="18.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#thanh-phn-cua-chui-thi-gian"><i class="fa fa-check"></i><b>18.1</b> Thành phần của chuỗi thời gian</a></li>
<li class="chapter" data-level="18.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#d-liu-chui-thi-gian"><i class="fa fa-check"></i><b>18.2</b> Dữ liệu chuỗi thời gian</a></li>
<li class="chapter" data-level="18.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#smoothing"><i class="fa fa-check"></i><b>18.3</b> Smoothing</a></li>
<li class="chapter" data-level="18.4" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#seasonal-decomposition"><i class="fa fa-check"></i><b>18.4</b> Seasonal decomposition</a></li>
<li class="chapter" data-level="18.5" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#exponential-forecasting-model"><i class="fa fa-check"></i><b>18.5</b> Exponential Forecasting Model</a><ul>
<li class="chapter" data-level="18.5.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#single-exponential-model"><i class="fa fa-check"></i><b>18.5.1</b> Single Exponential Model</a></li>
<li class="chapter" data-level="18.5.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#hold-holt-winters-exponential-smoothing"><i class="fa fa-check"></i><b>18.5.2</b> Hold &amp; Holt-Winters exponential smoothing</a></li>
<li class="chapter" data-level="18.5.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#t-ng-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>18.5.3</b> Tự động xây dựng mô hình</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html"><i class="fa fa-check"></i><b>19</b> Mô hình ARIMA</a><ul>
<li class="chapter" data-level="19.1" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#chui-thi-gian-dng"><i class="fa fa-check"></i><b>19.1</b> Chuỗi thời gian dừng</a></li>
<li class="chapter" data-level="19.2" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#mo-hinh-arima-1"><i class="fa fa-check"></i><b>19.2</b> Mô hình ARIMA</a></li>
<li class="chapter" data-level="19.3" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#vi-du-vi-r"><i class="fa fa-check"></i><b>19.3</b> Ví dụ với R</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><i class="fa fa-check"></i><b>20</b> Phân tích chuỗi thời gian với tidyquant và timetk</a><ul>
<li class="chapter" data-level="20.1" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#ly-d-liu-vi-package-tidyquant"><i class="fa fa-check"></i><b>20.1</b> Lấy dữ liệu với package tidyquant</a></li>
<li class="chapter" data-level="20.2" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#trc-quan-hoa-vi-geom_ma"><i class="fa fa-check"></i><b>20.2</b> Trực quan hóa với <code>geom_ma</code></a></li>
<li class="chapter" data-level="20.3" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#chuyn-t-dataframe-thanh-xts"><i class="fa fa-check"></i><b>20.3</b> Chuyển từ dataframe thành xts</a></li>
</ul></li>
<li class="part"><span><b>III Case study</b></span></li>
<li class="chapter" data-level="21" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html"><i class="fa fa-check"></i><b>21</b> Trực quan hóa dữ liệu</a><ul>
<li class="chapter" data-level="21.1" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-phu-ban-hang-theo-tng-nhom"><i class="fa fa-check"></i><b>21.1</b> Xây dựng phễu bán hàng theo từng nhóm</a></li>
<li class="chapter" data-level="21.2" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#ve-biu--warterfall-cho-aciveinactive-users"><i class="fa fa-check"></i><b>21.2</b> Vẽ biểu đồ warterfall cho acive/inactive users</a></li>
<li class="chapter" data-level="21.3" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-biu--lollipop-chart"><i class="fa fa-check"></i><b>21.3</b> Xây dựng biểu đồ lollipop chart</a></li>
<li class="chapter" data-level="21.4" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#trc-quan-hoa-cac-phn-trung-lp-nhau"><i class="fa fa-check"></i><b>21.4</b> Trực quan hóa các phần trùng lặp nhau</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html"><i class="fa fa-check"></i><b>22</b> Các mẹo trong R</a><ul>
<li class="chapter" data-level="22.1" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#hin-thi-s-binh-thung"><i class="fa fa-check"></i><b>22.1</b> Hiển thị số bình thường</a></li>
<li class="chapter" data-level="22.2" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#export-d-liu-ra-excel"><i class="fa fa-check"></i><b>22.2</b> Export dữ liệu ra excel</a></li>
<li class="chapter" data-level="22.3" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#lam-vic-khi-proxy-bi-chn"><i class="fa fa-check"></i><b>22.3</b> Làm việc khi proxy bị chặn</a></li>
<li class="chapter" data-level="22.4" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#t-ng-render-ra-kt-qua-phan-tich"><i class="fa fa-check"></i><b>22.4</b> Tự động render ra kết quả phân tích</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Anh Hoang Duc</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phân tích dữ liệu thực tế với R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lp-trinh-ham" class="section level1">
<h1><span class="header-section-number">Chương 5</span> Lập trình hàm</h1>
<p>Khi phân tích dữ liệu, một kỹ năng nâng cao giúp tăng năng suất phân tích là kỹ năng viết hàm. Về lý thuyết, bất cứ đoạn code nào cũng có thể chuyển thành hàm. Một hàm viết tốt phải đảm bảo 3 yếu tố chính:</p>
<ul>
<li><strong>Linh động</strong>: Có thể sử dụng trong nhiều tập dữ liệu khác nhau</li>
<li><strong>Ngắn gọn</strong>: Chỉ giải quyết 1 vấn đề cụ thể, không nên cho quá nhiều vấn đề trong một hàm.</li>
<li><strong>Mở rộng</strong>: Có thể mở rộng khi tăng số biến và giải quyết được vấn đề tổng quát</li>
</ul>
<p>Việc viết hàm là cả một nghệ thuật và đòi hỏi có sự hiểu biết sâu sắc về R. Tuy nhiên, khi đứng dưới góc độ ứng dụng, ta có thể viết hàm một cách nhanh chóng dựa trên khái niệm về NSE (Non Standard Evaluation).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="lp-trinh-ham.html#cb160-1"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</span>
<span id="cb160-2"><a href="lp-trinh-ham.html#cb160-2"></a><span class="kw">filter</span>(df, x <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span></code></pre>
<pre><code>##   x y
## 1 3 1</code></pre>
<p>Tuy nhiên, câu lệnh sau sẽ không hoạt động</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="lp-trinh-ham.html#cb162-1"></a><span class="co"># Cách 1: Không hoạt động</span></span>
<span id="cb162-2"><a href="lp-trinh-ham.html#cb162-2"></a>my_var &lt;-<span class="st"> </span>x</span></code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;x&#39; not found</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="lp-trinh-ham.html#cb164-1"></a>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(my_var <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre>
<pre><code>## Error in filter_impl(.data, quo): Evaluation error: object &#39;my_var&#39; not found.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="lp-trinh-ham.html#cb166-1"></a><span class="co"># Cách 2: Không hoạt động</span></span>
<span id="cb166-2"><a href="lp-trinh-ham.html#cb166-2"></a>my_var &lt;-<span class="st"> &quot;x&quot;</span></span>
<span id="cb166-3"><a href="lp-trinh-ham.html#cb166-3"></a>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(my_var <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre>
<pre><code>## [1] x y
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div id="quotes-vs.-unquotes" class="section level2">
<h2><span class="header-section-number">5.1</span> <strong>Quotes</strong> vs. <strong>Unquotes</strong></h2>
<ul>
<li><strong>Quotes</strong> là cách thức biến chỉ được lưu dưới dạng <em>string</em> mà chưa đề cập đến giá trị mà biến đó chứa.</li>
<li><strong>Unquote</strong> là việc tính toán giá trị mà biến thực sự lưu trữ.</li>
</ul>
<p>Ví dụ, <code>x &lt;- 5</code> thì <code>"x"</code> là quote vì chỉ lưu tên của biến dưới dạng string. <code>x = 5</code> là unquote vì đã tính đến giá trị thực sự mà x lưu trữ là 5.</p>
<p>Xem thêm ví dụ sau:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="lp-trinh-ham.html#cb168-1"></a>greet &lt;-<span class="st"> </span><span class="cf">function</span>(name){</span>
<span id="cb168-2"><a href="lp-trinh-ham.html#cb168-2"></a>  <span class="kw">print</span>(<span class="st">&quot;Hello, name!&quot;</span>)</span>
<span id="cb168-3"><a href="lp-trinh-ham.html#cb168-3"></a>}</span>
<span id="cb168-4"><a href="lp-trinh-ham.html#cb168-4"></a><span class="kw">greet</span>(<span class="st">&quot;duc anh&quot;</span>)</span></code></pre>
<pre><code>## [1] &quot;Hello, name!&quot;</code></pre>
<p>Hàm trên không hoạt động như chúng ta mong muốn vì <code>name</code> đang được <code>quotes</code> và chỉ lưu trữ dưới dạng string.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="lp-trinh-ham.html#cb170-1"></a>greet &lt;-<span class="st"> </span><span class="cf">function</span>(name){</span>
<span id="cb170-2"><a href="lp-trinh-ham.html#cb170-2"></a>  glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&quot;Hello, {name}!&quot;</span>)</span>
<span id="cb170-3"><a href="lp-trinh-ham.html#cb170-3"></a>}</span>
<span id="cb170-4"><a href="lp-trinh-ham.html#cb170-4"></a><span class="kw">greet</span>(<span class="st">&quot;duc anh&quot;</span>)</span></code></pre>
<pre><code>## Hello, duc anh!</code></pre>
<p>Ở hàm thứ hai, <code>name</code> được tính toán đến giá trị thực sự mà biến này đang lưu trữ (giá trị <code>duc anh</code>).</p>
<hr />
<p>Để <code>quotes</code>, ta dùng hàm <code>quo()</code>. Kết quả của <code>quo()</code> là <code>quosure</code>, một dạng của biểu thức (formula).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="lp-trinh-ham.html#cb172-1"></a><span class="kw">quo</span>(x)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^x
## env:  global</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="lp-trinh-ham.html#cb174-1"></a><span class="kw">quo</span>(a <span class="op">+</span><span class="st"> </span>b <span class="op">+</span><span class="st"> </span>c)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^a + b + c
## env:  global</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="lp-trinh-ham.html#cb176-1"></a><span class="kw">quo</span>(<span class="st">&quot;group_var&quot;</span>)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^&quot;group_var&quot;
## env:  empty</code></pre>
<p>Để sử dụng <code>quosure</code> trong hàm, ta sử dụng <code>enquo</code>. Sự khác biệt giữa <code>quo</code> và <code>enquo</code> có thể phân cấp như sau:</p>
<ul>
<li><code>quo</code>: Tạo <code>quosure</code> với biến</li>
<li><code>enquo</code>: Tạo <code>quosure</code> với <strong>giá trị</strong> của biến.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="lp-trinh-ham.html#cb178-1"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb178-2"><a href="lp-trinh-ham.html#cb178-2"></a></span>
<span id="cb178-3"><a href="lp-trinh-ham.html#cb178-3"></a><span class="co"># Ví dụ 1</span></span>
<span id="cb178-4"><a href="lp-trinh-ham.html#cb178-4"></a><span class="kw">quo</span>(x)  </span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^x
## env:  global</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="lp-trinh-ham.html#cb180-1"></a><span class="kw">enquo</span>(x)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^5
## env:  empty</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="lp-trinh-ham.html#cb182-1"></a><span class="co"># Ví dụ 2</span></span>
<span id="cb182-2"><a href="lp-trinh-ham.html#cb182-2"></a><span class="kw">quo</span>(x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^x + 2
## env:  global</code></pre>
<p>Để <code>unquote</code>, ta dùng hàm <code>!!</code> để tính các giá trị mà biến đang lưu trữ.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="lp-trinh-ham.html#cb184-1"></a>my_summarise &lt;-<span class="st"> </span><span class="cf">function</span>(df, group_var) {</span>
<span id="cb184-2"><a href="lp-trinh-ham.html#cb184-2"></a>  group_var &lt;-<span class="st"> </span><span class="kw">quo</span>(group_var)</span>
<span id="cb184-3"><a href="lp-trinh-ham.html#cb184-3"></a>  <span class="kw">print</span>(group_var)</span>
<span id="cb184-4"><a href="lp-trinh-ham.html#cb184-4"></a></span>
<span id="cb184-5"><a href="lp-trinh-ham.html#cb184-5"></a>  df <span class="op">%&gt;%</span></span>
<span id="cb184-6"><a href="lp-trinh-ham.html#cb184-6"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="op">!!</span><span class="st"> </span>group_var) <span class="op">%&gt;%</span></span>
<span id="cb184-7"><a href="lp-trinh-ham.html#cb184-7"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(mpg))</span>
<span id="cb184-8"><a href="lp-trinh-ham.html#cb184-8"></a>}</span>
<span id="cb184-9"><a href="lp-trinh-ham.html#cb184-9"></a><span class="kw">my_summarise</span>(mtcars, cyl)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^group_var
## env:  0000000007E9A490</code></pre>
<pre><code>## Error in grouped_df_impl(data, unname(vars), drop): Column `group_var` is unknown</code></pre>
<p>Câu lệnh trên không thực hiện được vì <code>quo(group_var)</code> sẽ trả ra kết quả là <code>^group_var</code>, giá trị này không tồn tại. Cái chúng ta cần là biểu thức (expression) dạng <code>^cyl</code>. Lúc này, ta phải dùng <code>enquo</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="lp-trinh-ham.html#cb187-1"></a>my_summarise &lt;-<span class="st"> </span><span class="cf">function</span>(df, group_var) {</span>
<span id="cb187-2"><a href="lp-trinh-ham.html#cb187-2"></a>  group_var &lt;-<span class="st"> </span><span class="kw">enquo</span>(group_var)</span>
<span id="cb187-3"><a href="lp-trinh-ham.html#cb187-3"></a>  <span class="kw">print</span>(group_var)</span>
<span id="cb187-4"><a href="lp-trinh-ham.html#cb187-4"></a></span>
<span id="cb187-5"><a href="lp-trinh-ham.html#cb187-5"></a>  df <span class="op">%&gt;%</span></span>
<span id="cb187-6"><a href="lp-trinh-ham.html#cb187-6"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="op">!!</span><span class="st"> </span>group_var) <span class="op">%&gt;%</span></span>
<span id="cb187-7"><a href="lp-trinh-ham.html#cb187-7"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(mpg))</span>
<span id="cb187-8"><a href="lp-trinh-ham.html#cb187-8"></a>}</span>
<span id="cb187-9"><a href="lp-trinh-ham.html#cb187-9"></a><span class="kw">my_summarise</span>(mtcars, cyl)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^cyl
## env:  global</code></pre>
<pre><code>## # A tibble: 3 x 2
##     cyl  mean
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     4  26.7
## 2     6  19.7
## 3     8  15.1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="lp-trinh-ham.html#cb190-1"></a>my_var &lt;-<span class="st"> </span><span class="kw">quo</span>(mpg)</span>
<span id="cb190-2"><a href="lp-trinh-ham.html#cb190-2"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(<span class="op">!!</span>my_var))</span></code></pre>
<pre><code>##       mean
## 1 20.09062</code></pre>
<p>Ta cũng có thể sử dụng <code>quo</code>, <code>enquo</code> với một nhóm các biểu thức như sau</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="lp-trinh-ham.html#cb192-1"></a>exp &lt;-<span class="st"> </span><span class="kw">quo</span>(<span class="kw">summarise</span>(</span>
<span id="cb192-2"><a href="lp-trinh-ham.html#cb192-2"></a>  mtcars, <span class="kw">mean</span>(mpg)</span>
<span id="cb192-3"><a href="lp-trinh-ham.html#cb192-3"></a>))</span>
<span id="cb192-4"><a href="lp-trinh-ham.html#cb192-4"></a>exp</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^summarise(mtcars, mean(mpg))
## env:  global</code></pre>
</div>
<div id="trung-hp-dung-quo_name" class="section level2">
<h2><span class="header-section-number">5.2</span> Trường hợp dùng <code>quo_name</code></h2>
<p><code>quo_name</code> cho phép convert biểu thức thành dạng string.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="lp-trinh-ham.html#cb194-1"></a>x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb194-2"><a href="lp-trinh-ham.html#cb194-2"></a><span class="kw">quo</span>(x)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^x
## env:  global</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="lp-trinh-ham.html#cb196-1"></a><span class="kw">quo</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">quo_name</span>()</span></code></pre>
<pre><code>## [1] &quot;x&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="lp-trinh-ham.html#cb198-1"></a><span class="kw">enquo</span>(x)</span></code></pre>
<pre><code>## &lt;quosure&gt;
## expr: ^5
## env:  empty</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="lp-trinh-ham.html#cb200-1"></a><span class="kw">enquo</span>(x) <span class="op">%&gt;%</span><span class="st"> </span>quo_name</span></code></pre>
<pre><code>## [1] &quot;5&quot;</code></pre>
<p><strong>Lưu ý</strong>:</p>
<ul>
<li>Khi tạo các biến mới hoặc sử dụng dấu gán trong hàm khi lập trình, cần dùng dấu <code>:=</code></li>
<li>Giá trị được gán (bên trái dấu gán) phải có <code>!!</code></li>
</ul>
<hr />
<ul>
<li>Ví dụ khi sử dụng với rename</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="lp-trinh-ham.html#cb202-1"></a>my_rename &lt;-<span class="st"> </span><span class="cf">function</span>(data, var){</span>
<span id="cb202-2"><a href="lp-trinh-ham.html#cb202-2"></a>  var &lt;-<span class="st"> </span><span class="kw">enquo</span>(var)</span>
<span id="cb202-3"><a href="lp-trinh-ham.html#cb202-3"></a>  new_var &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;new_&quot;</span>, <span class="kw">quo_name</span>(var))</span>
<span id="cb202-4"><a href="lp-trinh-ham.html#cb202-4"></a>  data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb202-5"><a href="lp-trinh-ham.html#cb202-5"></a><span class="st">    </span><span class="kw">rename</span>(<span class="op">!!</span><span class="dt">new_var :=</span> <span class="op">!!</span>var)</span>
<span id="cb202-6"><a href="lp-trinh-ham.html#cb202-6"></a>  <span class="kw">return</span>(data)</span>
<span id="cb202-7"><a href="lp-trinh-ham.html#cb202-7"></a>}</span>
<span id="cb202-8"><a href="lp-trinh-ham.html#cb202-8"></a><span class="kw">my_rename</span>(mtcars, mpg) <span class="op">%&gt;%</span><span class="st"> </span>head</span></code></pre>
<pre><code>##                   new_mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4            21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag        21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710           22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive       21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout    18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant              18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<ul>
<li>Khi sử dụng với <code>mutate</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="lp-trinh-ham.html#cb204-1"></a>my_mutate &lt;-<span class="st"> </span><span class="cf">function</span>(data, var){</span>
<span id="cb204-2"><a href="lp-trinh-ham.html#cb204-2"></a>  var &lt;-<span class="st"> </span><span class="kw">enquo</span>(var)</span>
<span id="cb204-3"><a href="lp-trinh-ham.html#cb204-3"></a>  data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb204-4"><a href="lp-trinh-ham.html#cb204-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="op">!!</span><span class="st">&quot;new_var&quot;</span> <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="op">!!</span>var<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb204-5"><a href="lp-trinh-ham.html#cb204-5"></a>  <span class="kw">return</span>(data)</span>
<span id="cb204-6"><a href="lp-trinh-ham.html#cb204-6"></a>}</span>
<span id="cb204-7"><a href="lp-trinh-ham.html#cb204-7"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb204-8"><a href="lp-trinh-ham.html#cb204-8"></a><span class="st">  </span><span class="kw">select</span>(mpg) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb204-9"><a href="lp-trinh-ham.html#cb204-9"></a><span class="st">  </span><span class="kw">my_mutate</span>(mpg) <span class="op">%&gt;%</span><span class="st"> </span>head</span></code></pre>
<pre><code>##    mpg new_var
## 1 21.0    42.0
## 2 21.0    42.0
## 3 22.8    45.6
## 4 21.4    42.8
## 5 18.7    37.4
## 6 18.1    36.2</code></pre>
</div>
<div id="trung-hop-nhiu-bin" class="section level2">
<h2><span class="header-section-number">5.3</span> Trường họp nhiều biến</h2>
<ul>
<li>Khi có nhiều biến, ta dùng <code>quos(...)</code> &amp; <code>!!!</code> thay cho <code>enquo</code> và <code>!!</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="lp-trinh-ham.html#cb206-1"></a>my_summarise &lt;-<span class="st"> </span><span class="cf">function</span>(df, value_var,...){</span>
<span id="cb206-2"><a href="lp-trinh-ham.html#cb206-2"></a>  group_var &lt;-<span class="st"> </span><span class="kw">quos</span>(...)</span>
<span id="cb206-3"><a href="lp-trinh-ham.html#cb206-3"></a>  value_var &lt;-<span class="st"> </span><span class="kw">enquo</span>(value_var)</span>
<span id="cb206-4"><a href="lp-trinh-ham.html#cb206-4"></a>  df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(<span class="op">!!!</span>group_var) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb206-5"><a href="lp-trinh-ham.html#cb206-5"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(<span class="op">!!</span>value_var))</span>
<span id="cb206-6"><a href="lp-trinh-ham.html#cb206-6"></a>}</span>
<span id="cb206-7"><a href="lp-trinh-ham.html#cb206-7"></a>  </span>
<span id="cb206-8"><a href="lp-trinh-ham.html#cb206-8"></a><span class="kw">my_summarise</span>(mtcars, mpg, cyl, vs)</span></code></pre>
<pre><code>## # A tibble: 5 x 3
## # Groups:   cyl [?]
##     cyl    vs  mean
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     4     0  26  
## 2     4     1  26.7
## 3     6     0  20.6
## 4     6     1  19.1
## 5     8     0  15.1</code></pre>
<p><strong>Lưu ý</strong>: Trong thực tế, khi không muốn viết hàm mà vẫn có thể sử dụng ứng dụng của toán tử <code>!</code>, ta có thể sử dụng toán tử <code>!!!</code> nhu sau.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="lp-trinh-ham.html#cb208-1"></a>my_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;cyl&quot;</span>)</span>
<span id="cb208-2"><a href="lp-trinh-ham.html#cb208-2"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">!!!</span>my_var) <span class="op">%&gt;%</span><span class="st"> </span>head</span></code></pre>
<pre><code>##                    mpg cyl
## Mazda RX4         21.0   6
## Mazda RX4 Wag     21.0   6
## Datsun 710        22.8   4
## Hornet 4 Drive    21.4   6
## Hornet Sportabout 18.7   8
## Valiant           18.1   6</code></pre>
</div>
<div id="ng-dung" class="section level2">
<h2><span class="header-section-number">5.4</span> Ứng dụng</h2>
<div id="ham-tinh-toan-tng-hp-nhiu-bin" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Hàm tính toán tổng hợp nhiều biến</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="lp-trinh-ham.html#cb210-1"></a>analytics_summarise &lt;-<span class="st"> </span><span class="cf">function</span>(data, value_var,...){</span>
<span id="cb210-2"><a href="lp-trinh-ham.html#cb210-2"></a>  group_var &lt;-<span class="st"> </span><span class="kw">quos</span>(...)</span>
<span id="cb210-3"><a href="lp-trinh-ham.html#cb210-3"></a>  value_var &lt;-<span class="st"> </span><span class="kw">enquo</span>(value_var)</span>
<span id="cb210-4"><a href="lp-trinh-ham.html#cb210-4"></a>  data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb210-5"><a href="lp-trinh-ham.html#cb210-5"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="op">!!!</span>group_var) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb210-6"><a href="lp-trinh-ham.html#cb210-6"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(),</span>
<span id="cb210-7"><a href="lp-trinh-ham.html#cb210-7"></a>              <span class="dt">total =</span> <span class="kw">sum</span>(<span class="op">!!</span>value_var),</span>
<span id="cb210-8"><a href="lp-trinh-ham.html#cb210-8"></a>              <span class="dt">min =</span> <span class="kw">min</span>(<span class="op">!!</span>value_var),</span>
<span id="cb210-9"><a href="lp-trinh-ham.html#cb210-9"></a>              <span class="dt">q25 =</span> <span class="kw">quantile</span>(<span class="op">!!</span>value_var, <span class="fl">0.25</span>, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-10"><a href="lp-trinh-ham.html#cb210-10"></a>              <span class="dt">q50 =</span> <span class="kw">quantile</span>(<span class="op">!!</span>value_var, <span class="fl">0.50</span>, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-11"><a href="lp-trinh-ham.html#cb210-11"></a>              <span class="dt">q75 =</span> <span class="kw">quantile</span>(<span class="op">!!</span>value_var, <span class="fl">0.75</span>, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-12"><a href="lp-trinh-ham.html#cb210-12"></a>              <span class="dt">q90 =</span> <span class="kw">quantile</span>(<span class="op">!!</span>value_var, <span class="fl">0.90</span>, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-13"><a href="lp-trinh-ham.html#cb210-13"></a>              <span class="dt">q95 =</span> <span class="kw">quantile</span>(<span class="op">!!</span>value_var, <span class="fl">0.95</span>, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-14"><a href="lp-trinh-ham.html#cb210-14"></a>              <span class="dt">max =</span> <span class="kw">max</span>(<span class="op">!!</span>value_var),</span>
<span id="cb210-15"><a href="lp-trinh-ham.html#cb210-15"></a>              <span class="dt">mean =</span> <span class="kw">mean</span>(<span class="op">!!</span>value_var, <span class="dt">na.rm =</span> T),</span>
<span id="cb210-16"><a href="lp-trinh-ham.html#cb210-16"></a>              <span class="dt">mean_trimed =</span> <span class="kw">mean</span>(<span class="op">!!</span>value_var, <span class="dt">trim =</span> <span class="fl">0.1</span>, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb210-17"><a href="lp-trinh-ham.html#cb210-17"></a><span class="st">    </span>ungroup -&gt;<span class="st"> </span>result</span>
<span id="cb210-18"><a href="lp-trinh-ham.html#cb210-18"></a>  <span class="kw">return</span>(result)</span>
<span id="cb210-19"><a href="lp-trinh-ham.html#cb210-19"></a>}</span>
<span id="cb210-20"><a href="lp-trinh-ham.html#cb210-20"></a></span>
<span id="cb210-21"><a href="lp-trinh-ham.html#cb210-21"></a><span class="co"># Một biến</span></span>
<span id="cb210-22"><a href="lp-trinh-ham.html#cb210-22"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb210-23"><a href="lp-trinh-ham.html#cb210-23"></a><span class="st">  </span><span class="kw">analytics_summarise</span>(mpg, cyl)</span></code></pre>
<pre><code>## # A tibble: 3 x 12
##     cyl     n total   min   q25   q50   q75   q90   q95   max  mean
##   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     4    11  293.  21.4  22.8  26    30.4  32.4  33.2  33.9  26.7
## 2     6     7  138.  17.8  18.6  19.7  21    21.2  21.3  21.4  19.7
## 3     8    14  211.  10.4  14.4  15.2  16.2  18.3  18.9  19.2  15.1
## # ... with 1 more variable: mean_trimed &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="lp-trinh-ham.html#cb212-1"></a><span class="co"># Nhiều biến</span></span>
<span id="cb212-2"><a href="lp-trinh-ham.html#cb212-2"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb212-3"><a href="lp-trinh-ham.html#cb212-3"></a><span class="st">  </span><span class="kw">analytics_summarise</span>(mpg, cyl, am)</span></code></pre>
<pre><code>## # A tibble: 6 x 13
##     cyl    am     n total   min   q25   q50   q75   q90   q95   max  mean
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     4     0     3  68.7  21.5  22.2  22.8  23.6  24.1  24.2  24.4  22.9
## 2     4     1     8 225.   21.4  25.2  28.8  30.9  32.8  33.4  33.9  28.1
## 3     6     0     4  76.5  17.8  18.0  18.6  19.8  20.7  21.1  21.4  19.1
## 4     6     1     3  61.7  19.7  20.4  21    21    21    21    21    20.6
## 5     8     0    12 181.   10.4  14.0  15.2  16.6  18.6  18.9  19.2  15.0
## 6     8     1     2  30.8  15    15.2  15.4  15.6  15.7  15.8  15.8  15.4
## # ... with 1 more variable: mean_trimed &lt;dbl&gt;</code></pre>
</div>
<div id="ve--thi-vi-ggplot2" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Vẽ đồ thị với ggplot2</h3>
<p>Tương tự với dplyr, lập trình NSE có thể sử dụng đơn giản với ggplot2.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="lp-trinh-ham.html#cb214-1"></a>my_chart &lt;-<span class="st"> </span><span class="cf">function</span>(data, value_var, group_var){</span>
<span id="cb214-2"><a href="lp-trinh-ham.html#cb214-2"></a>  value_var &lt;-<span class="st"> </span><span class="kw">enquo</span>(value_var)</span>
<span id="cb214-3"><a href="lp-trinh-ham.html#cb214-3"></a>  group_var &lt;-<span class="st"> </span><span class="kw">enquo</span>(group_var)</span>
<span id="cb214-4"><a href="lp-trinh-ham.html#cb214-4"></a>  data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb214-5"><a href="lp-trinh-ham.html#cb214-5"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="op">!!</span>group_var, <span class="op">!!</span>value_var)) <span class="op">+</span></span>
<span id="cb214-6"><a href="lp-trinh-ham.html#cb214-6"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb214-7"><a href="lp-trinh-ham.html#cb214-7"></a>             <span class="kw">aes</span>(<span class="dt">fill =</span> <span class="op">!!</span>group_var)) <span class="op">+</span></span>
<span id="cb214-8"><a href="lp-trinh-ham.html#cb214-8"></a><span class="st">    </span><span class="kw">theme_minimal</span>()</span>
<span id="cb214-9"><a href="lp-trinh-ham.html#cb214-9"></a>}</span>
<span id="cb214-10"><a href="lp-trinh-ham.html#cb214-10"></a>mtcars <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb214-11"><a href="lp-trinh-ham.html#cb214-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cyl =</span> <span class="kw">as.factor</span>(cyl)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb214-12"><a href="lp-trinh-ham.html#cb214-12"></a><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb214-13"><a href="lp-trinh-ham.html#cb214-13"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mpg =</span> <span class="kw">sum</span>(mpg)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb214-14"><a href="lp-trinh-ham.html#cb214-14"></a><span class="st">  </span><span class="kw">my_chart</span>(mpg, cyl)</span></code></pre>
<p><img src="06-lap-trinh-ham_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cac-chi-s-thng-ke-mo-ta-co-ban.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lp-trinh-chc-nang-ham-vi-purrr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"split_by": "rmd"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

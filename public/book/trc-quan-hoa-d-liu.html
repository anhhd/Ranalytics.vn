<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R</title>
  <meta name="description" content="Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R" />
  <meta name="generator" content="bookdown 0.11.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R" />
  <meta name="github-repo" content="yihui/bookdown-crc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R" />
  
  <meta name="twitter:description" content="Chương 20 Trực quan hóa dữ liệu | Phân tích dữ liệu thực tế với R" />
  

<meta name="author" content="Hoàng Đức Anh" />


<meta name="date" content="2019-07-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html">
<link rel="next" href="cac-meo-trong-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phân tích dữ liệu thực tế với R</a></li>

<li class="divider"></li>
<li class="part"><span><b>I Kỹ thuật phân tích dữ liệu thực tế</b></span></li>
<li class="chapter" data-level="1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><i class="fa fa-check"></i><b>1</b> Ngữ pháp của biến đổi dữ liệu với DPLYR</a><ul>
<li class="chapter" data-level="1.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#gii-thiu-v-pipe-operator"><i class="fa fa-check"></i><b>1.1</b> Giới thiệu về pipe operator</a></li>
<li class="chapter" data-level="1.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-co-ban-trong-dplyr"><i class="fa fa-check"></i><b>1.2</b> Các hàm cơ bản trong dplyr</a><ul>
<li class="chapter" data-level="1.2.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-truy-vn-d-liu"><i class="fa fa-check"></i><b>1.2.1</b> Nhóm câu lệnh truy vấn dữ liệu</a></li>
<li class="chapter" data-level="1.2.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-cau-lnh-bin-i-d-liu"><i class="fa fa-check"></i><b>1.2.2</b> Nhóm câu lệnh biến đổi dữ liệu</a></li>
<li class="chapter" data-level="1.2.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#nhom-ham-tng-hp-d-liu-vi-summarise"><i class="fa fa-check"></i><b>1.2.3</b> Nhóm hàm tổng hợp dữ liệu với <code>summarise</code></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#cac-ham-nang-cao-trong-dplyr"><i class="fa fa-check"></i><b>1.3</b> Các hàm nâng cao trong dplyr</a><ul>
<li class="chapter" data-level="1.3.1" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#iu-kin-phan-nhom-vi-case_when"><i class="fa fa-check"></i><b>1.3.1</b> Điều kiện phân nhóm với <code>case_when</code></a></li>
<li class="chapter" data-level="1.3.2" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tao-them-bin-mi-theo-iu-kin-vi-mutate_if-mutate_at"><i class="fa fa-check"></i><b>1.3.2</b> Tạo thêm biến mới theo điều kiện với <code>mutate_if</code> &amp; <code>mutate_at</code></a></li>
<li class="chapter" data-level="1.3.3" data-path="ng-phap-cua-bin-i-d-liu-vi-dplyr.html"><a href="ng-phap-cua-bin-i-d-liu-vi-dplyr.html#tng-hp-d-liu-theo-iu-kin-vi-summarise_at-va-summarise_if"><i class="fa fa-check"></i><b>1.3.3</b> Tổng hợp dữ liệu theo điều kiện với <code>summarise_at</code> và <code>summarise_if</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html"><i class="fa fa-check"></i><b>2</b> Phân rã và xoay chiều dữ liệu</a><ul>
<li class="chapter" data-level="2.1" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#phan-ra-d-liu-thanh-dang-doc-vi-gather"><i class="fa fa-check"></i><b>2.1</b> Phân rã dữ liệu thành dạng dọc với <code>gather</code></a></li>
<li class="chapter" data-level="2.2" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#xoay-chiu-d-liu-vi-spread"><i class="fa fa-check"></i><b>2.2</b> Xoay chiều dữ liệu với <code>spread</code></a></li>
<li class="chapter" data-level="2.3" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#tach-mt-bin-thanh-nhiu-bin-vi-separate"><i class="fa fa-check"></i><b>2.3</b> Tách một biến thành nhiều biến với <code>separate</code></a></li>
<li class="chapter" data-level="2.4" data-path="phan-ra-va-xoay-chiu-d-liu.html"><a href="phan-ra-va-xoay-chiu-d-liu.html#gp-nhiu-bin-thanh-mt-bin-vi-unite"><i class="fa fa-check"></i><b>2.4</b> Gộp nhiều biến thành một biến với <code>unite</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html"><i class="fa fa-check"></i><b>3</b> Các chỉ số thống kê mô tả cơ bản</a><ul>
<li class="chapter" data-level="3.1" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#correlation"><i class="fa fa-check"></i><b>3.1</b> Correlation</a></li>
<li class="chapter" data-level="3.2" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#anova"><i class="fa fa-check"></i><b>3.2</b> ANOVA</a></li>
<li class="chapter" data-level="3.3" data-path="cac-chi-s-thng-ke-mo-ta-co-ban.html"><a href="cac-chi-s-thng-ke-mo-ta-co-ban.html#kim-inh-quan-h-chi-binh-phuong"><i class="fa fa-check"></i><b>3.3</b> Kiểm định quan hệ Chi-bình phương</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html"><i class="fa fa-check"></i><b>4</b> Lập trình hàm</a><ul>
<li class="chapter" data-level="4.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#quotes-vs.-unquotes"><i class="fa fa-check"></i><b>4.1</b> <strong>Quotes</strong> vs. <strong>Unquotes</strong></a></li>
<li class="chapter" data-level="4.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hp-dung-quo_name"><i class="fa fa-check"></i><b>4.2</b> Trường hợp dùng <code>quo_name</code></a></li>
<li class="chapter" data-level="4.3" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#trung-hop-nhiu-bin"><i class="fa fa-check"></i><b>4.3</b> Trường họp nhiều biến</a></li>
<li class="chapter" data-level="4.4" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ng-dung"><i class="fa fa-check"></i><b>4.4</b> Ứng dụng</a><ul>
<li class="chapter" data-level="4.4.1" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ham-tinh-toan-tng-hp-nhiu-bin"><i class="fa fa-check"></i><b>4.4.1</b> Hàm tính toán tổng hợp nhiều biến</a></li>
<li class="chapter" data-level="4.4.2" data-path="lp-trinh-ham.html"><a href="lp-trinh-ham.html#ve--thi-vi-ggplot2"><i class="fa fa-check"></i><b>4.4.2</b> Vẽ đồ thị với ggplot2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html"><i class="fa fa-check"></i><b>5</b> Lập trình chức năng hàm với purrr</a><ul>
<li class="chapter" data-level="5.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#nhom-ham-map"><i class="fa fa-check"></i><b>5.1</b> Nhóm hàm map</a></li>
<li class="chapter" data-level="5.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#sa-i-gia-tri-vi-modify"><i class="fa fa-check"></i><b>5.2</b> Sửa đổi giá trị với <code>modify</code></a></li>
<li class="chapter" data-level="5.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#tao-ham-nhanh-vi-as_mapper"><i class="fa fa-check"></i><b>5.3</b> Tạo hàm nhanh với <code>as_mapper</code></a></li>
<li class="chapter" data-level="5.4" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#xay-dng-chui-cac-ham-lien-tip-vi-compose"><i class="fa fa-check"></i><b>5.4</b> Xây dựng chuỗi các hàm liên tiếp với <code>compose</code></a></li>
<li class="chapter" data-level="5.5" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#ng-dung-1"><i class="fa fa-check"></i><b>5.5</b> Ứng dụng</a><ul>
<li class="chapter" data-level="5.5.1" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#bin-i-d-liu-vi-modify-va-map_df"><i class="fa fa-check"></i><b>5.5.1</b> Biến đổi dữ liệu với <code>modify</code> và <code>map_df</code></a></li>
<li class="chapter" data-level="5.5.2" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-nhom-khac-nhau-cung-luc"><i class="fa fa-check"></i><b>5.5.2</b> Phân tích nhiều nhóm khác nhau cùng lúc</a></li>
<li class="chapter" data-level="5.5.3" data-path="lp-trinh-chc-nang-ham-vi-purrr.html"><a href="lp-trinh-chc-nang-ham-vi-purrr.html#phan-tich-nhiu-bin-trong-dataframe-cung-luc"><i class="fa fa-check"></i><b>5.5.3</b> Phân tích nhiều biến trong dataframe cùng lúc</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html"><i class="fa fa-check"></i><b>6</b> Biến đổi dữ liệu text</a><ul>
<li class="chapter" data-level="6.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#gii-thiu"><i class="fa fa-check"></i><b>6.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="6.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#regular-expression"><i class="fa fa-check"></i><b>6.2</b> Regular expression</a><ul>
<li class="chapter" data-level="6.2.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#metadata"><i class="fa fa-check"></i><b>6.2.1</b> Metadata</a></li>
<li class="chapter" data-level="6.2.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#sequences"><i class="fa fa-check"></i><b>6.2.2</b> Sequences</a></li>
<li class="chapter" data-level="6.2.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#character-class"><i class="fa fa-check"></i><b>6.2.3</b> Character class</a></li>
<li class="chapter" data-level="6.2.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#posix-class"><i class="fa fa-check"></i><b>6.2.4</b> POSIX class</a></li>
<li class="chapter" data-level="6.2.5" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#quantifiers"><i class="fa fa-check"></i><b>6.2.5</b> Quantifiers</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#cac-vi-du-tng-hp"><i class="fa fa-check"></i><b>6.3</b> Các ví dụ tổng hợp</a><ul>
<li class="chapter" data-level="6.3.1" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-1"><i class="fa fa-check"></i><b>6.3.1</b> Ví dụ 1</a></li>
<li class="chapter" data-level="6.3.2" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-2"><i class="fa fa-check"></i><b>6.3.2</b> Ví dụ 2</a></li>
<li class="chapter" data-level="6.3.3" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-3"><i class="fa fa-check"></i><b>6.3.3</b> Ví dụ 3</a></li>
<li class="chapter" data-level="6.3.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#vi-du-4"><i class="fa fa-check"></i><b>6.3.4</b> Ví dụ 4</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="bin-i-d-liu-text.html"><a href="bin-i-d-liu-text.html#tai-liu-tham-khao"><i class="fa fa-check"></i><b>6.4</b> Tài liệu tham khảo</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><a href="quan-ly-kt-qua-phan-tich-t-nhiu-mo-hinh.html"><i class="fa fa-check"></i><b>7</b> Quản lý kết quả phân tích từ nhiều mô hình</a></li>
<li class="chapter" data-level="8" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html"><i class="fa fa-check"></i><b>8</b> Các nguyên lý dự báo</a><ul>
<li class="chapter" data-level="8.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#gii-thiu-1"><i class="fa fa-check"></i><b>8.1</b> Giới thiệu</a><ul>
<li class="chapter" data-level="8.1.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nhanh-trong-hoc-may-machine-learning"><i class="fa fa-check"></i><b>8.1.1</b> Các nhánh trong học máy (machine learning)</a></li>
<li class="chapter" data-level="8.1.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cach-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>8.1.2</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="8.1.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#s-dung-mo-hinh"><i class="fa fa-check"></i><b>8.1.3</b> Sử dụng mô hình</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#cac-nguyen-ly-trong-d-bao"><i class="fa fa-check"></i><b>8.2</b> Các nguyên lý trong dự báo</a><ul>
<li class="chapter" data-level="8.2.1" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#reducible-vs.-irreducible-error"><i class="fa fa-check"></i><b>8.2.1</b> Reducible vs. irreducible error</a></li>
<li class="chapter" data-level="8.2.2" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#kha-nang-giai-thich-va-kha-nang-d-bao"><i class="fa fa-check"></i><b>8.2.2</b> Khả năng giải thích và khả năng dự báo</a></li>
<li class="chapter" data-level="8.2.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#mo-hinh-co-tham-s-cho-truc-hoc-khong-co-tham-s-cho-truc-parametric-vs.-nonparametric"><i class="fa fa-check"></i><b>8.2.3</b> Mô hình có tham số cho trước hoặc không có tham số cho trước (Parametric vs. Nonparametric)</a></li>
<li class="chapter" data-level="8.2.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#nguyen-ly-ch-u"><i class="fa fa-check"></i><b>8.2.4</b> Nguyên lý chữ U</a></li>
<li class="chapter" data-level="8.2.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#bias-variance-trade-off"><i class="fa fa-check"></i><b>8.2.5</b> Bias Variance Trade-Off</a></li>
<li class="chapter" data-level="8.2.6" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#overfitting-regularization"><i class="fa fa-check"></i><b>8.2.6</b> Overfitting &amp; regularization</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#quy-trinh-xay-dng-mo-hinh-d-bao"><i class="fa fa-check"></i><b>8.3</b> Quy trình xây dựng mô hình dự báo</a></li>
<li class="chapter" data-level="8.4" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#ensemble-methods"><i class="fa fa-check"></i><b>8.4</b> Ensemble methods</a></li>
<li class="chapter" data-level="8.5" data-path="cac-nguyen-ly-d-bao.html"><a href="cac-nguyen-ly-d-bao.html#luu-y"><i class="fa fa-check"></i><b>8.5</b> Lưu ý</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html"><i class="fa fa-check"></i><b>9</b> Mô hình OLS</a><ul>
<li class="chapter" data-level="9.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#gii-thiu-2"><i class="fa fa-check"></i><b>9.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="9.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#xay-dng-mo-hinh-co-ban"><i class="fa fa-check"></i><b>9.2</b> Xây dựng mô hình cơ bản</a><ul>
<li class="chapter" data-level="9.2.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#mo-hinh-hi-quy-on-bin"><i class="fa fa-check"></i><b>9.2.1</b> Mô hình hồi quy đơn biến</a></li>
<li class="chapter" data-level="9.2.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#din-giai-mo-hinh"><i class="fa fa-check"></i><b>9.2.2</b> Diễn giải mô hình</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#anh-gia-cht-lung-mo-hinh"><i class="fa fa-check"></i><b>9.3</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="9.3.1" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#sai-s-cua-mo-hinh"><i class="fa fa-check"></i><b>9.3.1</b> Sai số của mô hình</a></li>
<li class="chapter" data-level="9.3.2" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#r-binh-phuong-r2"><i class="fa fa-check"></i><b>9.3.2</b> R bình phương <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="9.3.3" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#f-statistic"><i class="fa fa-check"></i><b>9.3.3</b> F statistic</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#d-bao"><i class="fa fa-check"></i><b>9.4</b> Dự báo</a></li>
<li class="chapter" data-level="9.5" data-path="mo-hinh-ols.html"><a href="mo-hinh-ols.html#thut-toan-ti-uu-vi-gradient-decent"><i class="fa fa-check"></i><b>9.5</b> Thuật toán tối ưu với gradient decent</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html"><i class="fa fa-check"></i><b>10</b> Mô hình hồi quy logistic</a><ul>
<li class="chapter" data-level="10.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cach-xay-dng-mo-hinh-1"><i class="fa fa-check"></i><b>10.1</b> Cách xây dựng mô hình</a></li>
<li class="chapter" data-level="10.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#vi-du-xay-dng-mo-hinh-on-gian"><i class="fa fa-check"></i><b>10.2</b> Ví dụ xây dựng mô hình đơn giản</a></li>
<li class="chapter" data-level="10.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#cac-chi-s-cn-quan-tam-khac"><i class="fa fa-check"></i><b>10.3</b> Các chỉ số cần quan tâm khác</a></li>
<li class="chapter" data-level="10.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#anh-gia-cht-lung-mo-hinh-1"><i class="fa fa-check"></i><b>10.4</b> Đánh giá chất lượng mô hình</a><ul>
<li class="chapter" data-level="10.4.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#confusion-matrix"><i class="fa fa-check"></i><b>10.4.1</b> Confusion Matrix</a></li>
<li class="chapter" data-level="10.4.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#roc"><i class="fa fa-check"></i><b>10.4.2</b> ROC</a></li>
<li class="chapter" data-level="10.4.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#gain-va-lift"><i class="fa fa-check"></i><b>10.4.3</b> Gain và Lift</a></li>
<li class="chapter" data-level="10.4.4" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#kolmogorovsmirnov-statistics"><i class="fa fa-check"></i><b>10.4.4</b> Kolmogorov–Smirnov statistics</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#thc-hanh"><i class="fa fa-check"></i><b>10.5</b> Thực hành</a><ul>
<li class="chapter" data-level="10.5.1" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#d-liu"><i class="fa fa-check"></i><b>10.5.1</b> Dữ liệu</a></li>
<li class="chapter" data-level="10.5.2" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-tp-d-liu-gc"><i class="fa fa-check"></i><b>10.5.2</b> Xây dựng mô hình trên tập dữ liệu gốc</a></li>
<li class="chapter" data-level="10.5.3" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-tren-hai-tp-train-va-test"><i class="fa fa-check"></i><b>10.5.3</b> Xây dựng mô hình trên hai tập train và test</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="mo-hinh-hi-quy-logistic.html"><a href="mo-hinh-hi-quy-logistic.html#xay-dng-mo-hinh-logistics-theo-machine-learning"><i class="fa fa-check"></i><b>10.6</b> Xây dựng mô hình Logistics theo Machine Learning</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html"><i class="fa fa-check"></i><b>11</b> Cây quyết định</a><ul>
<li class="chapter" data-level="11.1" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#gii-thiu-3"><i class="fa fa-check"></i><b>11.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="11.2" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#regression-trees"><i class="fa fa-check"></i><b>11.2</b> Regression Trees</a></li>
<li class="chapter" data-level="11.3" data-path="cay-quyt-inh.html"><a href="cay-quyt-inh.html#classification-trees"><i class="fa fa-check"></i><b>11.3</b> Classification Trees</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html"><i class="fa fa-check"></i><b>12</b> Bagging - Boosting và Random Forest</a><ul>
<li class="chapter" data-level="12.1" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#bagging"><i class="fa fa-check"></i><b>12.1</b> Bagging</a></li>
<li class="chapter" data-level="12.2" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#random-forests"><i class="fa fa-check"></i><b>12.2</b> Random Forests</a></li>
<li class="chapter" data-level="12.3" data-path="bagging-boosting-va-random-forest.html"><a href="bagging-boosting-va-random-forest.html#boosting"><i class="fa fa-check"></i><b>12.3</b> Boosting</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>13</b> Unsupervised learning</a></li>
<li class="chapter" data-level="14" data-path="k-means.html"><a href="k-means.html"><i class="fa fa-check"></i><b>14</b> k-means</a><ul>
<li class="chapter" data-level="14.1" data-path="k-means.html"><a href="k-means.html#gii-thiu-4"><i class="fa fa-check"></i><b>14.1</b> Giới thiệu</a></li>
<li class="chapter" data-level="14.2" data-path="k-means.html"><a href="k-means.html#thut-toan"><i class="fa fa-check"></i><b>14.2</b> Thuật toán</a></li>
<li class="chapter" data-level="14.3" data-path="k-means.html"><a href="k-means.html#uu-nhuc-im-cua-k-means"><i class="fa fa-check"></i><b>14.3</b> Ưu nhược điểm của K-means</a></li>
<li class="chapter" data-level="14.4" data-path="k-means.html"><a href="k-means.html#thc-hanh-tren-r"><i class="fa fa-check"></i><b>14.4</b> Thực hành trên R</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html"><i class="fa fa-check"></i><b>15</b> Phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="15.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-khai-nim-co-ban"><i class="fa fa-check"></i><b>15.1</b> Các khái niệm cơ bản</a></li>
<li class="chapter" data-level="15.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cach-thc-hin-mo-hinh"><i class="fa fa-check"></i><b>15.2</b> Cách thực hiện mô hình</a></li>
<li class="chapter" data-level="15.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#ba-cau-hoi-khi-phan-tich-gio-hang"><i class="fa fa-check"></i><b>15.3</b> Ba câu hỏi khi phân tích giỏ hàng</a><ul>
<li class="chapter" data-level="15.3.1" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#cac-san-phm-nao-hay-uc-mua-cung-nhau"><i class="fa fa-check"></i><b>15.3.1</b> Các sản phẩm nào hay được mua cùng nhau</a></li>
<li class="chapter" data-level="15.3.2" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-a-thi-se-mua-san-phm-nao-tip-theo"><i class="fa fa-check"></i><b>15.3.2</b> Khách hàng mua sản phẩm A thì sẽ mua sản phẩm nào tiếp theo?</a></li>
<li class="chapter" data-level="15.3.3" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#khach-hang-mua-san-phm-gi-thi-se-mua-tip-san-phm-a"><i class="fa fa-check"></i><b>15.3.3</b> Khách hàng mua sản phẩm gì thì sẽ mua tiếp sản phẩm A?</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="phan-tich-gio-hang.html"><a href="phan-tich-gio-hang.html#uu-nhuc-im"><i class="fa fa-check"></i><b>15.4</b> Ưu nhược điểm</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>16</b> Feature Engineering</a><ul>
<li class="chapter" data-level="16.1" data-path="feature-engineering.html"><a href="feature-engineering.html#feature-engineering-cho-cac-bin-nhom"><i class="fa fa-check"></i><b>16.1</b> Feature engineering cho các biến nhóm</a><ul>
<li class="chapter" data-level="16.1.1" data-path="feature-engineering.html"><a href="feature-engineering.html#tao-d-liu-gia-dummy-data-cho-bin-khong-phan-bit-th-t"><i class="fa fa-check"></i><b>16.1.1</b> Tạo dữ liệu giả (dummy data) cho biến không phân biệt thứ tự</a></li>
<li class="chapter" data-level="16.1.2" data-path="feature-engineering.html"><a href="feature-engineering.html#d-liu-co-rt-nhiu-nhom"><i class="fa fa-check"></i><b>16.1.2</b> Dữ liệu có rất nhiều nhóm</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="feature-engineering.html"><a href="feature-engineering.html#cac-bin-lien-tuc"><i class="fa fa-check"></i><b>16.2</b> Các biến liên tục</a><ul>
<li class="chapter" data-level="16.2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#bin-i-11"><i class="fa fa-check"></i><b>16.2.1</b> Biến đổi 1:1</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Chuỗi thời gian</b></span></li>
<li class="chapter" data-level="17" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html"><i class="fa fa-check"></i><b>17</b> Giới thiệu về chuỗi thời gian</a><ul>
<li class="chapter" data-level="17.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#thanh-phn-cua-chui-thi-gian"><i class="fa fa-check"></i><b>17.1</b> Thành phần của chuỗi thời gian</a></li>
<li class="chapter" data-level="17.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#d-liu-chui-thi-gian"><i class="fa fa-check"></i><b>17.2</b> Dữ liệu chuỗi thời gian</a></li>
<li class="chapter" data-level="17.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#smoothing"><i class="fa fa-check"></i><b>17.3</b> Smoothing</a></li>
<li class="chapter" data-level="17.4" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#seasonal-decomposition"><i class="fa fa-check"></i><b>17.4</b> Seasonal decomposition</a></li>
<li class="chapter" data-level="17.5" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#exponential-forecasting-model"><i class="fa fa-check"></i><b>17.5</b> Exponential Forecasting Model</a><ul>
<li class="chapter" data-level="17.5.1" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#single-exponential-model"><i class="fa fa-check"></i><b>17.5.1</b> Single Exponential Model</a></li>
<li class="chapter" data-level="17.5.2" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#hold-holt-winters-exponential-smoothing"><i class="fa fa-check"></i><b>17.5.2</b> Hold &amp; Holt-Winters exponential smoothing</a></li>
<li class="chapter" data-level="17.5.3" data-path="gii-thiu-v-chui-thi-gian.html"><a href="gii-thiu-v-chui-thi-gian.html#t-ng-xay-dng-mo-hinh"><i class="fa fa-check"></i><b>17.5.3</b> Tự động xây dựng mô hình</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html"><i class="fa fa-check"></i><b>18</b> Mô hình ARIMA</a><ul>
<li class="chapter" data-level="18.1" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#chui-thi-gian-dng"><i class="fa fa-check"></i><b>18.1</b> Chuỗi thời gian dừng</a></li>
<li class="chapter" data-level="18.2" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#mo-hinh-arima-1"><i class="fa fa-check"></i><b>18.2</b> Mô hình ARIMA</a></li>
<li class="chapter" data-level="18.3" data-path="mo-hinh-arima.html"><a href="mo-hinh-arima.html#vi-du-vi-r"><i class="fa fa-check"></i><b>18.3</b> Ví dụ với R</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><i class="fa fa-check"></i><b>19</b> Phân tích chuỗi thời gian với tidyquant và timetk</a><ul>
<li class="chapter" data-level="19.1" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#ly-d-liu-vi-package-tidyquant"><i class="fa fa-check"></i><b>19.1</b> Lấy dữ liệu với package tidyquant</a></li>
<li class="chapter" data-level="19.2" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#trc-quan-hoa-vi-geom_ma"><i class="fa fa-check"></i><b>19.2</b> Trực quan hóa với <code>geom_ma</code></a></li>
<li class="chapter" data-level="19.3" data-path="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html"><a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html#chuyn-t-dataframe-thanh-xts"><i class="fa fa-check"></i><b>19.3</b> Chuyển từ dataframe thành xts</a></li>
</ul></li>
<li class="part"><span><b>III Case study</b></span></li>
<li class="chapter" data-level="20" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html"><i class="fa fa-check"></i><b>20</b> Trực quan hóa dữ liệu</a><ul>
<li class="chapter" data-level="20.1" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-phu-ban-hang-theo-tng-nhom"><i class="fa fa-check"></i><b>20.1</b> Xây dựng phễu bán hàng theo từng nhóm</a></li>
<li class="chapter" data-level="20.2" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#ve-biu--warterfall-cho-aciveinactive-users"><i class="fa fa-check"></i><b>20.2</b> Vẽ biểu đồ warterfall cho acive/inactive users</a></li>
<li class="chapter" data-level="20.3" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#xay-dng-biu--lollipop-chart"><i class="fa fa-check"></i><b>20.3</b> Xây dựng biểu đồ lollipop chart</a></li>
<li class="chapter" data-level="20.4" data-path="trc-quan-hoa-d-liu.html"><a href="trc-quan-hoa-d-liu.html#trc-quan-hoa-cac-phn-trung-lp-nhau"><i class="fa fa-check"></i><b>20.4</b> Trực quan hóa các phần trùng lặp nhau</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html"><i class="fa fa-check"></i><b>21</b> Các mẹo trong R</a><ul>
<li class="chapter" data-level="21.1" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#hin-thi-s-binh-thung"><i class="fa fa-check"></i><b>21.1</b> Hiển thị số bình thường</a></li>
<li class="chapter" data-level="21.2" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#export-d-liu-ra-excel"><i class="fa fa-check"></i><b>21.2</b> Export dữ liệu ra excel</a></li>
<li class="chapter" data-level="21.3" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#lam-vic-khi-proxy-bi-chn"><i class="fa fa-check"></i><b>21.3</b> Làm việc khi proxy bị chặn</a></li>
<li class="chapter" data-level="21.4" data-path="cac-meo-trong-r.html"><a href="cac-meo-trong-r.html#t-ng-render-ra-kt-qua-phan-tich"><i class="fa fa-check"></i><b>21.4</b> Tự động render ra kết quả phân tích</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Anh Hoang Duc</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phân tích dữ liệu thực tế với R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="trc-quan-hoa-d-liu" class="section level1">
<h1><span class="header-section-number">Chương 20</span> Trực quan hóa dữ liệu</h1>
<div id="xay-dng-phu-ban-hang-theo-tng-nhom" class="section level2">
<h2><span class="header-section-number">20.1</span> Xây dựng phễu bán hàng theo từng nhóm</h2>
<p>Trong quá trình phân tích bán hàng, phếu bán hàng (sale funnel) là một kỹ thuật rất hữu dụng để trực quan hóa kết quả kinh doanh theo từng nhóm. Tuy nhiên, hiện ít có biểu đồ nào thể hiện được phễu bán hàng một cách hiệu quả trên R.</p>
<p>Trong mục này, tác giả sẽ hướng dẫn một ví dụ thực tiễn trực quan hóa phễu bán hàng một cách hiệu quả.</p>
<p>Xem ví dụ điển hình về phễu bán hàng dưới đây</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="trc-quan-hoa-d-liu.html#cb744-1"></a>data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="kw">textConnection</span>(</span>
<span id="cb744-2"><a href="trc-quan-hoa-d-liu.html#cb744-2"></a>          <span class="kw">c</span>(<span class="st">&quot;step;segment1;segment2;segment3;total</span></span>
<span id="cb744-3"><a href="trc-quan-hoa-d-liu.html#cb744-3"></a><span class="st">          1_visit;1806;11663;12641;26110</span></span>
<span id="cb744-4"><a href="trc-quan-hoa-d-liu.html#cb744-4"></a><span class="st">          2_register;1143;6476;5372;12991</span></span>
<span id="cb744-5"><a href="trc-quan-hoa-d-liu.html#cb744-5"></a><span class="st">          3_login;1806;11663;2694;16163</span></span>
<span id="cb744-6"><a href="trc-quan-hoa-d-liu.html#cb744-6"></a><span class="st">          4_subscribe;21;3322;2694;6037</span></span>
<span id="cb744-7"><a href="trc-quan-hoa-d-liu.html#cb744-7"></a><span class="st">          5_paid;259;422;41;722&quot;</span>)),</span>
<span id="cb744-8"><a href="trc-quan-hoa-d-liu.html#cb744-8"></a>        <span class="dt">header =</span> T, <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>)</span>
<span id="cb744-9"><a href="trc-quan-hoa-d-liu.html#cb744-9"></a><span class="co"># Dữ liệu</span></span>
<span id="cb744-10"><a href="trc-quan-hoa-d-liu.html#cb744-10"></a>data</span></code></pre></div>
<pre><code>##                    step segment1 segment2 segment3 total
## 1               1_visit     1806    11663    12641 26110
## 2            2_register     1143     6476     5372 12991
## 3               3_login     1806    11663     2694 16163
## 4           4_subscribe       21     3322     2694  6037
## 5                5_paid      259      422       41   722</code></pre>
<p>Trong tập dữ liệu trên, ta sẽ mô phỏng dữ liệu phếu bán hàng của 3 phân khúc khách hàng trên một trang thương mại điện tử mà trong đó, khách hàng sẽ đi qua năm bước khác nhau:</p>
<ul>
<li>Ghé thăm website (visit)</li>
<li>Đăng ký (register)</li>
<li>Đăng nhập (login)</li>
<li>Đăng ký cập nhật các thông tin sản phẩm (subscribe)</li>
<li>Mua hàng và trả tiền thành công (paid)</li>
</ul>
<p>Để tạo một biểu đồ phễu bán hàng, ta sẽ thực hiện 3 bước lớn sau.</p>
<ul>
<li>Tạo <code>theme</code> cho biểu đồ</li>
<li>Tạo các biểu đồ con cho phễu bán hàng</li>
<li>Kết hợp các biểu đồ để tạo thành phễu bán hàng hoàn chỉnh</li>
</ul>
<div class="sourceCode" id="cb746"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb746-1"><a href="trc-quan-hoa-d-liu.html#cb746-1"></a><span class="co"># Gọi library</span></span>
<span id="cb746-2"><a href="trc-quan-hoa-d-liu.html#cb746-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb746-3"><a href="trc-quan-hoa-d-liu.html#cb746-3"></a><span class="kw">library</span>(reshape2)</span>
<span id="cb746-4"><a href="trc-quan-hoa-d-liu.html#cb746-4"></a><span class="kw">library</span>(forcats)</span>
<span id="cb746-5"><a href="trc-quan-hoa-d-liu.html#cb746-5"></a><span class="kw">library</span>(ggthemes)</span>
<span id="cb746-6"><a href="trc-quan-hoa-d-liu.html#cb746-6"></a></span>
<span id="cb746-7"><a href="trc-quan-hoa-d-liu.html#cb746-7"></a><span class="co"># Tạo theme trông cho chart</span></span>
<span id="cb746-8"><a href="trc-quan-hoa-d-liu.html#cb746-8"></a>funnel_theme &lt;-<span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb746-9"><a href="trc-quan-hoa-d-liu.html#cb746-9"></a>        <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb746-10"><a href="trc-quan-hoa-d-liu.html#cb746-10"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb746-11"><a href="trc-quan-hoa-d-liu.html#cb746-11"></a>        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb746-12"><a href="trc-quan-hoa-d-liu.html#cb746-12"></a>        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>()</span>
<span id="cb746-13"><a href="trc-quan-hoa-d-liu.html#cb746-13"></a>        )</span>
<span id="cb746-14"><a href="trc-quan-hoa-d-liu.html#cb746-14"></a></span>
<span id="cb746-15"><a href="trc-quan-hoa-d-liu.html#cb746-15"></a><span class="co"># Phân rã dữ liệu</span></span>
<span id="cb746-16"><a href="trc-quan-hoa-d-liu.html#cb746-16"></a>df &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">melt</span>(<span class="dt">id.vars =</span> <span class="st">&quot;step&quot;</span>)</span>
<span id="cb746-17"><a href="trc-quan-hoa-d-liu.html#cb746-17"></a></span>
<span id="cb746-18"><a href="trc-quan-hoa-d-liu.html#cb746-18"></a><span class="co"># Tạo biểu đồ chính</span></span>
<span id="cb746-19"><a href="trc-quan-hoa-d-liu.html#cb746-19"></a>p1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb746-20"><a href="trc-quan-hoa-d-liu.html#cb746-20"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">step =</span> <span class="kw">fct_rev</span>(step)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb746-21"><a href="trc-quan-hoa-d-liu.html#cb746-21"></a><span class="st">  </span><span class="kw">filter</span>(variable <span class="op">!=</span><span class="st"> &quot;total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb746-22"><a href="trc-quan-hoa-d-liu.html#cb746-22"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(step, value)) <span class="op">+</span></span>
<span id="cb746-23"><a href="trc-quan-hoa-d-liu.html#cb746-23"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> variable), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb746-24"><a href="trc-quan-hoa-d-liu.html#cb746-24"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>variable, <span class="dt">scale =</span> <span class="st">&quot;free&quot;</span>) <span class="op">+</span></span>
<span id="cb746-25"><a href="trc-quan-hoa-d-liu.html#cb746-25"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb746-26"><a href="trc-quan-hoa-d-liu.html#cb746-26"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> value),</span>
<span id="cb746-27"><a href="trc-quan-hoa-d-liu.html#cb746-27"></a>            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">.5</span>)) <span class="op">+</span></span>
<span id="cb746-28"><a href="trc-quan-hoa-d-liu.html#cb746-28"></a><span class="st">  </span><span class="kw">scale_fill_tableau</span>() <span class="op">+</span></span>
<span id="cb746-29"><a href="trc-quan-hoa-d-liu.html#cb746-29"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb746-30"><a href="trc-quan-hoa-d-liu.html#cb746-30"></a><span class="st">  </span><span class="kw">scale_y_sqrt</span>() <span class="op">+</span></span>
<span id="cb746-31"><a href="trc-quan-hoa-d-liu.html#cb746-31"></a><span class="st">  </span>funnel_theme <span class="op">+</span></span>
<span id="cb746-32"><a href="trc-quan-hoa-d-liu.html#cb746-32"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin=</span>grid<span class="op">::</span><span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="st">&quot;mm&quot;</span>)) <span class="op">+</span></span>
<span id="cb746-33"><a href="trc-quan-hoa-d-liu.html#cb746-33"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb746-34"><a href="trc-quan-hoa-d-liu.html#cb746-34"></a>  <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb746-35"><a href="trc-quan-hoa-d-liu.html#cb746-35"></a>  <span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>, </span>
<span id="cb746-36"><a href="trc-quan-hoa-d-liu.html#cb746-36"></a>                            <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>)) <span class="op">+</span></span>
<span id="cb746-37"><a href="trc-quan-hoa-d-liu.html#cb746-37"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb746-38"><a href="trc-quan-hoa-d-liu.html#cb746-38"></a>    <span class="dt">panel.spacing =</span> <span class="kw">unit</span>(<span class="dv">0</span>, <span class="st">&quot;mm&quot;</span>)) <span class="op">+</span></span>
<span id="cb746-39"><a href="trc-quan-hoa-d-liu.html#cb746-39"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="dt">xmin =</span> <span class="fl">0.5</span>, <span class="dt">xmax =</span> <span class="fl">1.5</span>, <span class="dt">ymin =</span> <span class="dv">0</span>, <span class="dt">ymax =</span> <span class="ot">Inf</span>,</span>
<span id="cb746-40"><a href="trc-quan-hoa-d-liu.html#cb746-40"></a>           <span class="dt">alpha =</span> <span class="fl">.2</span>) <span class="op">+</span></span>
<span id="cb746-41"><a href="trc-quan-hoa-d-liu.html#cb746-41"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="dt">xmin =</span> <span class="fl">2.5</span>, <span class="dt">xmax =</span> <span class="fl">3.5</span>, <span class="dt">ymin =</span> <span class="dv">0</span>, <span class="dt">ymax =</span> <span class="ot">Inf</span>,</span>
<span id="cb746-42"><a href="trc-quan-hoa-d-liu.html#cb746-42"></a>           <span class="dt">alpha =</span> <span class="fl">.2</span>) <span class="op">+</span></span>
<span id="cb746-43"><a href="trc-quan-hoa-d-liu.html#cb746-43"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="dt">xmin =</span> <span class="fl">4.5</span>, <span class="dt">xmax =</span> <span class="fl">5.5</span>, <span class="dt">ymin =</span> <span class="dv">0</span>, <span class="dt">ymax =</span> <span class="ot">Inf</span>,</span>
<span id="cb746-44"><a href="trc-quan-hoa-d-liu.html#cb746-44"></a>           <span class="dt">alpha =</span> <span class="fl">.2</span>) <span class="op">+</span></span>
<span id="cb746-45"><a href="trc-quan-hoa-d-liu.html#cb746-45"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>())</span>
<span id="cb746-46"><a href="trc-quan-hoa-d-liu.html#cb746-46"></a>p1</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<ul>
<li>Tạo thêm phần <code>label</code> tổng theo từng segment</li>
</ul>
<div class="sourceCode" id="cb747"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb747-1"><a href="trc-quan-hoa-d-liu.html#cb747-1"></a>df <span class="op">%&gt;%</span></span>
<span id="cb747-2"><a href="trc-quan-hoa-d-liu.html#cb747-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">step =</span> <span class="kw">fct_rev</span>(step)) <span class="op">%&gt;%</span></span>
<span id="cb747-3"><a href="trc-quan-hoa-d-liu.html#cb747-3"></a><span class="st">  </span><span class="kw">filter</span>(variable <span class="op">==</span><span class="st"> &quot;total&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb747-4"><a href="trc-quan-hoa-d-liu.html#cb747-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(step, <span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb747-5"><a href="trc-quan-hoa-d-liu.html#cb747-5"></a><span class="st">  </span><span class="kw">geom_label</span>(<span class="kw">aes</span>(<span class="dt">label =</span> value),</span>
<span id="cb747-6"><a href="trc-quan-hoa-d-liu.html#cb747-6"></a>             <span class="dt">col =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb747-7"><a href="trc-quan-hoa-d-liu.html#cb747-7"></a>             <span class="dt">fill =</span> <span class="st">&quot;darkred&quot;</span>,</span>
<span id="cb747-8"><a href="trc-quan-hoa-d-liu.html#cb747-8"></a>             <span class="dt">size =</span> <span class="dv">4</span>) <span class="op">+</span></span>
<span id="cb747-9"><a href="trc-quan-hoa-d-liu.html#cb747-9"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb747-10"><a href="trc-quan-hoa-d-liu.html#cb747-10"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>variable) <span class="op">+</span></span>
<span id="cb747-11"><a href="trc-quan-hoa-d-liu.html#cb747-11"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb747-12"><a href="trc-quan-hoa-d-liu.html#cb747-12"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb747-13"><a href="trc-quan-hoa-d-liu.html#cb747-13"></a><span class="st">  </span>funnel_theme <span class="op">+</span></span>
<span id="cb747-14"><a href="trc-quan-hoa-d-liu.html#cb747-14"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb747-15"><a href="trc-quan-hoa-d-liu.html#cb747-15"></a>    <span class="dt">strip.text.x =</span> <span class="kw">element_blank</span>()</span>
<span id="cb747-16"><a href="trc-quan-hoa-d-liu.html#cb747-16"></a>  ) -&gt;<span class="st"> </span>p2</span>
<span id="cb747-17"><a href="trc-quan-hoa-d-liu.html#cb747-17"></a>p2</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<ul>
<li>Tạo thêm thứ tự các bước trong phễu bán hàng để dễ theo dõi hơn</li>
</ul>
<div class="sourceCode" id="cb748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb748-1"><a href="trc-quan-hoa-d-liu.html#cb748-1"></a>df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">step =</span> data<span class="op">$</span>step,</span>
<span id="cb748-2"><a href="trc-quan-hoa-d-liu.html#cb748-2"></a>                  <span class="dt">value =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb748-3"><a href="trc-quan-hoa-d-liu.html#cb748-3"></a>df2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb748-4"><a href="trc-quan-hoa-d-liu.html#cb748-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">step =</span> <span class="kw">fct_rev</span>(step)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb748-5"><a href="trc-quan-hoa-d-liu.html#cb748-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(step, <span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb748-6"><a href="trc-quan-hoa-d-liu.html#cb748-6"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb748-7"><a href="trc-quan-hoa-d-liu.html#cb748-7"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>) <span class="op">+</span></span>
<span id="cb748-8"><a href="trc-quan-hoa-d-liu.html#cb748-8"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> value), </span>
<span id="cb748-9"><a href="trc-quan-hoa-d-liu.html#cb748-9"></a>            <span class="dt">col =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></span>
<span id="cb748-10"><a href="trc-quan-hoa-d-liu.html#cb748-10"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb748-11"><a href="trc-quan-hoa-d-liu.html#cb748-11"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb748-12"><a href="trc-quan-hoa-d-liu.html#cb748-12"></a><span class="st">  </span>funnel_theme <span class="op">+</span></span>
<span id="cb748-13"><a href="trc-quan-hoa-d-liu.html#cb748-13"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb748-14"><a href="trc-quan-hoa-d-liu.html#cb748-14"></a>    <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>)</span>
<span id="cb748-15"><a href="trc-quan-hoa-d-liu.html#cb748-15"></a>  ) -&gt;<span class="st"> </span>p3</span>
<span id="cb748-16"><a href="trc-quan-hoa-d-liu.html#cb748-16"></a>p3</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<ul>
<li>Cuối cùng, ta có thể tạo ghép các biểu đồ rời rạc để tạo thành phễu bán hàng hoàn chỉnh. Việc kết hợp các biểu đồ trên <code>ggplot2</code> có thể hoàn thành một cách đơn giản với <code>ggplot2</code></li>
</ul>
<div class="sourceCode" id="cb749"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb749-1"><a href="trc-quan-hoa-d-liu.html#cb749-1"></a><span class="co">#devtools::install_github(&quot;thomasp85/patchwork&quot;)</span></span>
<span id="cb749-2"><a href="trc-quan-hoa-d-liu.html#cb749-2"></a><span class="kw">library</span>(patchwork)</span>
<span id="cb749-3"><a href="trc-quan-hoa-d-liu.html#cb749-3"></a>p3 <span class="op">+</span><span class="st"> </span></span>
<span id="cb749-4"><a href="trc-quan-hoa-d-liu.html#cb749-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Sale funnel for 3 segments&quot;</span>) <span class="op">+</span></span>
<span id="cb749-5"><a href="trc-quan-hoa-d-liu.html#cb749-5"></a><span class="st">  </span>p1 <span class="op">+</span><span class="st"> </span>p2 <span class="op">+</span><span class="st"> </span></span>
<span id="cb749-6"><a href="trc-quan-hoa-d-liu.html#cb749-6"></a><span class="st">  </span><span class="kw">plot_layout</span>(<span class="dt">nrow =</span> <span class="dv">1</span>, <span class="dt">widths =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Như vậy, chúng ta đã hoàn thành phễu bán hàng rất chuyên nghiệp với <code>ggplot2</code>. Phễu bán hàng này đặc biệt hiệu quả khi cùng lúc phải so sánh nhiều phân khúc khách hàng khác nhau trên toàn bộ chuỗi bán hàng.</p>
</div>
<div id="ve-biu--warterfall-cho-aciveinactive-users" class="section level2">
<h2><span class="header-section-number">20.2</span> Vẽ biểu đồ warterfall cho acive/inactive users</h2>
<p>Trong kỷ nguyên số, chỉ số <code>active user</code> (tạm dịch: người dùng thường xuyên hoạt động) là chỉ số đặc biệt quan trọng với bất kỳ website/ app nào. Công thức tính chỉ số người dùng thường xuyên hoạt động tại khoảng thời gian <em>t</em> được tính như sau:</p>
<p><span class="math display">\[active_{t} = active_{t-1} + new_{t} - churn_{t}\]</span></p>
<p>Ví dụ về waterfall chart được lấy từ ví dụ của Tableau tại đường link: [<a href="https://public.tableau.com/views/CH24_BBOD_ChurnTurnover/SubscriberChurnAnalysis" class="uri">https://public.tableau.com/views/CH24_BBOD_ChurnTurnover/SubscriberChurnAnalysis</a>]</p>
<p>Trong case study này, chúng ta sẽ tìm cách xây dựng một biểu đồ waterfall chart tương tự</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="trc-quan-hoa-d-liu.html#cb750-1"></a><span class="co"># Load library</span></span>
<span id="cb750-2"><a href="trc-quan-hoa-d-liu.html#cb750-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb750-3"><a href="trc-quan-hoa-d-liu.html#cb750-3"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb750-4"><a href="trc-quan-hoa-d-liu.html#cb750-4"></a><span class="kw">library</span>(reshape2)</span>
<span id="cb750-5"><a href="trc-quan-hoa-d-liu.html#cb750-5"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb750-6"><a href="trc-quan-hoa-d-liu.html#cb750-6"></a><span class="kw">library</span>(grid)</span>
<span id="cb750-7"><a href="trc-quan-hoa-d-liu.html#cb750-7"></a><span class="kw">library</span>(gridExtra)</span>
<span id="cb750-8"><a href="trc-quan-hoa-d-liu.html#cb750-8"></a></span>
<span id="cb750-9"><a href="trc-quan-hoa-d-liu.html#cb750-9"></a><span class="co"># Tạo dữ liệu giả lập</span></span>
<span id="cb750-10"><a href="trc-quan-hoa-d-liu.html#cb750-10"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb750-11"><a href="trc-quan-hoa-d-liu.html#cb750-11"></a>data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">date =</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">372</span>, <span class="dt">by =</span> <span class="dv">31</span>) <span class="op">%&gt;%</span><span class="st"> </span>as_date)</span>
<span id="cb750-12"><a href="trc-quan-hoa-d-liu.html#cb750-12"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb750-13"><a href="trc-quan-hoa-d-liu.html#cb750-13"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">new =</span> <span class="kw">abs</span>(<span class="kw">rnorm</span>(<span class="dv">12</span>, <span class="dv">100</span>, <span class="dv">10</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb750-14"><a href="trc-quan-hoa-d-liu.html#cb750-14"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">churn =</span> <span class="kw">abs</span>(<span class="kw">rnorm</span>(<span class="dv">12</span>, <span class="dv">50</span>, <span class="dv">30</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb750-15"><a href="trc-quan-hoa-d-liu.html#cb750-15"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">net =</span> new <span class="op">-</span><span class="st"> </span>churn)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb750-16"><a href="trc-quan-hoa-d-liu.html#cb750-16"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">eop =</span> <span class="kw">cumsum</span>(net)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb750-17"><a href="trc-quan-hoa-d-liu.html#cb750-17"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>net)</span>
<span id="cb750-18"><a href="trc-quan-hoa-d-liu.html#cb750-18"></a></span>
<span id="cb750-19"><a href="trc-quan-hoa-d-liu.html#cb750-19"></a>data</span></code></pre></div>
<pre><code>##          date new churn eop
## 1  1970-01-02  94    62  32
## 2  1970-02-02  98    53  77
## 3  1970-03-05 116    33 160
## 4  1970-04-05 101   104 157
## 5  1970-05-06 101    65 193
## 6  1970-06-06 117     9 301
## 7  1970-07-07 105    71 335
## 8  1970-08-07  87    36 386
## 9  1970-09-07  93    18 461
## 10 1970-10-08  96    43 514
## 11 1970-11-08 112    19 607
## 12 1970-12-09 104    28 683</code></pre>
<p>Trong ví dụ này, dữ liệu được tạo ngẫu nhiên sao cho số lượng <code>active user</code> cuối kỳ (eop - end of period) bằng với số cuối kỳ trước, thêm số lượng mới và trừ đi lượng khách hàng rời bỏ (<code>churn</code>).</p>
<p>Để tạo waterfall chart, ta có thể sử dụng <code>geom_segment</code> trong ggplot2</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb752-1"><a href="trc-quan-hoa-d-liu.html#cb752-1"></a><span class="co"># Xác định độ rộng của segment</span></span>
<span id="cb752-2"><a href="trc-quan-hoa-d-liu.html#cb752-2"></a>step &lt;-<span class="st"> </span><span class="fl">0.4</span><span class="op">*</span>(<span class="kw">max</span>(data<span class="op">$</span>date) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(data<span class="op">$</span>date))<span class="op">/</span>(<span class="kw">nrow</span>(data) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb752-3"><a href="trc-quan-hoa-d-liu.html#cb752-3"></a></span>
<span id="cb752-4"><a href="trc-quan-hoa-d-liu.html#cb752-4"></a><span class="co"># Xác định ymax</span></span>
<span id="cb752-5"><a href="trc-quan-hoa-d-liu.html#cb752-5"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-6"><a href="trc-quan-hoa-d-liu.html#cb752-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ymax =</span> eop <span class="op">+</span><span class="st"> </span>churn)</span>
<span id="cb752-7"><a href="trc-quan-hoa-d-liu.html#cb752-7"></a></span>
<span id="cb752-8"><a href="trc-quan-hoa-d-liu.html#cb752-8"></a><span class="co"># Xác định ymin</span></span>
<span id="cb752-9"><a href="trc-quan-hoa-d-liu.html#cb752-9"></a>df &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-10"><a href="trc-quan-hoa-d-liu.html#cb752-10"></a><span class="st">  </span><span class="kw">melt</span>(<span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;eop&quot;</span>, <span class="st">&quot;ymax&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-11"><a href="trc-quan-hoa-d-liu.html#cb752-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ymin =</span> ymax <span class="op">-</span><span class="st"> </span>value) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-12"><a href="trc-quan-hoa-d-liu.html#cb752-12"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">group =</span> variable)</span>
<span id="cb752-13"><a href="trc-quan-hoa-d-liu.html#cb752-13"></a></span>
<span id="cb752-14"><a href="trc-quan-hoa-d-liu.html#cb752-14"></a><span class="co"># Xác định xmin và xmax</span></span>
<span id="cb752-15"><a href="trc-quan-hoa-d-liu.html#cb752-15"></a>df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-16"><a href="trc-quan-hoa-d-liu.html#cb752-16"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">xmin =</span> <span class="kw">case_when</span>(</span>
<span id="cb752-17"><a href="trc-quan-hoa-d-liu.html#cb752-17"></a>    group <span class="op">==</span><span class="st"> &quot;new&quot;</span> <span class="op">~</span><span class="st"> </span>date <span class="op">-</span><span class="st"> </span>step,</span>
<span id="cb752-18"><a href="trc-quan-hoa-d-liu.html#cb752-18"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>date </span>
<span id="cb752-19"><a href="trc-quan-hoa-d-liu.html#cb752-19"></a>  )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-20"><a href="trc-quan-hoa-d-liu.html#cb752-20"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">xmax =</span> <span class="kw">case_when</span>(</span>
<span id="cb752-21"><a href="trc-quan-hoa-d-liu.html#cb752-21"></a>    group <span class="op">==</span><span class="st"> &quot;new&quot;</span> <span class="op">~</span><span class="st"> </span>date,</span>
<span id="cb752-22"><a href="trc-quan-hoa-d-liu.html#cb752-22"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>date <span class="op">+</span><span class="st"> </span>step</span>
<span id="cb752-23"><a href="trc-quan-hoa-d-liu.html#cb752-23"></a>  ))</span>
<span id="cb752-24"><a href="trc-quan-hoa-d-liu.html#cb752-24"></a></span>
<span id="cb752-25"><a href="trc-quan-hoa-d-liu.html#cb752-25"></a></span>
<span id="cb752-26"><a href="trc-quan-hoa-d-liu.html#cb752-26"></a><span class="co"># Create waterfall chart</span></span>
<span id="cb752-27"><a href="trc-quan-hoa-d-liu.html#cb752-27"></a>p1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-28"><a href="trc-quan-hoa-d-liu.html#cb752-28"></a><span class="st">  </span><span class="kw">arrange</span>(date) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb752-29"><a href="trc-quan-hoa-d-liu.html#cb752-29"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb752-30"><a href="trc-quan-hoa-d-liu.html#cb752-30"></a><span class="st">  </span><span class="kw">geom_rect</span>(<span class="kw">aes</span>(<span class="dt">xmin =</span> xmin,</span>
<span id="cb752-31"><a href="trc-quan-hoa-d-liu.html#cb752-31"></a>                <span class="dt">xmax =</span> xmax,</span>
<span id="cb752-32"><a href="trc-quan-hoa-d-liu.html#cb752-32"></a>                <span class="dt">ymin =</span> ymin,</span>
<span id="cb752-33"><a href="trc-quan-hoa-d-liu.html#cb752-33"></a>                <span class="dt">ymax =</span> ymax,</span>
<span id="cb752-34"><a href="trc-quan-hoa-d-liu.html#cb752-34"></a>                <span class="dt">fill =</span> group))</span>
<span id="cb752-35"><a href="trc-quan-hoa-d-liu.html#cb752-35"></a>p1</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Như vậy, ta đã tạo xong biểu đồ water-fall đơn giản. Ở bước tiếp theo, chúng ta cần điều chỉnh lại các thành phần cho biểu đồ.</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="trc-quan-hoa-d-liu.html#cb753-1"></a><span class="co"># Tạo dữ liệu cho biểu đồ đường</span></span>
<span id="cb753-2"><a href="trc-quan-hoa-d-liu.html#cb753-2"></a>df2 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(date, eop) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>()</span>
<span id="cb753-3"><a href="trc-quan-hoa-d-liu.html#cb753-3"></a></span>
<span id="cb753-4"><a href="trc-quan-hoa-d-liu.html#cb753-4"></a><span class="co"># Điều chỉnh theme</span></span>
<span id="cb753-5"><a href="trc-quan-hoa-d-liu.html#cb753-5"></a>p2 &lt;-<span class="st"> </span>p1  <span class="op">+</span><span class="st"> </span></span>
<span id="cb753-6"><a href="trc-quan-hoa-d-liu.html#cb753-6"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(date, eop), <span class="dt">col =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb753-7"><a href="trc-quan-hoa-d-liu.html#cb753-7"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(date, eop), <span class="dt">col =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="dt">size =</span> <span class="fl">2.5</span>) <span class="op">+</span></span>
<span id="cb753-8"><a href="trc-quan-hoa-d-liu.html#cb753-8"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(date, eop, <span class="dt">label =</span> eop), <span class="dt">vjust =</span> <span class="fl">1.2</span>, </span>
<span id="cb753-9"><a href="trc-quan-hoa-d-liu.html#cb753-9"></a>            <span class="dt">hjust =</span> <span class="fl">-0.1</span>) <span class="op">+</span></span>
<span id="cb753-10"><a href="trc-quan-hoa-d-liu.html#cb753-10"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;grey60&quot;</span>, <span class="st">&quot;coral2&quot;</span>)) <span class="op">+</span></span>
<span id="cb753-11"><a href="trc-quan-hoa-d-liu.html#cb753-11"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb753-12"><a href="trc-quan-hoa-d-liu.html#cb753-12"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb753-13"><a href="trc-quan-hoa-d-liu.html#cb753-13"></a>    <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;gray40&quot;</span>, <span class="dt">size =</span> <span class="fl">0.5</span>),</span>
<span id="cb753-14"><a href="trc-quan-hoa-d-liu.html#cb753-14"></a>    <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="op">+</span></span>
<span id="cb753-15"><a href="trc-quan-hoa-d-liu.html#cb753-15"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">breaks =</span> data<span class="op">$</span>date,</span>
<span id="cb753-16"><a href="trc-quan-hoa-d-liu.html#cb753-16"></a>               <span class="dt">date_labels =</span> <span class="st">&quot;%b&quot;</span>) <span class="op">+</span></span>
<span id="cb753-17"><a href="trc-quan-hoa-d-liu.html#cb753-17"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb753-18"><a href="trc-quan-hoa-d-liu.html#cb753-18"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb753-19"><a href="trc-quan-hoa-d-liu.html#cb753-19"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Overview of active users&quot;</span>) <span class="op">+</span></span>
<span id="cb753-20"><a href="trc-quan-hoa-d-liu.html#cb753-20"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Date&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb753-21"><a href="trc-quan-hoa-d-liu.html#cb753-21"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Number of active users&quot;</span>)</span>
<span id="cb753-22"><a href="trc-quan-hoa-d-liu.html#cb753-22"></a>p2</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Bước tiếp theo, ta cần xây dựng biểu đồ bar đơn giản để có thể đưa vào góc phần tư bên trái của biểu đồ vừa tạo.</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="trc-quan-hoa-d-liu.html#cb754-1"></a>p3 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb754-2"><a href="trc-quan-hoa-d-liu.html#cb754-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">case_when</span>(</span>
<span id="cb754-3"><a href="trc-quan-hoa-d-liu.html#cb754-3"></a>    group <span class="op">==</span><span class="st"> &quot;churn&quot;</span> <span class="op">~</span><span class="st"> </span><span class="dv">-1</span> <span class="op">*</span><span class="st"> </span>value,</span>
<span id="cb754-4"><a href="trc-quan-hoa-d-liu.html#cb754-4"></a>    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>value</span>
<span id="cb754-5"><a href="trc-quan-hoa-d-liu.html#cb754-5"></a>  )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb754-6"><a href="trc-quan-hoa-d-liu.html#cb754-6"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(date, value)) <span class="op">+</span></span>
<span id="cb754-7"><a href="trc-quan-hoa-d-liu.html#cb754-7"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> group), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb754-8"><a href="trc-quan-hoa-d-liu.html#cb754-8"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;grey60&quot;</span>, <span class="st">&quot;coral2&quot;</span>)) <span class="op">+</span></span>
<span id="cb754-9"><a href="trc-quan-hoa-d-liu.html#cb754-9"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb754-10"><a href="trc-quan-hoa-d-liu.html#cb754-10"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb754-11"><a href="trc-quan-hoa-d-liu.html#cb754-11"></a>    <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb754-12"><a href="trc-quan-hoa-d-liu.html#cb754-12"></a>    <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-13"><a href="trc-quan-hoa-d-liu.html#cb754-13"></a>    <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-14"><a href="trc-quan-hoa-d-liu.html#cb754-14"></a>    <span class="dt">axis.ticks.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-15"><a href="trc-quan-hoa-d-liu.html#cb754-15"></a>    <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-16"><a href="trc-quan-hoa-d-liu.html#cb754-16"></a>    <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-17"><a href="trc-quan-hoa-d-liu.html#cb754-17"></a>    <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb754-18"><a href="trc-quan-hoa-d-liu.html#cb754-18"></a>    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>)</span>
<span id="cb754-19"><a href="trc-quan-hoa-d-liu.html#cb754-19"></a>  ) <span class="op">+</span></span>
<span id="cb754-20"><a href="trc-quan-hoa-d-liu.html#cb754-20"></a><span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">breaks =</span> data<span class="op">$</span>date,</span>
<span id="cb754-21"><a href="trc-quan-hoa-d-liu.html#cb754-21"></a>               <span class="dt">date_labels =</span> <span class="st">&quot;%b&quot;</span>) </span>
<span id="cb754-22"><a href="trc-quan-hoa-d-liu.html#cb754-22"></a>p3</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Cuối cùng, ta có thể nhóm hai biểu đồ trên với <code>grid</code> &amp; <code>gridExtra</code>.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="trc-quan-hoa-d-liu.html#cb755-1"></a><span class="kw">grid.newpage</span>()</span>
<span id="cb755-2"><a href="trc-quan-hoa-d-liu.html#cb755-2"></a></span>
<span id="cb755-3"><a href="trc-quan-hoa-d-liu.html#cb755-3"></a><span class="co"># Xác định vị trí cho biểu đồ chính</span></span>
<span id="cb755-4"><a href="trc-quan-hoa-d-liu.html#cb755-4"></a>position_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">viewport</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">height =</span> <span class="dv">1</span>, </span>
<span id="cb755-5"><a href="trc-quan-hoa-d-liu.html#cb755-5"></a>                       <span class="dt">x =</span> <span class="fl">0.5</span>, <span class="dt">y =</span> <span class="fl">0.5</span>)  </span>
<span id="cb755-6"><a href="trc-quan-hoa-d-liu.html#cb755-6"></a></span>
<span id="cb755-7"><a href="trc-quan-hoa-d-liu.html#cb755-7"></a><span class="co"># Vị trí cho biểu đồ phụ</span></span>
<span id="cb755-8"><a href="trc-quan-hoa-d-liu.html#cb755-8"></a>position_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">viewport</span>(<span class="dt">width =</span> <span class="fl">0.35</span>, <span class="dt">height =</span> <span class="fl">0.25</span>, </span>
<span id="cb755-9"><a href="trc-quan-hoa-d-liu.html#cb755-9"></a>                       <span class="dt">x =</span> <span class="fl">0.25</span>, <span class="dt">y =</span> <span class="fl">0.75</span>)  </span>
<span id="cb755-10"><a href="trc-quan-hoa-d-liu.html#cb755-10"></a></span>
<span id="cb755-11"><a href="trc-quan-hoa-d-liu.html#cb755-11"></a><span class="kw">print</span>(p2, <span class="dt">vp =</span> position_<span class="dv">1</span>)</span>
<span id="cb755-12"><a href="trc-quan-hoa-d-liu.html#cb755-12"></a><span class="kw">print</span>(p3, <span class="dt">vp =</span> position_<span class="dv">2</span>)</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="xay-dng-biu--lollipop-chart" class="section level2">
<h2><span class="header-section-number">20.3</span> Xây dựng biểu đồ lollipop chart</h2>
<p>Trong trực quan hóa dữ liệu, <code>lollipop chart</code> tuy không phải là một trong những biểu đồ phổ biến nhưng lại rất hiệu quả khi muốn thể hiện sự dịch thay đổi của một chỉ số giữa hai điểm thời gian. Trong case study này, ta xây dựng biểu đồ <code>lollipop chart</code> với <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb756-1"><a href="trc-quan-hoa-d-liu.html#cb756-1"></a><span class="co"># Load library</span></span>
<span id="cb756-2"><a href="trc-quan-hoa-d-liu.html#cb756-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb756-3"><a href="trc-quan-hoa-d-liu.html#cb756-3"></a><span class="kw">library</span>(gapminder)</span></code></pre></div>
<p>Để xây dựng biểu đồ, ta sử dụng dữ liệu <code>gapminder</code> từ tập dữ liệu gapminder. Mục tiêu là xây dựng biểu đồ thể hiện được sự thay đổi GDP/đầu người của các nước châu Âu trong năm 1952 so với năm 1977.</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="trc-quan-hoa-d-liu.html#cb757-1"></a>data &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb757-2"><a href="trc-quan-hoa-d-liu.html#cb757-2"></a><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb757-3"><a href="trc-quan-hoa-d-liu.html#cb757-3"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1952</span>, <span class="dv">1977</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb757-4"><a href="trc-quan-hoa-d-liu.html#cb757-4"></a><span class="st">  </span><span class="kw">select</span>(country, year, gdpPercap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb757-5"><a href="trc-quan-hoa-d-liu.html#cb757-5"></a><span class="st">  </span><span class="kw">spread</span>(year, gdpPercap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb757-6"><a href="trc-quan-hoa-d-liu.html#cb757-6"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">y1952 =</span> <span class="st">`</span><span class="dt">1952</span><span class="st">`</span>,</span>
<span id="cb757-7"><a href="trc-quan-hoa-d-liu.html#cb757-7"></a>         <span class="dt">y1977 =</span> <span class="st">`</span><span class="dt">1977</span><span class="st">`</span>)</span>
<span id="cb757-8"><a href="trc-quan-hoa-d-liu.html#cb757-8"></a>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    country                y1952  y1977
##    &lt;fct&gt;                  &lt;dbl&gt;  &lt;dbl&gt;
##  1 Albania                1601.  3533.
##  2 Austria                6137. 19749.
##  3 Belgium                8343. 19118.
##  4 Bosnia and Herzegovina  974.  3528.
##  5 Bulgaria               2444.  7612.
##  6 Croatia                3119. 11305.
##  7 Czech Republic         6876. 14800.
##  8 Denmark                9692. 20423.
##  9 Finland                6425. 15605.
## 10 France                 7030. 18293.</code></pre>
<p>Biểu đồ lollipop có thể xây dựng dựa trên <code>geom_point</code> và <code>geom_segment</code> như sau.</p>
<p><strong>Biểu đồ đầu tiên</strong></p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="trc-quan-hoa-d-liu.html#cb759-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb759-2"><a href="trc-quan-hoa-d-liu.html#cb759-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x  =</span> country)) <span class="op">+</span></span>
<span id="cb759-3"><a href="trc-quan-hoa-d-liu.html#cb759-3"></a><span class="st">  </span><span class="co"># Tạo đường nối giữa hai điểm</span></span>
<span id="cb759-4"><a href="trc-quan-hoa-d-liu.html#cb759-4"></a><span class="st">  </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">y =</span> y1952, <span class="dt">yend =</span> y1977,</span>
<span id="cb759-5"><a href="trc-quan-hoa-d-liu.html#cb759-5"></a>               <span class="dt">x =</span> country, <span class="dt">xend =</span> country), <span class="dt">size =</span> <span class="dv">1</span>,</span>
<span id="cb759-6"><a href="trc-quan-hoa-d-liu.html#cb759-6"></a>               <span class="dt">col =</span> <span class="st">&quot;grey50&quot;</span>) <span class="op">+</span></span>
<span id="cb759-7"><a href="trc-quan-hoa-d-liu.html#cb759-7"></a><span class="st">  </span><span class="co"># Tạo điểm đầu</span></span>
<span id="cb759-8"><a href="trc-quan-hoa-d-liu.html#cb759-8"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(country, y1952, <span class="dt">color =</span> <span class="st">&quot;1952&quot;</span>), <span class="dt">size =</span> <span class="fl">3.5</span>) <span class="op">+</span></span>
<span id="cb759-9"><a href="trc-quan-hoa-d-liu.html#cb759-9"></a><span class="st">  </span><span class="co"># Tạo điểm cuối</span></span>
<span id="cb759-10"><a href="trc-quan-hoa-d-liu.html#cb759-10"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(country, y1977, </span>
<span id="cb759-11"><a href="trc-quan-hoa-d-liu.html#cb759-11"></a>             <span class="dt">color =</span> <span class="st">&quot;1977&quot;</span>), <span class="dt">size =</span> <span class="fl">3.5</span>) <span class="op">+</span></span>
<span id="cb759-12"><a href="trc-quan-hoa-d-liu.html#cb759-12"></a><span class="st">  </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Tuy nhiên, với biểu đồ trên, ta thấy xuất hiện hai lỗi cơ bản sau:</p>
<ul>
<li>Thứ nhất, thứ tự các các quan sát đang để dạng mặc định. Do đó, kết quả trực quan hóa chỉ mang tính thông tin mà chưa có yêu tố <code>kể chuyện</code> (story telling). Ta có thể giải quyết bằng cách sắp xếp lại factor theo thứ tự từ thấp đến cao.</li>
<li>Thứ hai, biểu đồ thể hiện theo chiều ngang. Do đó, các thông tin không cần thiết có thể được loại bỏ để biểu đồ gọn gàng và mạch lạc hơn.</li>
</ul>
<p>Ta có thể chỉnh lại biểu đồ như sau.</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="trc-quan-hoa-d-liu.html#cb760-1"></a><span class="co"># Tinh chỉnh theme cho biểu đồ</span></span>
<span id="cb760-2"><a href="trc-quan-hoa-d-liu.html#cb760-2"></a>my_theme &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</span>
<span id="cb760-3"><a href="trc-quan-hoa-d-liu.html#cb760-3"></a>  <span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-4"><a href="trc-quan-hoa-d-liu.html#cb760-4"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-5"><a href="trc-quan-hoa-d-liu.html#cb760-5"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-6"><a href="trc-quan-hoa-d-liu.html#cb760-6"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-7"><a href="trc-quan-hoa-d-liu.html#cb760-7"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.x =</span> <span class="kw">element_line</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-8"><a href="trc-quan-hoa-d-liu.html#cb760-8"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-9"><a href="trc-quan-hoa-d-liu.html#cb760-9"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">panel.border =</span> <span class="kw">element_blank</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-10"><a href="trc-quan-hoa-d-liu.html#cb760-10"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">13</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-11"><a href="trc-quan-hoa-d-liu.html#cb760-11"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>, <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">face =</span> <span class="st">&quot;italic&quot;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-12"><a href="trc-quan-hoa-d-liu.html#cb760-12"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">color =</span> <span class="st">&quot;gray20&quot;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb760-13"><a href="trc-quan-hoa-d-liu.html#cb760-13"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb760-14"><a href="trc-quan-hoa-d-liu.html#cb760-14"></a>} </span>
<span id="cb760-15"><a href="trc-quan-hoa-d-liu.html#cb760-15"></a></span>
<span id="cb760-16"><a href="trc-quan-hoa-d-liu.html#cb760-16"></a><span class="co"># Tạo biểu đồ mới</span></span>
<span id="cb760-17"><a href="trc-quan-hoa-d-liu.html#cb760-17"></a>p1 &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb760-18"><a href="trc-quan-hoa-d-liu.html#cb760-18"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">country =</span> <span class="kw">fct_reorder</span>(country, y1977)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb760-19"><a href="trc-quan-hoa-d-liu.html#cb760-19"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x  =</span> country)) <span class="op">+</span></span>
<span id="cb760-20"><a href="trc-quan-hoa-d-liu.html#cb760-20"></a><span class="st">  </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">y =</span> y1952, <span class="dt">yend =</span> y1977,</span>
<span id="cb760-21"><a href="trc-quan-hoa-d-liu.html#cb760-21"></a>               <span class="dt">x =</span> country, <span class="dt">xend =</span> country), <span class="dt">size =</span> <span class="dv">1</span>,</span>
<span id="cb760-22"><a href="trc-quan-hoa-d-liu.html#cb760-22"></a>               <span class="dt">col =</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb760-23"><a href="trc-quan-hoa-d-liu.html#cb760-23"></a>               <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb760-24"><a href="trc-quan-hoa-d-liu.html#cb760-24"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(country, y1952, <span class="dt">color =</span> <span class="st">&quot;1952&quot;</span>), </span>
<span id="cb760-25"><a href="trc-quan-hoa-d-liu.html#cb760-25"></a>             <span class="dt">size =</span> <span class="fl">3.5</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb760-26"><a href="trc-quan-hoa-d-liu.html#cb760-26"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(country, y1977, <span class="dt">color =</span> <span class="st">&quot;1977&quot;</span>), </span>
<span id="cb760-27"><a href="trc-quan-hoa-d-liu.html#cb760-27"></a>             <span class="dt">size =</span> <span class="fl">3.5</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb760-28"><a href="trc-quan-hoa-d-liu.html#cb760-28"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb760-29"><a href="trc-quan-hoa-d-liu.html#cb760-29"></a><span class="st">  </span><span class="kw">my_theme</span>() <span class="op">+</span></span>
<span id="cb760-30"><a href="trc-quan-hoa-d-liu.html#cb760-30"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">30000</span>, <span class="dt">by =</span> <span class="dv">5000</span>), </span>
<span id="cb760-31"><a href="trc-quan-hoa-d-liu.html#cb760-31"></a>                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">800</span>, <span class="dv">27000</span>)) <span class="op">+</span></span>
<span id="cb760-32"><a href="trc-quan-hoa-d-liu.html#cb760-32"></a><span class="st">  </span><span class="kw">scale_color_manual</span>(</span>
<span id="cb760-33"><a href="trc-quan-hoa-d-liu.html#cb760-33"></a>    <span class="dt">name =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb760-34"><a href="trc-quan-hoa-d-liu.html#cb760-34"></a>    <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;1952&quot;</span>, <span class="st">&quot;1977&quot;</span>),</span>
<span id="cb760-35"><a href="trc-quan-hoa-d-liu.html#cb760-35"></a>    <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;darkblue&quot;</span>, <span class="st">&quot;darkred&quot;</span>)</span>
<span id="cb760-36"><a href="trc-quan-hoa-d-liu.html#cb760-36"></a>  ) <span class="op">+</span></span>
<span id="cb760-37"><a href="trc-quan-hoa-d-liu.html#cb760-37"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>,</span>
<span id="cb760-38"><a href="trc-quan-hoa-d-liu.html#cb760-38"></a>       <span class="dt">title =</span> <span class="st">&quot;An example of lollipop chart&quot;</span>,</span>
<span id="cb760-39"><a href="trc-quan-hoa-d-liu.html#cb760-39"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Changes of GDP per capita in Europe&quot;</span>,</span>
<span id="cb760-40"><a href="trc-quan-hoa-d-liu.html#cb760-40"></a>       <span class="dt">caption =</span> <span class="st">&quot;Created by RAnalytics.vn&quot;</span>)</span>
<span id="cb760-41"><a href="trc-quan-hoa-d-liu.html#cb760-41"></a>p1</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p><strong>Bonus</strong>: Để nhấn mạnh hơn sự thay đổi của GDP per capita, ta có thể vẽ thêm các đường nối các điểm trong biểu đồ như sau.</p>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="trc-quan-hoa-d-liu.html#cb761-1"></a>p2 &lt;-<span class="st"> </span>p1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="kw">as.numeric</span>(country), y1977), </span>
<span id="cb761-2"><a href="trc-quan-hoa-d-liu.html#cb761-2"></a>               <span class="dt">col =</span> <span class="st">&quot;darkred&quot;</span>)</span>
<span id="cb761-3"><a href="trc-quan-hoa-d-liu.html#cb761-3"></a>p2</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="trc-quan-hoa-cac-phn-trung-lp-nhau" class="section level2">
<h2><span class="header-section-number">20.4</span> Trực quan hóa các phần trùng lặp nhau</h2>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="trc-quan-hoa-d-liu.html#cb762-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb762-2"><a href="trc-quan-hoa-d-liu.html#cb762-2"></a><span class="kw">library</span>(UpSetR)</span>
<span id="cb762-3"><a href="trc-quan-hoa-d-liu.html#cb762-3"></a></span>
<span id="cb762-4"><a href="trc-quan-hoa-d-liu.html#cb762-4"></a>movies &lt;-<span class="st"> </span><span class="kw">read.csv</span>( <span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;movies.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;UpSetR&quot;</span>), <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">sep=</span><span class="st">&quot;;&quot;</span> )</span>
<span id="cb762-5"><a href="trc-quan-hoa-d-liu.html#cb762-5"></a></span>
<span id="cb762-6"><a href="trc-quan-hoa-d-liu.html#cb762-6"></a>movies <span class="op">%&gt;%</span><span class="st"> </span>head</span></code></pre></div>
<pre><code>##                                 Name ReleaseDate Action Adventure Children
## 1                   Toy Story (1995)        1995      0         0        1
## 2                     Jumanji (1995)        1995      0         1        1
## 3            Grumpier Old Men (1995)        1995      0         0        0
## 4           Waiting to Exhale (1995)        1995      0         0        0
## 5 Father of the Bride Part II (1995)        1995      0         0        0
## 6                        Heat (1995)        1995      1         0        0
##   Comedy Crime Documentary Drama Fantasy Noir Horror Musical Mystery
## 1      1     0           0     0       0    0      0       0       0
## 2      0     0           0     0       1    0      0       0       0
## 3      1     0           0     0       0    0      0       0       0
## 4      1     0           0     1       0    0      0       0       0
## 5      1     0           0     0       0    0      0       0       0
## 6      0     1           0     0       0    0      0       0       0
##   Romance SciFi Thriller War Western AvgRating Watches
## 1       0     0        0   0       0      4.15    2077
## 2       0     0        0   0       0      3.20     701
## 3       1     0        0   0       0      3.02     478
## 4       0     0        0   0       0      2.73     170
## 5       0     0        0   0       0      3.01     296
## 6       0     0        1   0       0      3.88     940</code></pre>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="trc-quan-hoa-d-liu.html#cb764-1"></a><span class="kw">upset</span>(movies, <span class="dt">nsets =</span> <span class="dv">3</span>, <span class="dt">nintersects =</span> <span class="dv">30</span>, <span class="dt">mb.ratio =</span> <span class="kw">c</span>(<span class="fl">0.55</span>, <span class="fl">0.45</span>),</span>
<span id="cb764-2"><a href="trc-quan-hoa-d-liu.html#cb764-2"></a>      <span class="dt">order.by =</span> <span class="kw">c</span>(<span class="st">&quot;freq&quot;</span>, <span class="st">&quot;degree&quot;</span>), <span class="dt">decreasing =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>),</span>
<span id="cb764-3"><a href="trc-quan-hoa-d-liu.html#cb764-3"></a>      <span class="dt">mainbar.y.label =</span> <span class="st">&quot;# of users by groups&quot;</span>,</span>
<span id="cb764-4"><a href="trc-quan-hoa-d-liu.html#cb764-4"></a>      <span class="dt">sets.x.label =</span> <span class="st">&quot;# of users by platforms&quot;</span>,</span>
<span id="cb764-5"><a href="trc-quan-hoa-d-liu.html#cb764-5"></a>      <span class="dt">queries =</span> <span class="kw">list</span>(<span class="kw">list</span>(<span class="dt">query =</span> intersects, <span class="dt">params =</span> <span class="kw">list</span>(<span class="st">&quot;Drama&quot;</span>, <span class="st">&quot;Action&quot;</span>), </span>
<span id="cb764-6"><a href="trc-quan-hoa-d-liu.html#cb764-6"></a>                          <span class="dt">color =</span> <span class="st">&quot;darkred&quot;</span>, <span class="dt">active =</span> T)),</span>
<span id="cb764-7"><a href="trc-quan-hoa-d-liu.html#cb764-7"></a>      <span class="dt">main.bar.color =</span> <span class="st">&quot;darkgreen&quot;</span>,</span>
<span id="cb764-8"><a href="trc-quan-hoa-d-liu.html#cb764-8"></a>      <span class="dt">text.scale =</span> <span class="fl">1.4</span>,</span>
<span id="cb764-9"><a href="trc-quan-hoa-d-liu.html#cb764-9"></a>      <span class="dt">shade.alpha =</span> <span class="fl">0.55</span>, </span>
<span id="cb764-10"><a href="trc-quan-hoa-d-liu.html#cb764-10"></a>      <span class="dt">point.size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="71-casestudy-truc-quan-hoa_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb765"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb765-1"><a href="trc-quan-hoa-d-liu.html#cb765-1"></a><span class="co"># Lưu file về máy</span></span>
<span id="cb765-2"><a href="trc-quan-hoa-d-liu.html#cb765-2"></a><span class="kw">dev.copy</span>(png,<span class="st">&#39;myplot.png&#39;</span>, <span class="dt">width =</span> <span class="dv">600</span>, <span class="dt">height =</span> <span class="dv">400</span>)</span>
<span id="cb765-3"><a href="trc-quan-hoa-d-liu.html#cb765-3"></a><span class="kw">dev.off</span>()      </span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="phan-tich-chui-thi-gian-vi-tidyquant-va-timetk.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cac-meo-trong-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"split_by": "rmd"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
